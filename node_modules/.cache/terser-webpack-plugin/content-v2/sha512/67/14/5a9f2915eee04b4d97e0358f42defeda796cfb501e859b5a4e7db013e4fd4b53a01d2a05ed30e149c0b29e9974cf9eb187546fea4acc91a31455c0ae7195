{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22,14],{1547:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return O})),n.d(t,\"b\",(function(){return T})),n.d(t,\"f\",(function(){return C})),n.d(t,\"j\",(function(){return w})),n.d(t,\"d\",(function(){return N})),n.d(t,\"c\",(function(){return j})),n.d(t,\"m\",(function(){return R})),n.d(t,\"p\",(function(){return P})),n.d(t,\"n\",(function(){return _})),n.d(t,\"k\",(function(){return I})),n.d(t,\"e\",(function(){return k})),n.d(t,\"i\",(function(){return L})),n.d(t,\"g\",(function(){return A})),n.d(t,\"o\",(function(){return D})),n.d(t,\"l\",(function(){return M})),n.d(t,\"h\",(function(){return U}));var a=n(1551),r=n(1549),o=n(146),l=n(502),i=n.n(l),c=n(3),s=n(28),u=n(27),p=n(495),d=n(493),m=n(29),f=n.n(m),g=n(24);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e,t,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=E({profilescope:n},o);t!==u.k&&(l.namespace=t);var i=y({},e,{tags:l,metrics:[\"system.program.completed.runs\",\"system.program.failed.runs\",\"system.program.killed.runs\",\"system.program.node.minutes\"],timeRange:{start:a,end:r,resolution:\"auto\"},groupBy:[\"profile\"]});return a||r||(i=E({},i,y({},e,E({},i[e],{timeRange:E({},i[e].timeRange,{resolution:\"1h\",aggregate:!0})})))),i},S=function(e,t){var n=function(e){var t=0,n=0;return e.forEach((function(e){var a=Object(c.E)(e,\"entity\",\"details\",\"schedule\");a&&(a===u.b.defaultScheduleId?t+=1:n+=1)})),{schedulesCount:t,triggersCount:n}}(t),r=n.schedulesCount,o=n.triggersCount;a.c.dispatch({type:a.a.SET_SCHEDULES_TRIGGERS_COUNT,payload:{profile:e,schedulesCount:r,triggersCount:o}})},O=\"oneDayMetrics\",T=\"overAllMetrics\",C=function(e,t,n){var a=x(O,e,t.scope,\"now-24h\",\"now\",n),r=x(T,e,t.scope,0,0,n);return p.a.query(null,E({},a,{},r)).flatMap((function(e){var t,n=(y(t={},O,{runs:\"--\",minutes:\"--\"}),y(t,T,{runs:\"--\",minutes:\"--\"}),t);return Object.keys(e).forEach((function(t){e[t].series.forEach((function(e){var a,r=e.metricName.split(\".\").pop();a=e.data.length?1===e.data.length?e.data[0].value:e.data.reduce((function(e,t){return e+t.value}),0):0,Object.prototype.hasOwnProperty.call(n,t)||(n[t]={}),\"--\"===n[t][r]||f()(n[t][r])?n[t]=E({},n[t],y({},r,a)):n[t][r]+=a}))})),s.Observable.create((function(e){e.next(n)}))}))},w=function(e){a.c.dispatch({type:a.a.SET_LOADING,payload:{loading:!0}});var t=r.a.getSystemProfiles();(t=e!==u.k?t.combineLatest(r.a.list({namespace:e})):t.combineLatest(s.Observable.of([]))).subscribe((function(t){var n=b(t,2),r=n[0],o=void 0===r?[]:r,l=n[1],i=void 0===l?[]:l,s=o;!1===g.a.showNativeProfile&&(s=o.filter((function(e){return\"native\"!==e.name})));var m=i.concat(s).map((function(e){return E({},e,{oneDayMetrics:{},overAllMetrics:{},schedulesCount:\"--\",triggersCount:\"--\"})}));a.c.dispatch({type:a.a.SET_PROFILES,payload:{profiles:m}});var v={programtype:\"Workflow\"},h=x(\"oneDayUSERMetrics\",e,u.h.USER,\"now-24h\",\"now\",v),O=x(\"overAllUSERMetrics\",e,u.h.USER,0,0,v),T=x(\"oneDaySYSTEMMetrics\",e,u.h.SYSTEM,\"now-24h\",\"now\",v),C=x(\"overAllSYSTEMMetrics\",e,u.h.SYSTEM,0,0,v);p.a.query(null,E({},h,{},O,{},T,{},C)).subscribe((function(e){var t={};Object.keys(e).forEach((function(n){var a=-1!==n.indexOf(u.h.USER)?u.h.USER:u.h.SYSTEM,r=n.replace(/USER|SYSTEM/,\"\");e[n].series.forEach((function(e){var n,o=e.grouping.profile,l=\"\".concat(a,\":\").concat(o),i=e.metricName.split(\".\").pop();n=e.data.length?1===e.data.length?e.data[0].value:e.data.reduce((function(e,t){return e+t.value}),0):0,Object.prototype.hasOwnProperty.call(t,l)||(t[l]=y({},r,{})),f()(Object(c.E)(t,l,r,i))||(n+=t[l][r][i]),t[l]=E({},t[l],y({},r,E({},t[l][r],y({},i,n))))}))})),a.c.dispatch({type:a.a.SET_PROFILE_METRICS,payload:{profilesToMetricsMap:t}})})),m.forEach((function(t){var n=t.scope,a=\"profile:\".concat(n,\":\").concat(t.name);(e===u.k?d.a.searchSystem({query:a,responseFormat:\"v6\"}):d.a.search({namespace:e,query:a,responseFormat:\"v6\"})).subscribe((function(e){return S(t.name,e.results)}))}))}),P)},N=function(e,t){var n=r.a.get({namespace:e,profile:t.name});e===u.k&&(n=r.a.getSystemProfile({profile:t.name})),n.subscribe((function(e){var n=JSON.stringify(e,null,2),a=\"\".concat(t.name,\"-\").concat(t.provisioner.name,\"-profile.json\");i()(n,a)}),P)},j=function(e,t,n){var a;return(a=e===u.k?r.a.deleteSystemProfile({profile:t}):r.a.delete({namespace:e,profile:t})).subscribe((function(){w(n)}),(function(e){s.Observable.throw(e)})),a},R=function(e,t){if(Object(c.E)(t,\"target\",\"files\",0)){var n=t.target.files[0],o=new FileReader;o.readAsText(n,\"UTF-8\"),o.onload=function(t){var n=t.target.result;try{n=JSON.parse(n)}catch(e){return void a.c.dispatch({type:a.a.SET_ERROR,payload:{error:e.message||e}})}var o=r.a.create({namespace:e,profile:n.name},n);e===u.k&&(o=r.a.createSystemProfile({profile:n.name},n)),o.subscribe((function(){w(e);var t=e===u.k?u.h.SYSTEM:u.h.USER,a=\"\".concat(t,\":\").concat(n.name);M(a)}),(function(e){a.c.dispatch({type:a.a.SET_ERROR,payload:{error:e.response||e}})}))}}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a.c.dispatch({type:a.a.SET_ERROR,payload:{error:e}})},_=function(){a.c.dispatch({type:a.a.RESET})},I=function(e,t){if(t.length){var n=t.find((function(t){return t.name===e.provisioner.name}));if(n)return n.label}return e.provisioner.name},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return e.replace(/(USER|SYSTEM):/g,\"\")},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=arguments.length>1?arguments[1]:void 0;return e&&t?t===u.h.SYSTEM?\"\".concat(u.h.SYSTEM,\":\").concat(e):\"\".concat(u.h.USER,\":\").concat(e):e},A=function(e){(e===u.k?o.a.getSystemPreferences():o.a.getNamespacePreferences({namespace:e})).subscribe((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t[u.a.PROFILE_NAME_PREFERENCE_PROPERTY];n||e!==u.k||(n=u.a.DEFAULT_PROFILE_NAME),n&&a.c.dispatch({type:a.a.SET_DEFAULT_PROFILE,payload:{defaultProfile:n}})}),P)},D=function(e,t){function n(){a.c.dispatch({type:a.a.SET_DEFAULT_PROFILE,payload:{defaultProfile:t}})}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=y({},u.a.PROFILE_NAME_PREFERENCE_PROPERTY,t);return E({},e,{},n)}if(e===u.k)o.a.getSystemPreferences().subscribe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.a.setSystemPreferences({},r(e)).subscribe(n,P)}),P);else{var l={namespace:e};o.a.getNamespacePreferences(l).subscribe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.a.setNamespacePreferences(l,r(e)).subscribe(n,P)}))}},M=function(e){a.c.dispatch({type:a.a.SET_NEW_PROFILE,payload:{newProfile:e}}),setTimeout((function(){a.c.dispatch({type:a.a.SET_NEW_PROFILE,payload:{newProfile:null}})}),3e3)},U=function(e){if(\"number\"==typeof e){var t=e/60;return\"function\"==typeof t.toFixed?t.toFixed(2):t}return e}},1548:function(e,t,n){\"use strict\";n.d(t,\"d\",(function(){return g})),n.d(t,\"e\",(function(){return b})),n.d(t,\"g\",(function(){return v})),n.d(t,\"j\",(function(){return h})),n.d(t,\"a\",(function(){return E})),n.d(t,\"b\",(function(){return y})),n.d(t,\"f\",(function(){return x})),n.d(t,\"h\",(function(){return S})),n.d(t,\"i\",(function(){return O})),n.d(t,\"c\",(function(){return T})),n.d(t,\"k\",(function(){return C})),n.d(t,\"l\",(function(){return w}));var a=n(8),r=n(28),o=n(164),l=n(1558),i=n(1619),c=n(160),s=n(3),u=n(1561),p=function(){return(p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},d=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))},m=function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;l;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(r=l.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},f=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};function g(e,t,n,r,l){var i={namespace:Object(a.d)(),parentArtifact:e.name,version:e.version,extension:l,pluginName:r,scope:e.scope,artifactName:t,artifactScope:n,limit:1,order:\"DESC\"};return o.a.getPluginProperties(i).map((function(e){return f(e,1)[0]}))}function b(e,t){return r.Observable.create((function(n){var r={namespace:Object(a.d)(),parentArtifact:e.name,version:e.version,scope:e.scope,pluginType:t};l.a.getPlugins(r).subscribe((function(e){var t=Object(i.a)(e),r=Object.keys(t).map((function(e){return t[e][0]})),o=r.map((function(e){var t=e.name+\"-\"+e.type;return p(p({},e.artifact),{properties:[\"widgets.\"+t]})}));l.a.batchGetPluginsWidgets({namespace:Object(a.d)()},o).subscribe((function(e){var t={};e.forEach((function(e){Object.keys(e.properties).forEach((function(n){var a=n.split(\".\")[1],r={};try{r=JSON.parse(e.properties[n])}catch(e){console.log(\"Failed to parse widget JSON\",e)}t[a]=r}))})),n.next({plugins:r,widgetMap:t}),n.complete()}),(function(e){n.error(e)}))}),(function(e){n.error(e)}))}))}function v(e){var t=e.database,n=e.table,a=e.schema;return c.Map.isMap(e)&&(t=e.get(\"database\"),n=e.get(\"table\"),a=e.get(\"schema\")),a?\"db-\"+t+\"-schema-\"+a+\"-table-\"+n:\"db-\"+t+\"-table-\"+n}var h=function(e){return{database:e.get(\"database\"),table:e.get(\"table\"),schema:e.get(\"schema\")}};function E(e,t,n){if(!e)return[];var a=[];return e.toList().forEach((function(e){var r={database:e.get(\"database\"),table:e.get(\"table\")},o=e.get(\"schema\");o&&(r.schema=o);var l=v(r),i=t.get(l);if(i&&i.size>0){var c=[];i.forEach((function(e){var t={name:e.get(\"name\"),type:e.get(\"type\")};e.get(\"suppressWarning\")&&(t.suppressWarning=!0),c.push(t)})),r.columns=c}var s=n.get(l);s&&s.size>0&&(r.dmlBlacklist=s.toArray()),a.push(r)})),a}function y(e,t){return d(this,void 0,void 0,(function(){var n,a,r,o,l,p,d,f,b,h,E,y,x,S,O,T;return m(this,(function(m){switch(m.label){case 0:return n={loading:!1,name:e.label||e.name||\"\",description:Object(s.E)(e,\"config\",\"description\")||\"\",activeStep:1,offsetBasePath:Object(s.E)(e,\"config\",\"offsetBasePath\")||\"\",numInstances:Object(s.E)(e,\"config\",\"parallelism\",\"numInstances\")||1,transformations:Object(s.E)(e,\"config\",\"tableTransformations\")||{}},Object.keys(n.transformations).forEach((function(e){var t=n.transformations[e].tableName;n.transformations[t]=n.transformations[e],delete n.transformations[e]})),a=Object(s.E)(e,\"config\",\"stages\")||[],(r=a.find((function(e){return Object(s.E)(e,\"plugin\",\"type\")===u.b.source})))?(o=Object(s.E)(r,\"plugin\",\"artifact\")||{},[4,g(t,o.name,o.scope,r.plugin.name,r.plugin.type).toPromise()]):[3,6];case 1:l=m.sent(),n.sourcePluginInfo=l,n.sourceConfig=Object(s.E)(r,\"plugin\",\"properties\")||{},m.label=2;case 2:return m.trys.push([2,4,,5]),[4,Object(i.b)(o.name,o.version,o.scope,l.name,l.type).toPromise()];case 3:return p=m.sent(),n.sourcePluginWidget=p,[3,5];case 4:return d=m.sent(),console.log(\"Cannot fetch source plugin widget\",d),[3,5];case 5:Object.keys(n.sourceConfig).length>0&&(n.activeStep=2),m.label=6;case 6:return(f=Object(s.E)(e,\"config\",\"tables\"))&&(b=Object(c.Map)(),h=Object(c.Map)(),E=Object(c.Map)(),f.forEach((function(e){var t=v(e),n={database:e.database,table:e.table};e.schema&&(n.schema=e.schema),b=b.set(t,Object(c.fromJS)(n));var a=Object(s.E)(e,\"columns\")||[],r=Object(c.fromJS)(a);h=h.set(t,r);var o=Object(s.E)(e,\"dmlBlacklist\")||[];E=E.set(t,Object(c.Set)(o))})),n.tables=b,n.columns=h,n.dmlBlacklist=E,b.size>0&&(n.activeStep=3)),(y=a.find((function(e){return Object(s.E)(e,\"plugin\",\"type\")===u.b.target})))?(x=Object(s.E)(y,\"plugin\",\"artifact\")||{},[4,g(t,x.name,x.scope,y.plugin.name,y.plugin.type).toPromise()]):[3,12];case 7:S=m.sent(),n.targetPluginInfo=S,n.targetConfig=Object(s.E)(y,\"plugin\",\"properties\")||{},m.label=8;case 8:return m.trys.push([8,10,,11]),[4,Object(i.b)(x.name,x.version,x.scope,S.name,S.type).toPromise()];case 9:return O=m.sent(),n.targetPluginWidget=O,[3,11];case 10:return T=m.sent(),console.log(\"Cannot fetch target plugin widget\",T),[3,11];case 11:Object.keys(n.targetConfig).length>0&&(n.activeStep=5),m.label=12;case 12:return[2,n]}}))}))}function x(e,t){if(void 0===t&&(t=999),e<t)return e;return Object(s.M)(e,2)}function S(e){var t=e;c.Map.isMap(e)&&(t=e.toJS());var n=t.database;return t.schema&&(n=n+\".\"+t.schema),n=n+\".\"+t.table}function O(e){if(!e)return\"\";var t=e.table,n=e.schema;c.Map.isMap(e)&&(t=e.get(\"table\"),n=e.get(\"schema\"));var a=t;return n&&(a=n+\".\"+a),a}function T(e){return\"/ns/\"+Object(a.d)()+\"/replication/detail/\"+e}function C(e){return\"Worker\"===e.type&&\"DeltaWorker\"===e.program}function w(e){var t=e.description,n=e.column;return[e.table.split(\".\").slice(-1)[0],n,t]}},1549:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i}));var a=n(56),r=n(7),o=a.a.getInstance(),l=\"\".concat(\"/namespaces/:namespace\",\"/profiles\"),i={list:Object(r.a)(o,\"GET\",\"REQUEST\",l),getSystemProfiles:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(\"/profiles\")),create:Object(r.a)(o,\"PUT\",\"REQUEST\",\"\".concat(l,\"/:profile\")),createSystemProfile:Object(r.a)(o,\"PUT\",\"REQUEST\",\"\".concat(\"/profiles\",\"/:profile\")),get:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(l,\"/:profile\")),getSystemProfile:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(\"/profiles\",\"/:profile\")),deleteSystemProfile:Object(r.a)(o,\"DELETE\",\"REQUEST\",\"\".concat(\"/profiles\",\"/:profile\")),delete:Object(r.a)(o,\"DELETE\",\"REQUEST\",\"\".concat(l,\"/:profile\")),toggleSystemProfileStatus:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(\"/profiles\",\"/:profile/:action\")),toggleProfileStatus:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(l,\"/:profile/:action\")),getProvisioners:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(\"/provisioners\")),getProvisionerDetailSpec:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(\"/provisioners\",\"/:provisioner\"))}},1551:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return c})),n.d(t,\"b\",(function(){return u}));var a=n(33),r=n(3);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={SET_PROFILES:\"SET_PROFILES\",SET_DEFAULT_PROFILE:\"SET_DEFAULT_PROFILE\",SET_NEW_PROFILE:\"SET_NEW_PROFILE\",SET_PROFILE_METRICS:\"SET_PROFILE_METRICS\",SET_SCHEDULES_TRIGGERS_COUNT:\"SET_SCHEDULES_TRIGGERS_COUNT\",SET_LOADING:\"SET_LOADING\",SET_ERROR:\"SET_ERROR\",RESET:\"RESET\"},s={profiles:[],defaultProfile:null,newProfile:\"\",loading:!1,error:null},u={ENABLED:\"enabled\",DISABLED:\"disabled\"},p=Object(a.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.m;switch(t.type){case c.SET_PROFILES:return l({},e,{profiles:t.payload.profiles,error:null,loading:!1});case c.SET_PROFILE_METRICS:var n=t.payload.profilesToMetricsMap,a=e.profiles;return a=a.map((function(e){var t={runs:\"--\",minutes:\"--\"},a=\"\".concat(e.scope,\":\").concat(e.name);return l({},e,{oneDayMetrics:t,overAllMetrics:t},n[a]||{})})),l({},e,{profiles:a});case c.SET_SCHEDULES_TRIGGERS_COUNT:var o=t.payload,i=o.profile,u=o.schedulesCount,p=o.triggersCount,d=e.profiles;return d=d.map((function(e){return e.name===i?l({},e,{schedulesCount:u,triggersCount:p}):e})),l({},e,{profiles:d});case c.SET_DEFAULT_PROFILE:return l({},e,{defaultProfile:t.payload.defaultProfile});case c.SET_NEW_PROFILE:return l({},e,{newProfile:t.payload.newProfile});case c.SET_LOADING:return l({},e,{error:null,loading:t.payload.loading});case c.SET_ERROR:return l({},e,{error:t.payload.error,loading:!1});case c.RESET:return s;default:return e}}),s,Object(r.h)(\"ProfilesStore\")());t.c=p},1553:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i}));var a=n(56),r=n(7),o=a.a.getInstance(),l=\"/namespaces/:namespace/apps/:appId/:programType/:programId\",i={get:Object(r.a)(o,\"GET\",\"REQUEST\",l),status:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(l,\"/status\")),runs:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(l,\"/runs\")),pollRuns:Object(r.a)(o,\"GET\",\"POLL\",\"\".concat(l,\"/runs\")),pollStatus:Object(r.a)(o,\"GET\",\"POLL\",\"\".concat(l,\"/status\")),action:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(l,\"/:action\")),stopRun:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(l,\"/runs/:runId/stop\")),pollRunStatus:Object(r.a)(o,\"GET\",\"POLL\",\"\".concat(l,\"/runs/:runId\")),nextLogs:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(l,\"/runs/:runId/logs/next\")),prevLogs:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(l,\"/runs/:runId/logs/prev\"))}},1557:function(e,t,n){\"use strict\";var a,r=n(27);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(o(a={},r.g.DEPLOYED,\"Deployed\"),o(a,r.g.SUBMITTING,\"Submitting\"),o(a,r.g.RUNNING,\"Running\"),o(a,r.g.SUCCEEDED,\"Succeeded\"),o(a,r.g.FAILED,\"Failed\"),o(a,r.g.REJECTED,\"Rejected\"),o(a,r.g.DRAFT,\"Draft\"),o(a,r.g.STOPPED,\"Stopped\"),o(a,r.g.COMPLETED,\"Succeeded\"),o(a,r.g.KILLED,\"Stopped\"),o(a,r.g.KILLED_BY_TIMER,\"Succeeded\"),o(a,r.g.DEPLOY_FAILED,\"Failed\"),o(a,r.g.RUN_FAILED,\"Failed\"),o(a,r.g.SUSPENDED,\"Deployed\"),o(a,r.g.SCHEDULED,\"Scheduled\"),o(a,r.g.STARTING,\"Starting\"),o(a,r.g.SCHEDULING,\"Scheduling\"),o(a,r.g.STOPPING,\"Stopping\"),o(a,r.g.SUSPENDING,\"Suspending\"),o(a,r.g.PENDING,\"Provisioning\"),a);t.a={statusMap:l,lookupDisplayStatus:function(e){return e in l?l[e]:e},getStatusIndicatorClass:function(e){return e===l[r.g.RUNNING]||e===l[r.g.STARTING]||e===l[r.g.PENDING]||e===l[r.g.STOPPING]?\"status-blue\":e===l[r.g.SUCCEEDED]||e===l[r.g.SCHEDULING]?\"status-light-green\":e===l[r.g.FAILED]||e===l[r.g.REJECTED]?\"status-light-red\":\"status-light-grey\"},getStatusIndicatorIcon:function(e){return e===l[r.g.PENDING]||e===l[r.g.DRAFT]?\"icon-circle-o\":\"icon-circle\"}}},1558:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return d}));var a=n(56),r=n(7),o=a.a.getInstance(),l=\"/namespaces/:namespace/apps/:appName\",i=\"\".concat(l,\"/workers/DeltaWorker\"),c=\"\".concat(\"/namespaces/system/apps/delta\",\"/services/assessor/methods/v1/contexts/:namespace\"),s=\"\".concat(c,\"/drafts/:draftId\"),u=\"\".concat(l,\"/workers/DeltaWorker\"),p=\"\".concat(c,\"/assessPipeline\"),d={getDeltaApp:Object(r.a)(o,\"GET\",\"REQUEST\",\"/namespaces/system/apps/delta\"),getPlugins:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(\"/namespaces/:namespace/artifacts/:parentArtifact/versions/:version/extensions\",\"/:pluginType\")),batchGetPluginsWidgets:Object(r.a)(o,\"POST\",\"REQUEST\",\"/namespaces/:namespace/artifactproperties\"),publish:Object(r.a)(o,\"PUT\",\"REQUEST\",l),action:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(i,\"/:action\")),delete:Object(r.a)(o,\"DELETE\",\"REQUEST\",l),listDrafts:Object(r.a)(o,\"GET\",\"REQUEST\",\"\".concat(c,\"/drafts\")),putDraft:Object(r.a)(o,\"PUT\",\"REQUEST\",s),deleteDraft:Object(r.a)(o,\"DELETE\",\"REQUEST\",s),getDraft:Object(r.a)(o,\"GET\",\"REQUEST\",s),listTables:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(s,\"/listTables\")),getTableInfo:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(s,\"/describeTable\")),getReplicator:Object(r.a)(o,\"GET\",\"REQUEST\",l),assessPipeline:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(s,\"/assessPipeline\")),validatePipeline:Object(r.a)(o,\"POST\",\"REQUEST\",p),assessTable:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(s,\"/assessTable\")),getTargetTableInfo:Object(r.a)(o,\"POST\",\"REQUEST\",\"\".concat(c,\"/assessTable\")),fetchArtifactProperties:Object(r.a)(o,\"GET\",\"REQUEST\",\"/namespaces/:namespace/artifacts/:artifactName/versions/:artifactVersion/properties\"),pollStatus:Object(r.a)(o,\"GET\",\"POLL\",\"\".concat(u,\"/runs?limit=1\")),pollTableStatus:Object(r.a)(o,\"POST\",\"POLL\",\"\".concat(c,\"/getState\")),pollMetrics:Object(r.a)(o,\"POST\",\"REQUEST\",\"/metrics/query?:queryParams\"),list:Object(r.a)(o,\"GET\",\"REQUEST\",\"/namespaces/:namespace/apps?artifactName=delta-app\"),batchStatus:Object(r.a)(o,\"POST\",\"REQUEST\",\"/namespaces/:namespace/status\"),batchAppDetail:Object(r.a)(o,\"POST\",\"REQUEST\",\"/namespaces/:namespace/appdetail\")}},1560:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i}));var a=n(7),r=n(56).a.getInstance(),o=\"/namespaces/:namespace/apps\",l=\"\".concat(o,\"/:appId\"),i={list:Object(a.a)(r,\"GET\",\"REQUEST\",o),deployApp:Object(a.a)(r,\"PUT\",\"REQUEST\",l),get:Object(a.a)(r,\"GET\",\"REQUEST\",l),getVersions:Object(a.a)(r,\"GET\",\"REQUEST\",\"\".concat(l,\"/versions\")),getDeployedApp:Object(a.a)(r,\"GET\",\"REQUEST\",o),batchStatus:Object(a.a)(r,\"POST\",\"POLL\",\"/namespaces/:namespace/status\"),batchAppDetail:Object(a.a)(r,\"POST\",\"REQUEST\",\"/namespaces/:namespace/appdetail\"),delete:Object(a.a)(r,\"DELETE\",\"REQUEST\",l)}},1561:function(e,t,n){\"use strict\";var a;n.d(t,\"b\",(function(){return a})),n.d(t,\"a\",(function(){return r})),function(e){e.source=\"cdcSource\",e.target=\"cdcTarget\"}(a||(a={}));var r={programType:\"workers\",programId:\"DeltaWorker\"}},1565:function(e,t,n){\"use strict\";var a,r=n(0),o=n.n(r),l=n(2),i=n.n(l),c=n(79),s=n(715),u=n(13),p=n.n(u),d=function(e,t){return Object.defineProperty?Object.defineProperty(e,\"raw\",{value:t}):e.raw=t,e},m=\"features.Cloud.Profiles\",f=c.c.span.withConfig({displayName:\"AutoScaleBadge__Badge\"})(a||(a=d([\"\\n  color: #fff;\\n  font-size: 0.85rem;\\n  background: var(--brand-primary-color);\\n  padding: 2px 6px;\\n  display: inline-block;\\n  border-radius: 20px;\\n  margin-left: 6px;\\n  cursor: pointer;\\n\"],[\"\\n  color: #fff;\\n  font-size: 0.85rem;\\n  background: var(--brand-primary-color);\\n  padding: 2px 6px;\\n  display: inline-block;\\n  border-radius: 20px;\\n  margin-left: 6px;\\n  cursor: pointer;\\n\"]))),g=p()((function(){return{tooltip:{backgroundColor:\"#999\",fontSize:\"1rem\"}}}))(s.a);t.a=function(e){var t=e.properties;return(void 0===t?[]:t).some((function(e){return\"autoScalingPolicy\"===e.name&&\"\"!==e.value||\"enablePredefinedAutoScaling\"===e.name&&\"true\"===e.value}))?o.a.createElement(g,{title:i.a.translate(m+\".common.autoScaleTooltip\")},o.a.createElement(f,null,i.a.translate(m+\".common.autoScaleBadge\"))):null}},1566:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return p}));var a=n(33),r=n(3),o=n(1549),l=n(50),i=n.n(l),c=n(28),s=\"SAVE_PROVISIONERS\",u={nameToLabelMap:{},list:[]},p=function(){var e,t=d.getState().list,n=function(){return c.Observable.create((function(e){e.next(d.getState())}))};return i()(t)?(e=o.a.getProvisioners(),e.subscribe((function(e){d.dispatch({type:s,payload:{provisioners:e}})}),(function(e){console.log(\"Fetching provisioners failed: \",e)})),e).flatMap(n):n()},d=Object(a.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.m;switch(t.type){case s:var n=t.payload.provisioners,a={};return n.forEach((function(e){a[e.name]=e.label})),{nameToLabelMap:a,list:n};default:return e}}),u,Object(r.h)(\"ProvisionersMapStore\")())},1569:function(e,t,n){\"use strict\";var a=n(72),r=n(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var o=r(n(0)),l=(0,a(n(74)).default)(o.createElement(\"path\",{d:\"M7 10l5 5 5-5z\"}),\"ArrowDropDown\");t.default=l},1571:function(e,t,n){e.exports=n(70)(1535)},1616:function(e,t,n){\"use strict\";var a=n(72),r=n(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var o=r(n(0)),l=(0,a(n(74)).default)(o.createElement(\"path\",{d:\"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\"}),\"ArrowDownward\");t.default=l},1617:function(e,t,n){\"use strict\";var a=n(72),r=n(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var o=r(n(0)),l=(0,a(n(74)).default)(o.createElement(\"path\",{d:\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"}),\"ChevronRight\");t.default=l},1619:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return s})),n.d(t,\"b\",(function(){return u}));var a,r=n(164),o=n(1740),l=n.n(o),i=n(8),c=n(111);function s(e){var t=l()(e,\"name\");return Object.keys(t).forEach((function(e){t[e]=t[e].sort((function(e,t){var n=new c.a(e.artifact.version),r=new c.a(t.artifact.version);return n.compareTo(r)<0?a.after:n.compareTo(r)>0||\"USER\"===e.artifact.scope?a.before:a.after}))})),t}function u(e,t,n,a,o){var l=\"widgets.\"+a+\"-\"+o,c={namespace:Object(i.d)(),artifactName:e,artifactVersion:t,scope:n,keys:l};return r.a.fetchWidgetJson(c).map((function(e){if(!e||!e[l])return{};try{return JSON.parse(e[l])}catch(e){throw new Error(e)}}))}!function(e){e[e.before=-1]=\"before\",e[e.after=1]=\"after\"}(a||(a={}))},1629:function(e,t,n){\"use strict\";n.r(t);var a,r=n(0),o=n(13),l=n.n(o),i=n(45),c=n(1553),s=n(8),u=n(3);!function(e){e.ERROR=\"ERROR\",e.WARN=\"WARN\",e.INFO=\"INFO\",e.DEBUG=\"DEBUG\",e.TRACE=\"TRACE\"}(a||(a={}));var p,d=function(e,t){var n=this;this.includeSystemLogs=!1,this.logLevel=a.INFO,this.getFilter=function(){var e=\"loglevel=\"+n.logLevel;return n.includeSystemLogs||(e=e+\" \"+n.logFilter),e},this.getBaseParams=function(){return{namespace:n.namespace,appId:n.application,programType:n.programType,programId:n.programName,runId:n.runId,max:50,format:\"json\",filter:n.getFilter()}},this.init=function(){return n.getLast()},this.getNext=function(){var e=n.getBaseParams();return n.lastLog&&(e.fromOffset=n.lastLog.offset),c.a.nextLogs(e).map((function(e){return void 0===e&&(e=[]),e.length>0&&(n.lastLog=e[e.length-1]),e}))},this.getPrev=function(){var e=n.getBaseParams();return n.firstLog&&(e.fromOffset=n.firstLog.offset),c.a.prevLogs(e).map((function(e){return void 0===e&&(e=[]),e.length>0&&(n.firstLog=e[0]),e}))},this.getFirst=function(){var e=n.getBaseParams();return c.a.nextLogs(e).map((function(e){return void 0===e&&(e=[]),e.length>0&&(n.firstLog=e[0],n.lastLog=e[e.length-1]),e}))},this.getLast=function(){var e=n.getBaseParams();return c.a.prevLogs(e).map((function(e){return void 0===e&&(e=[]),e.length>0&&(n.firstLog=e[0],n.lastLog=e[e.length-1]),e}))},this.onLogsTrim=function(e,t){n.firstLog=e,n.lastLog=t},this.setIncludeSystemLogs=function(e){return n.includeSystemLogs=e,n.init()},this.getIncludeSystemLogs=function(){return n.includeSystemLogs},this.setLogLevel=function(e){return n.logLevel=e,n.init()},this.getLogLevel=function(){return n.logLevel},this.getDownloadFileName=function(){return[n.namespace,n.application,n.programType,n.programName,n.runId].join(\"-\")},this.getRawLogsUrl=function(){return[\"/v3\",\"namespaces\",n.namespace,\"apps\",n.application,n.programType,n.programName,\"runs\",n.runId,\"logs?escape=false\"].join(\"/\")},this.namespace=e.namespace,this.application=e.application,this.programType=e.programType,this.programName=e.programName,this.runId=e.runId,this.logFilter=t||\"AND .origin=plugin OR .origin=program\"},m=n(197),f=n(6),g=n.n(f),b=n(1616),v=n.n(b),h=n(12),E=n(1569),y=n.n(E),x=n(220),S=n(14),O=n(62),T=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},C=l()((function(e){return{root:{backgroundColor:e.palette.grey[900],display:\"flex\",justifyContent:\"flex-end\",alignItems:\"center\",height:\"50px\",paddingLeft:\"20px\",paddingRight:\"20px\",position:\"relative\"},loadingContainer:{marginRight:\"auto\"},actionButton:{margin:e.spacing(1),backgroundColor:e.palette.white[50],color:e.palette.blue[100],\"&:hover\":{color:e.palette.blue[100],backgroundColor:e.palette.white[50]},\"&:focus\":{color:e.palette.blue[100],outline:\"none\",textDecoration:\"none\"},\"&:active\":{color:e.palette.blue[100]},\"&$disabled\":{color:e.palette.grey[50],cursor:\"not-allowed\",backgroundColor:e.palette.white[50]}},downArrow:{marginLeft:\"5px\"},closeButton:{marginLeft:\"30px\",cursor:\"pointer\",fontSize:\"16px\"},disabled:{},checkboxContainer:{margin:\"0 40px\",userSelect:\"none\"},checkbox:{color:e.palette.white[50]},popover:{display:\"inline\",\"& .popper\":{boxShadow:e.shadows[3]}},btnGroup:{display:\"flex\",boxShadow:e.shadows[2],marginLeft:\"8px\",\"& $actionButton\":{margin:0,boxShadow:\"none\"}},downloadBtn:{borderTopRightRadius:0,borderBottomRightRadius:0},dropdownBtn:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:\"1px solid \"+e.palette.grey[300],minWidth:0,paddingLeft:\"5px\",paddingRight:\"5px\",\"&.active\":{backgroundColor:e.palette.blue[300]+\"80\"}}}}))((function(e){var t,n,a=e.classes,o=e.dataFetcher,l=e.isPolling,i=e.getLatestLogs,c=e.setSystemLogs,s=e.onClose,u=e.loading,p=T(r.useState(o.getIncludeSystemLogs()),2),d=p[0],f=p[1];function b(){var e=o.getRawLogsUrl();return\"/downloadLogs?backendPath=\"+encodeURIComponent(e)}return r.createElement(\"div\",{className:a.root,\"data-cy\":\"log-viewer-top-panel\"},r.createElement(h.a,{condition:u},r.createElement(\"div\",{className:a.loadingContainer},r.createElement(O.a,null))),r.createElement(m.a,{variant:\"contained\",className:g()(a.actionButton,(t={},t[a.disabled]=l,t)),disabled:l,onClick:i},\"Scroll to Latest Logs\",r.createElement(v.a,{className:a.downArrow})),r.createElement(m.a,{variant:\"contained\",className:a.actionButton,onClick:function(){var e=!d;f(e),c(e)}},d?\"Hide\":\"View\",\" Advanced Logs\"),r.createElement(\"div\",{className:a.btnGroup},r.createElement(m.a,{variant:\"contained\",className:a.actionButton+\" \"+a.downloadBtn,href:(n=o.getDownloadFileName(),b()+\"&type=download&filename=\"+n+\".log\"),target:\"_blank\"},\"Download All\"),r.createElement(x.a,{target:function(e){var t=e.className;return r.createElement(m.a,{variant:\"contained\",className:t+\" \"+a.actionButton+\" \"+a.dropdownBtn},r.createElement(y.a,null))},modifiers:{preventOverflow:{enabled:!0,boundariesElement:\"viewport\"}},className:a.popover,placement:\"bottom\",showOn:\"Click\"},r.createElement(\"a\",{href:b()+\"&type=raw\",target:\"_blank\"},\"View Raw Logs\"))),r.createElement(h.a,{condition:\"function\"==typeof s},r.createElement(\"span\",{onClick:s,className:a.closeButton,\"data-cy\":\"log-viewer-close-btn\"},r.createElement(S.a,{name:\"icon-close\"}))))})),w=n(125),N=function(){return(N=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},j=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},R=[a.ERROR,a.WARN,a.INFO,a.DEBUG,a.TRACE],P=l()((function(e){return{root:{height:\"100%\",display:\"flex\",alignItems:\"center\",lineHeight:\"1.5\"},popoverContainer:{\"& .popper\":{minWidth:\"100px\",width:\"100px\"}},target:{cursor:\"pointer\",display:\"flex\",alignItems:\"center\"},levelRow:{fontSize:\"13px\",display:\"grid\",gridTemplateColumns:\"20px 1fr\",cursor:\"pointer\",textAlign:\"left\",alignItems:\"end\"},selected:{color:e.palette.blue[100]},hovered:{color:e.palette.grey[300]}}}))((function(e){var t=e.classes,n=e.dataFetcher,a=e.changeLogLevel,o=j(r.useState(R.indexOf(n.getLogLevel())),2),l=o[0],i=o[1],c=j(r.useState(null),2),s=c[0],u=c[1];function p(e){var t=R[e];a(t),i(e)}function d(e){return e<=l&&(null===s||e<=s)?t.selected:t.hovered}return r.createElement(\"div\",{className:t.root},r.createElement(x.a,{target:function(e){return r.createElement(\"span\",N({},e,{className:e.className+\" \"+t.target,\"data-cy\":\"log-viewer-log-level-toggle\"}),r.createElement(\"span\",null,\"Level\"),r.createElement(y.a,null))},placement:\"bottom\",className:t.popoverContainer},r.createElement(\"div\",{\"data-cy\":\"log-viewer-log-level-popover\"},R.map((function(e,n){var a=n<=l||n<=s;return r.createElement(\"div\",{className:t.levelRow,key:e,onClick:p.bind(null,n),onMouseEnter:function(){return u(n)},onMouseLeave:function(){return u(null)},\"data-cy\":\"log-level-row-\"+e},r.createElement(\"span\",null,r.createElement(h.a,{condition:a},r.createElement(S.a,{name:\"icon-check\",className:d(n),dataCy:\"log-level-check\"}))),r.createElement(\"span\",null,e))})))))})),_=n(81),I=n.n(_),k=function(){return(k=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},L=l()((function(e){var t=G(e);return{root:k(k({},t.row),{\"&:hover\":{backgroundColor:e.palette.grey[700]}}),cell:t.cell,warn:{color:e.palette.yellow[50]},error:{color:e.palette.red[100]}}}))((function(e){var t,n=e.classes,o=e.logObj,l=new Date(o.log.timestamp),i=I()(l).format(\"L H:mm:ss\"),c=o.log.logLevel;return r.createElement(\"div\",{className:n.root,\"data-cy\":\"log-viewer-row\"},r.createElement(\"div\",{className:n.cell},i),r.createElement(\"div\",{className:g()(n.cell,(t={},t[n.warn]=c===a.WARN,t[n.error]=c===a.ERROR,t))},c),r.createElement(\"div\",{className:n.cell,\"data-cy\":\"log-message\"},o.log.message))})),A=r.memo(L),D=n(134),M=n.n(D),U=n(2),B=n.n(U),F=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),z=function(){return(z=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function G(e){return{row:{display:\"grid\",gridTemplateColumns:\"170px 80px 1fr\",borderBottom:\"1px solid \"+e.palette.grey[300],lineHeight:\"30px\",fontSize:\"14px\"},cell:{paddingLeft:\"10px\",paddingRight:\"10px\"}}}var W=function(e){function t(t){var n=e.call(this,t)||this;return n.scrollPosition=0,n.state={logs:[],isFetching:!0,isPolling:!0,error:null,initLoading:!0},n.processFirstResponse=function(e){n.setState({logs:e,initLoading:!1},(function(){n.state.isPolling&&(n.scrollToBottom(),n.watchScroll(),n.setIntersectionObserver(),n.setState({isFetching:!1}),n.pollTimeout=setTimeout(n.startPoll,5e3))}))},n.processError=function(e){var t=Object(u.o)(e),a=\"string\"==typeof t?t:JSON.stringify(t);n.setState({error:a,isPolling:!1,isFetching:!1})},n.dismissError=function(){n.setState({error:null})},n.setIntersectionObserver=function(){var e={root:n.logsContainer.current,rootMargin:\"10px\",threshold:1};n.io=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&1===e.intersectionRatio&&(e.target===n.bottomIndicator.current?n.fetchNext():e.target===n.topIndicator.current&&n.fetchPrev())}))}),e);var t=n.bottomIndicator.current,a=n.topIndicator.current;n.io.observe(t),n.io.observe(a)},n.watchScrollCallback=function(){var e=n.logsContainer.current.scrollTop;e<n.scrollPosition-10&&n.stopPoll(),n.scrollPosition=e},n.watchScroll=function(){n.logsContainer.current.addEventListener(\"scroll\",n.watchScrollCallback)},n.stopScrollWatch=function(){n.logsContainer.current.removeEventListener(\"scroll\",n.watchScrollCallback)},n.scrollToBottom=function(){var e=n.logsContainer.current;e.scrollTop=e.scrollHeight,n.scrollPosition=e.scrollTop},n.startPoll=function(){if(n.props.stopPoll)return n.stopPoll(),void n.fetchNext();n.state.isPolling||n.setState({isPolling:!0}),n.props.dataFetcher.getNext().subscribe((function(e){if(e.length>0){var t=n.state.logs.concat(e);n.setState({logs:t})}n.setState({isFetching:!1},(function(){n.scrollToBottom(),n.trimTopExcessLogs(),n.pollTimeout=setTimeout(n.startPoll,5e3)}))}),n.processError)},n.stopPoll=function(){n.pollTimeout&&(clearTimeout(n.pollTimeout),n.pollTimeout=null),n.state.isPolling&&n.setState({isPolling:!1,isFetching:!1})},n.fetchPrev=M()((function(){if(!n.state.isFetching&&!n.state.isPolling){n.setState({isFetching:!0});var e=n.logsContainer.current,t=e.scrollHeight;n.props.dataFetcher.getPrev().subscribe((function(a){if(a.length>0){var r=a.concat(n.state.logs);n.setState({logs:r})}n.setState({isFetching:!1},(function(){var a=e.scrollHeight;e.scrollTop=a-t;var r=n.state.logs.slice(0,100);n.setState({logs:r}),n.props.dataFetcher.onLogsTrim(r[0],r[n.state.logs.length-1])}))}),n.processError)}}),100),n.fetchNext=M()((function(){n.state.isFetching||n.state.isPolling||(n.setState({isFetching:!0}),n.props.dataFetcher.getNext().subscribe((function(e){if(e.length>0){var t=n.state.logs.concat(e);n.setState({logs:t})}n.setState({isFetching:!1},n.trimTopExcessLogs)}),n.processError))}),100),n.cleanUpWatchers=function(){n.io&&n.io.disconnect(),n.stopScrollWatch(),n.stopPoll()},n.getLatestLogs=function(){n.cleanUpWatchers(),n.setState({isFetching:!0,isPolling:!0,initLoading:!0},(function(){n.props.dataFetcher.getLast().subscribe(n.processFirstResponse,n.processError)}))},n.changeLogLevel=function(e){n.cleanUpWatchers(),n.setState({isFetching:!0,isPolling:!0,initLoading:!0},(function(){n.props.dataFetcher.setLogLevel(e).subscribe(n.processFirstResponse,n.processError)}))},n.setIncludeSystemLogs=function(e){n.cleanUpWatchers(),n.setState({isFetching:!0,isPolling:!0,initLoading:!0},(function(){n.props.dataFetcher.setIncludeSystemLogs(e).subscribe(n.processFirstResponse,n.processError)}))},n.logsContainer=r.createRef(),n.topIndicator=r.createRef(),n.bottomIndicator=r.createRef(),n}return F(t,e),t.prototype.componentDidMount=function(){this.init()},t.prototype.init=function(){this.props.dataFetcher.init().subscribe(this.processFirstResponse,this.processError)},t.prototype.trimTopExcessLogs=function(){var e=this,t=this.logsContainer.current,n=t.scrollHeight-t.scrollTop;this.state.logs.length>100&&this.setState({logs:this.state.logs.slice(this.state.logs.length-100)},(function(){t.scrollTop=t.scrollHeight-n,e.scrollPosition=t.scrollTop,e.props.dataFetcher.onLogsTrim(e.state.logs[0],e.state.logs[e.state.logs.length-1])}))},t.prototype.renderContent=function(){var e=this.props.classes;return this.state.initLoading?r.createElement(\"div\",{className:e.initLoadingContainer},r.createElement(O.a,null)):0===this.state.logs.length?r.createElement(\"div\",{className:e.noLogsContainer},r.createElement(i.b,{type:i.a.h4,label:B.a.translate(\"features.LogViewer.noLogsMessage\"),className:e.noLogsMessage})):r.createElement(r.Fragment,null,this.state.logs.map((function(e,t){return r.createElement(A,{key:e.offset+\"-\"+t,logObj:e})})))},t.prototype.render=function(){var e=this.props.classes;return r.createElement(\"div\",{className:e.root,\"data-cy\":\"log-viewer\"},r.createElement(C,{dataFetcher:this.props.dataFetcher,isPolling:this.state.isPolling,getLatestLogs:this.getLatestLogs,setSystemLogs:this.setIncludeSystemLogs,onClose:this.props.onClose,loading:this.state.isFetching}),r.createElement(\"div\",{className:e.logsTableHeader},r.createElement(\"div\",{className:e.cell},\"Time\"),r.createElement(\"div\",{className:e.cell},r.createElement(P,{dataFetcher:this.props.dataFetcher,changeLogLevel:this.changeLogLevel})),r.createElement(\"div\",{className:e.cell},\"Message\")),r.createElement(\"div\",{className:e.logsContainer,ref:this.logsContainer,\"data-cy\":\"log-viewer-content\"},r.createElement(\"div\",{ref:this.topIndicator,className:e.indicator}),this.renderContent(),r.createElement(\"div\",{ref:this.bottomIndicator,className:e.indicator,id:\"bottom\"})),r.createElement(w.a,{showAlert:!!this.state.error,message:this.state.error,onClose:this.dismissError,type:\"error\"}))},t}(r.PureComponent),H=l()((function(e){var t=G(e);return{root:{height:\"100%\"},logsTableHeader:t.row,cell:z(z({},t.cell),{fontWeight:\"bold\",lineHeight:\"40px\"}),logsContainer:{height:\"calc(100% - 50px - 40px)\",overflowY:\"auto\",borderBottom:\"1px solid \"+e.palette.grey[200]},indicator:{height:\"1px\",content:\"\"},initLoadingContainer:{textAlign:\"center\",paddingTop:\"25px\"},noLogsContainer:{paddingTop:\"25px\"},noLogsMessage:{textAlign:\"center\"}}}))(W),V=n(27);n.d(t,\"getLogViewerPageUrl\",(function(){return Q}));var K=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};function Q(e,t,n,a,r){return\"/cdap/ns/\"+e+\"/logs/program/\"+t+\"/\"+n+\"/\"+a+\"/\"+r}var Y=l()((function(){return{root:{height:\"100%\"},header:{height:\"60px\",padding:\"5px 15px\"},programInfo:{display:\"flex\"},programInfoItem:{marginRight:\"10px\"},infoLabel:{marginRight:\"5px\"},logViewerContainer:{height:\"calc(100% - 60px)\",overflow:\"hidden\"}}}))((function(e){var t=e.classes,n=e.match,a=(void 0===n?{}:n).params,o=a.appId,l=a.programType,p=a.programId,m=a.runId,f=K(r.useState({}),2),g=f[0],b=f[1],v=K(r.useState(!1),2),E=v[0],y=v[1],x=K(r.useState(),2),S=x[0],O=x[1];return r.useEffect((function(){var e={namespace:Object(s.d)(),appId:o,programType:l,programId:p,runId:m},t=c.a.pollRunStatus(e).subscribe((function(e){b(e),-1===[V.g.RUNNING,V.g.STARTING,V.g.STOPPING,V.g.PENDING].indexOf(e.status)&&(y(!0),t.unsubscribe())}));O(new d({namespace:Object(s.d)(),application:o,programType:l,programName:p,runId:m}))}),[]),r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.header},r.createElement(i.b,{type:i.a.h4,label:\"Logs\"}),r.createElement(\"div\",{className:t.programInfo},r.createElement(\"div\",{className:t.programInfoItem},r.createElement(\"strong\",{className:t.infoLabel},\"App Name:\"),r.createElement(\"span\",null,o)),r.createElement(\"div\",{className:t.programInfoItem},r.createElement(\"strong\",{className:t.infoLabel},\"Program Name:\"),r.createElement(\"span\",null,p)),r.createElement(\"div\",{className:t.programInfoItem},r.createElement(\"strong\",{className:t.infoLabel},\"Status:\"),r.createElement(\"span\",null,g.status)),r.createElement(\"div\",{className:t.programInfoItem},r.createElement(\"strong\",{className:t.infoLabel},\"Start Time:\"),r.createElement(\"span\",null,Object(u.s)(g.starting))),r.createElement(\"div\",{className:t.programInfoItem},r.createElement(\"strong\",{className:t.infoLabel},\"End Time:\"),r.createElement(\"span\",null,Object(u.s)(g.end))))),r.createElement(h.a,{condition:!!S},r.createElement(\"div\",{className:t.logViewerContainer},r.createElement(H,{dataFetcher:S,stopPoll:E}))))}));t.default=Y},1668:function(e,t,n){\"use strict\";var a,r=n(0),o=n(13),l=n.n(o),i=n(278),c=n(283),s=n.n(c),u=n(1748),p=n.n(u),d=n(1747),m=n.n(d),f=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=function(e){function t(t){var n=e.call(this,t)||this;return n.isScrollable=function(){return!(!n.carouselRef||!n.carouselRef.current)&&n.carouselRef.current.scrollWidth>n.carouselRef.current.clientWidth},n.leftDisabled=function(){return!n.isScrollable()||0===n.carouselRef.current.scrollLeft},n.rightDisabled=function(){if(!n.isScrollable())return!0;var e=n.carouselRef.current;return e.scrollLeft+e.clientWidth>=e.scrollWidth},n.setArrowDisabled=function(){var e=n.leftDisabled(),t=n.rightDisabled();n.state.leftDisabled===e&&n.state.rightDisabled===t||n.setState({leftDisabled:e,rightDisabled:t})},n.state={leftDisabled:n.leftDisabled(),rightDisabled:n.rightDisabled()},n.throttledSetArrowDisabled=m()(n.setArrowDisabled,300,{trailing:!0,leading:!0}),n.scrollRight=function(){n.carouselRef.current.scrollLeft+=n.props.scrollAmount},n.scrollLeft=function(){n.carouselRef.current.scrollLeft-=n.props.scrollAmount},n.carouselRef=r.createRef(),n}return f(t,e),t.prototype.componentDidMount=function(){this.carouselRef.current.addEventListener(\"scroll\",this.throttledSetArrowDisabled),window.addEventListener(\"resize\",this.throttledSetArrowDisabled)},t.prototype.componentDidUpdate=function(){this.setArrowDisabled()},t.prototype.componentWillUnmount=function(){this.throttledSetArrowDisabled.cancel(),window.removeEventListener(\"resize\",this.throttledSetArrowDisabled)},t.prototype.render=function(){var e=this.props.classes;return r.createElement(\"div\",{className:e.root},r.createElement(\"div\",{className:e.arrowsContainer},r.createElement(i.a,{size:\"small\",className:e.arrow+\" \"+e.back,onClick:this.scrollLeft,disabled:this.state.leftDisabled},r.createElement(p.a,{className:e.icon})),r.createElement(i.a,{size:\"small\",className:e.arrow+\" \"+e.forward,onClick:this.scrollRight,disabled:this.state.rightDisabled},r.createElement(s.a,{className:e.icon}))),r.createElement(\"div\",{className:e.contentContainer,ref:this.carouselRef},this.props.children))},t}(r.PureComponent),b=l()((function(){return{contentContainer:{paddingLeft:\"60px\",paddingRight:\"60px\",whiteSpace:\"nowrap\",overflowX:\"scroll\",scrollSnapType:\"x proximity\",scrollPadding:\"60px\",display:\"flex\",scrollBehavior:\"smooth\",\"-ms-overflow-style\":\"none\",\"&::-webkit-scrollbar\":{display:\"none\"},\"&:after\":{content:'\"\"',borderLeft:\"30px solid transparent\"},\"& > *\":{scrollSnapAlign:\"end\"}},arrowsContainer:{position:\"relative\",height:0,width:\"100%\"},arrow:{position:\"absolute\",top:\"50px\",transform:\"translateY(-50%)\",\"&:focus\":{outline:0}},back:{left:0},forward:{right:0},icon:{fontSize:\"45px\"}}}))(g);t.a=b},1740:function(e,t,n){var a=n(315),r=n(523),o=Object.prototype.hasOwnProperty,l=r((function(e,t,n){o.call(e,n)?e[n].push(t):a(e,n,[t])}));e.exports=l},1743:function(e,t,n){\"use strict\";var a=n(0),r=n(13),o=n.n(r),l=n(14),i=n(1557),c=n(27);var s=o()((function(e){return{indicator:{marginRight:\"5px\"},blue:{color:e.palette.blue[100]},green:{color:e.palette.green[50]},red:{color:e.palette.red[100]},grey:{color:e.palette.grey[200]}}}))((function(e){var t=e.classes,n=e.status,r=e.className,o=i.a.lookupDisplayStatus(n),s=function(e){switch(e){case c.g.RUNNING:case c.g.STARTING:case c.g.PENDING:return\"blue\";case c.g.SUCCEEDED:case c.g.COMPLETED:case c.g.SCHEDULING:case c.g.STOPPING:return\"green\";case c.g.FAILED:case c.g.REJECTED:return\"red\";default:return\"grey\"}}(n);return a.createElement(l.a,{className:t[s]+\" \"+r,name:i.a.getStatusIndicatorIcon(o)})}));t.a=s},1747:function(e,t,n){var a=n(134),r=n(86);e.exports=function(e,t,n){var o=!0,l=!0;if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");return r(n)&&(o=\"leading\"in n?!!n.leading:o,l=\"trailing\"in n?!!n.trailing:l),a(e,t,{leading:o,maxWait:t,trailing:l})}},1748:function(e,t,n){\"use strict\";var a=n(72),r=n(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var o=r(n(0)),l=(0,a(n(74)).default)(o.createElement(\"path\",{d:\"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\"}),\"KeyboardArrowLeft\");t.default=l},1749:function(e,t,n){\"use strict\";var a=n(72),r=n(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var o=r(n(0)),l=(0,a(n(74)).default)(o.createElement(\"path\",{d:\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"}),\"Check\");t.default=l},1750:function(e,t,n){var a=n(1751)();e.exports=a},1751:function(e,t,n){var a=n(1752),r=n(520),o=n(1753);e.exports=function(e){return function(t,n,l){return l&&\"number\"!=typeof l&&r(t,n,l)&&(n=l=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),l=void 0===l?t<n?1:-1:o(l),a(t,n,l,e)}}},1752:function(e,t){var n=Math.ceil,a=Math.max;e.exports=function(e,t,r,o){for(var l=-1,i=a(n((t-e)/(r||1)),0),c=Array(i);i--;)c[o?i:++l]=e,e+=r;return c}},1753:function(e,t){e.exports=function(e){return e}},1776:function(e,t,n){\"use strict\";var a=n(3),r=n(33),o=n(27),l=n(1750),i=n.n(l),c=n(91),s=n(158),u=n(22),p=n.n(u),d=n(121),m=n.n(d),f=\"system.spark.spark.executor.instances\",g=\"spark.dynamicAllocation.enabled\",b=\"mapreduce\",v=n(24);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,\"a\",(function(){return x}));var x={INITIALIZE_CONFIG:\"INITIALIZE_CONFIG\",SET_RUNTIME_ARGS:\"SET_RUNTIME_ARGS\",SET_RESOLVED_MACROS:\"SET_RESOLVED_MACROS\",RESET_RUNTIME_ARG_TO_RESOLVED_VALUE:\"RESET_RUNTIME_ARG_TO_RESOLVED_VALUE\",SET_ENGINE:\"SET_ENGINE\",SET_BATCH_INTERVAL_RANGE:\"SET_BATCH_INTERVAL_RANGE\",SET_BATCH_INTERVAL_UNIT:\"SET_BATCH_INTERVAL_UNIT\",SET_MEMORY_MB:\"SET_MEMORY_MB\",SET_MEMORY_VIRTUAL_CORES:\"SET_MEMORY_VIRTUAL_CORES\",SET_DRIVER_MEMORY_MB:\"SET_DRIVER_MEMORY_MB\",SET_DRIVER_VIRTUAL_CORES:\"SET_DRIVER_VIRTUAL_CORES\",SET_CLIENT_MEMORY_MB:\"SET_CLIENT_MEMORY_MB\",SET_CLIENT_VIRTUAL_CORES:\"SET_CLIENT_VIRTUAL_CORES\",SET_BACKPRESSURE:\"SET_BACKPRESSURE\",SET_CUSTOM_CONFIG:\"SET_CUSTOM_CONFIG\",SET_CUSTOM_CONFIG_KEY_VALUE_PAIRS:\"SET_CUSTOM_CONFIG_KEY_VALUE_PAIRS\",SET_NUM_EXECUTORS:\"SET_NUM_EXECUTORS\",SET_INSTRUMENTATION:\"SET_INSTRUMENTATION\",SET_STAGE_LOGGING:\"SET_STAGE_LOGGING\",SET_CHECKPOINTING:\"SET_CHECKPOINTING\",SET_CHECKPOINT_DIR:\"SET_CHECKPOINT_DIR\",SET_NUM_RECORDS_PREVIEW:\"SET_NUM_RECORDS_PREVIEW\",SET_MODELESS_OPEN_STATUS:\"SET_MODELESS_OPEN_STATUS\",SET_PIPELINE_VISUAL_CONFIGURATION:\"SET_PIPELINE_VISUAL_CONFIGURATION\",SET_SERVICE_ACCOUNT_PATH:\"SET_SERVICE_ACCOUNT_PATH\",SET_PUSHDOWN_CONFIG:\"SET_PUSHDOWN_CONFIG\",RESET:\"RESET\",SET_DYNAMIC_EXECUTION:\"SET_DYNAMIC_EXECUTION\"},S=(i()(1,61),i()(1,11),{pairs:[Object(s.b)()]}),O={runtimeArgs:m()(S),resolvedMacros:{},customConfigKeyValuePairs:m()(S),postRunActions:[],properties:{},engine:o.c.engine,resources:E({},o.c.resources),driverResources:E({},o.c.resources),clientResources:E({},o.c.resources),processTimingEnabled:o.c.processTimingEnabled,stageLoggingEnabled:o.c.stageLoggingEnabled,disableCheckpoints:o.c.disableCheckpoints,checkpointDir:window.CDAP_CONFIG.hydrator.defaultCheckpointDir,stopGracefully:o.c.stopGracefully,backpressure:o.c.backpressure,numExecutors:o.c.numExecutors,numOfRecordsPreview:o.c.numOfRecordsPreview,previewTimeoutInMin:o.c.previewTimeoutInMin,batchInterval:o.c.batchInterval,postActions:[],schedule:o.c.schedule,maxConcurrentRuns:1,isMissingKeyValues:!1,modelessOpen:!1,pipelineVisualConfiguration:{pipelineType:o.b.etlDataPipeline,isHistoricalRun:!1,isPreview:!1,isDetailView:!1}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=[];o.b.etlRealtime===t?n=[\"system.spark.spark.streaming.backpressure.enabled\",f]:v.a.allowForceDynamicExecution&&Object.prototype.hasOwnProperty.call(e,g)&&(\"true\"===e[g]?n=[g,\"spark.dynamicAllocation.shuffleTracking.enabled\"]:\"false\"===e[g]&&(n=[g,f]));var a={};return Object.keys(e).forEach((function(t){-1===n.indexOf(t)&&(a[t]=e[t])})),a},C=function(e,t,n){var a=T(e,n),r={};for(var o in a)if(Object.prototype.hasOwnProperty.call(a,o)){var l=o;\"mapreduce\"===t&&o.startsWith(\"system.mapreduce.\")?l=l.slice(\"system.mapreduce.\".length):o.startsWith(\"system.spark.\")&&(l=l.slice(\"system.spark.\".length)),r[l]=a[o]}return Object(c.b)(r)},w=function(e,t){return e.pairs.forEach((function(e){if(e.notDeletable)if(e.provided)e.showReset=!1;else{var n=e.key;Object.prototype.hasOwnProperty.call(t,n)&&(t[n]!==e.value?e.showReset=!0:e.showReset=!1)}})),j(e,t)},N=function(e,t,n){var a=t.pairs[e].key;return t.pairs[e].value=n[a],t},j=function(e,t){var n={},a={};e.pairs&&(e.pairs.forEach((function(e){var t=e.key;a[t]=e.value||\"\",e.notDeletable&&e.provided&&(n[t]=e.value)})),e.pairs=e.pairs.filter((function(e){return-1===Object.keys(t).indexOf(e.key)})));var r=Object.keys(t).map((function(e){return{key:e,value:a[e]||\"\",showReset:t[e].showReset,uniqueId:\"id-\"+p()(),notDeletable:!0,provided:Object.prototype.hasOwnProperty.call(n,e)}}));return e.pairs=r.concat(e.pairs),e},R=function(e,t){return Object(c.d)(e)||Object(c.d)(t)},P=Object(r.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.m;switch(t.type){case x.INITIALIZE_CONFIG:return E({},e,{},t.payload,{customConfigKeyValuePairs:C(t.payload.properties,t.payload.engine,e.pipelineVisualConfiguration.pipelineType)});case x.SET_RUNTIME_ARGS:return E({},e,{runtimeArgs:w(t.payload.runtimeArgs,e.resolvedMacros),isMissingKeyValues:R(t.payload.runtimeArgs,e.customConfigKeyValuePairs)});case x.SET_RESOLVED_MACROS:var n=t.payload.resolvedMacros,r=j(m()(e.runtimeArgs),n),l=R(r,e.customConfigKeyValuePairs);return E({},e,{resolvedMacros:n,runtimeArgs:r,isMissingKeyValues:l});case x.RESET_RUNTIME_ARG_TO_RESOLVED_VALUE:return E({},e,{runtimeArgs:N(t.payload.index,E({},e.runtimeArgs),e.resolvedMacros)});case x.SET_ENGINE:return E({},e,{engine:t.payload.engine});case x.SET_BATCH_INTERVAL_RANGE:return E({},e,{batchInterval:t.payload.batchIntervalRange+e.batchInterval.slice(-1)});case x.SET_BATCH_INTERVAL_UNIT:return E({},e,{batchInterval:e.batchInterval.slice(0,-1)+t.payload.batchIntervalUnit});case x.SET_MEMORY_MB:return E({},e,{resources:E({},e.resources,{memoryMB:t.payload.memoryMB})});case x.SET_MEMORY_VIRTUAL_CORES:return E({},e,{resources:E({},e.resources,{virtualCores:t.payload.virtualCores})});case x.SET_DRIVER_MEMORY_MB:return E({},e,{driverResources:E({},e.driverResources,{memoryMB:t.payload.memoryMB})});case x.SET_DRIVER_VIRTUAL_CORES:return E({},e,{driverResources:E({},e.driverResources,{virtualCores:t.payload.virtualCores})});case x.SET_CLIENT_MEMORY_MB:return E({},e,{clientResources:E({},e.clientResources,{memoryMB:t.payload.memoryMB})});case x.SET_CLIENT_VIRTUAL_CORES:return E({},e,{clientResources:E({},e.clientResources,{virtualCores:t.payload.virtualCores})});case x.SET_BACKPRESSURE:return E({},e,{properties:E({},e.properties,{\"system.spark.spark.streaming.backpressure.enabled\":t.payload.backpressure})});case x.SET_CUSTOM_CONFIG_KEY_VALUE_PAIRS:return E({},e,{customConfigKeyValuePairs:t.payload.keyValues,isMissingKeyValues:R(e.runtimeArgs,t.payload.keyValues)});case x.SET_CUSTOM_CONFIG:var i=E({},e.properties),c=T(i);Object.keys(c).forEach((function(e){Object.prototype.hasOwnProperty.call(i,e)&&delete i[e]}));var s={};return Object.keys(t.payload.customConfig).forEach((function(n){var a=t.payload.customConfig[n];n=o.b.etlBatchPipelines.includes(t.payload.pipelineType)&&e.engine===b?\"system.mapreduce.\"+n:\"system.spark.\"+n,s[n]=a})),E({},e,{properties:E({},i,{},s)});case x.SET_NUM_EXECUTORS:var u=t.payload.numExecutors;return E({},e,{properties:E({},e.properties,y({},f,u))});case x.SET_INSTRUMENTATION:return E({},e,{processTimingEnabled:t.payload.instrumentation});case x.SET_STAGE_LOGGING:return E({},e,{stageLoggingEnabled:t.payload.stageLogging});case x.SET_CHECKPOINTING:return E({},e,{disableCheckpoints:t.payload.disableCheckpoints});case x.SET_CHECKPOINT_DIR:return E({},e,{checkpointDir:t.payload.checkpointDir});case x.SET_NUM_RECORDS_PREVIEW:return E({},e,{numOfRecordsPreview:t.payload.numRecordsPreview});case x.SET_MODELESS_OPEN_STATUS:return E({},e,{modelessOpen:t.payload.open});case x.SET_SERVICE_ACCOUNT_PATH:return E({},e,{serviceAccountPath:t.payload.serviceAccountPath});case x.SET_PUSHDOWN_CONFIG:return E({},e,{transformationPushdown:t.payload.transformationPushdown,pushdownEnabled:t.payload.pushdownEnabled});case x.RESET:return m()(O);case x.SET_PIPELINE_VISUAL_CONFIGURATION:return E({},e,{pipelineVisualConfiguration:E({},e.pipelineVisualConfiguration,{},t.payload.pipelineVisualConfiguration)});case x.SET_DYNAMIC_EXECUTION:return t.payload.value===o.b.dynamicExecutionForceOn?E({},e,{properties:E({},e.properties,{SPARK_DYNAMIC_ALLOCATION:!0,SPARK_DYNAMIC_ALLOCATION_SHUFFLE_TRACKING:!0,SPARK_EXECUTOR_INSTANCES:void 0})}):t.payload.value===o.b.dynamicExecutionForceOff?E({},e,{properties:E({},e.properties,{SPARK_DYNAMIC_ALLOCATION:!1,SPARK_DYNAMIC_ALLOCATION_SHUFFLE_TRACKING:void 0})}):E({},e,{dynamicExecution:void 0,properties:E({},e.properties,{SPARK_DYNAMIC_ALLOCATION:void 0,SPARK_DYNAMIC_ALLOCATION_SHUFFLE_TRACKING:void 0,SPARK_EXECUTOR_INSTANCES:void 0})});default:return e}}),m()(O),Object(a.h)(\"PipelineConfigurationsStore\")());t.b=P},1781:function(e,t,n){var a=n(182),r=n(737),o=n(1994),l=n(415);e.exports=function(e,t){return a(e)?e:r(e,t)?[e]:o(l(e))}},1972:function(e,t,n){\"use strict\";var a=n(11),r=n(5),o=n(0),l=(n(1),n(10)),i=n(20),c=[0,1,2,3,4,5,6,7,8,9,10],s=[\"auto\",!0,1,2,3,4,5,6,7,8,9,10,11,12];function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return\"\".concat(n/t).concat(String(e).replace(String(n),\"\")||\"px\")}var p=o.forwardRef((function(e,t){var n=e.alignContent,i=void 0===n?\"stretch\":n,c=e.alignItems,s=void 0===c?\"stretch\":c,u=e.classes,p=e.className,d=e.component,m=void 0===d?\"div\":d,f=e.container,g=void 0!==f&&f,b=e.direction,v=void 0===b?\"row\":b,h=e.item,E=void 0!==h&&h,y=e.justify,x=e.justifyContent,S=void 0===x?\"flex-start\":x,O=e.lg,T=void 0!==O&&O,C=e.md,w=void 0!==C&&C,N=e.sm,j=void 0!==N&&N,R=e.spacing,P=void 0===R?0:R,_=e.wrap,I=void 0===_?\"wrap\":_,k=e.xl,L=void 0!==k&&k,A=e.xs,D=void 0!==A&&A,M=e.zeroMinWidth,U=void 0!==M&&M,B=Object(a.a)(e,[\"alignContent\",\"alignItems\",\"classes\",\"className\",\"component\",\"container\",\"direction\",\"item\",\"justify\",\"justifyContent\",\"lg\",\"md\",\"sm\",\"spacing\",\"wrap\",\"xl\",\"xs\",\"zeroMinWidth\"]),F=Object(l.a)(u.root,p,g&&[u.container,0!==P&&u[\"spacing-xs-\".concat(String(P))]],E&&u.item,U&&u.zeroMinWidth,\"row\"!==v&&u[\"direction-xs-\".concat(String(v))],\"wrap\"!==I&&u[\"wrap-xs-\".concat(String(I))],\"stretch\"!==s&&u[\"align-items-xs-\".concat(String(s))],\"stretch\"!==i&&u[\"align-content-xs-\".concat(String(i))],\"flex-start\"!==(y||S)&&u[\"justify-content-xs-\".concat(String(y||S))],!1!==D&&u[\"grid-xs-\".concat(String(D))],!1!==j&&u[\"grid-sm-\".concat(String(j))],!1!==w&&u[\"grid-md-\".concat(String(w))],!1!==T&&u[\"grid-lg-\".concat(String(T))],!1!==L&&u[\"grid-xl-\".concat(String(L))]);return o.createElement(m,Object(r.a)({className:F,ref:t},B))})),d=Object(i.a)((function(e){return Object(r.a)({root:{},container:{boxSizing:\"border-box\",display:\"flex\",flexWrap:\"wrap\",width:\"100%\"},item:{boxSizing:\"border-box\",margin:\"0\"},zeroMinWidth:{minWidth:0},\"direction-xs-column\":{flexDirection:\"column\"},\"direction-xs-column-reverse\":{flexDirection:\"column-reverse\"},\"direction-xs-row-reverse\":{flexDirection:\"row-reverse\"},\"wrap-xs-nowrap\":{flexWrap:\"nowrap\"},\"wrap-xs-wrap-reverse\":{flexWrap:\"wrap-reverse\"},\"align-items-xs-center\":{alignItems:\"center\"},\"align-items-xs-flex-start\":{alignItems:\"flex-start\"},\"align-items-xs-flex-end\":{alignItems:\"flex-end\"},\"align-items-xs-baseline\":{alignItems:\"baseline\"},\"align-content-xs-center\":{alignContent:\"center\"},\"align-content-xs-flex-start\":{alignContent:\"flex-start\"},\"align-content-xs-flex-end\":{alignContent:\"flex-end\"},\"align-content-xs-space-between\":{alignContent:\"space-between\"},\"align-content-xs-space-around\":{alignContent:\"space-around\"},\"justify-content-xs-center\":{justifyContent:\"center\"},\"justify-content-xs-flex-end\":{justifyContent:\"flex-end\"},\"justify-content-xs-space-between\":{justifyContent:\"space-between\"},\"justify-content-xs-space-around\":{justifyContent:\"space-around\"},\"justify-content-xs-space-evenly\":{justifyContent:\"space-evenly\"}},function(e,t){var n={};return c.forEach((function(a){var r=e.spacing(a);0!==r&&(n[\"spacing-\".concat(t,\"-\").concat(a)]={margin:\"-\".concat(u(r,2)),width:\"calc(100% + \".concat(u(r),\")\"),\"& > $item\":{padding:u(r,2)}})})),n}(e,\"xs\"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var a={};s.forEach((function(e){var t=\"grid-\".concat(n,\"-\").concat(e);if(!0!==e)if(\"auto\"!==e){var r=\"\".concat(Math.round(e/12*1e8)/1e6,\"%\");a[t]={flexBasis:r,flexGrow:0,maxWidth:r}}else a[t]={flexBasis:\"auto\",flexGrow:0,maxWidth:\"none\"};else a[t]={flexBasis:0,flexGrow:1,maxWidth:\"100%\"}})),\"xs\"===n?Object(r.a)(e,a):e[t.breakpoints.up(n)]=a}(t,e,n),t}),{}))}),{name:\"MuiGrid\"})(p);t.a=d},1973:function(e,t,n){e.exports=n(70)(1466)},1974:function(e,t,n){\"use strict\";var a=n(72),r=n(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var o=r(n(0)),l=(0,a(n(74)).default)(o.createElement(\"path\",{d:\"M10 17l5-5-5-5v10z\"}),\"ArrowRight\");t.default=l},1975:function(e,t,n){\"use strict\";var a=n(72),r=n(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var o=r(n(0)),l=(0,a(n(74)).default)(o.createElement(\"path\",{d:\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"}),\"Clear\");t.default=l},1976:function(e,t,n){\"use strict\";var a=n(72),r=n(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var o=r(n(0)),l=(0,a(n(74)).default)(o.createElement(\"path\",{d:\"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z\"}),\"Cached\");t.default=l},1977:function(e,t,n){\"use strict\";var a=n(72),r=n(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var o=r(n(0)),l=(0,a(n(74)).default)(o.createElement(\"path\",{d:\"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"}),\"Refresh\");t.default=l},1978:function(e,t,n){var a=n(19),r=n(1979);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var o={insert:\"head\",singleton:!1},l=(a(e.i,r,o),r.locals?r.locals:{});e.exports=l},1979:function(e,t,n){(t=n(18)(!1)).push([e.i,\".accordion-pane{border-top:1px solid #999}.accordion-pane.active{border-bottom:2px solid #999;border-top:3px solid #999;background:#f5f5f5}.accordion-pane.active:last-of-type{border-bottom:3px solid #999}\",\"\"]),t.locals={white01:\"#fff\",green01:\"#01b133\",green02:\"#3cc801\",green03:\"#8af302\",green04:\"#0f9d58\",green05:\"#0b8043\",green06:\"#4ab63c\",blue01:\"#045599\",blue02:\"#0076dc\",blue03:\"#09f\",blue04:\"#58b7f6\",blue05:\"#7cd2eb\",blue06:\"#cae7ef\",blue07:\"#3c4355\",bluegrey01:\"#454a57\",bluegrey02:\"#4e5568\",bluegrey03:\"#5d6789\",bluegrey04:\"#979fbb\",bluegrey05:\"#bac1d8\",bluegrey06:\"#dce0ea\",orange01:\"#f60\",orange02:\"#fa8a00\",orange03:\"#ffa727\",orange04:\"#ffcc80\",orange05:\"#ffe0b2\",grey01:\"#333\",grey02:\"#666\",grey03:\"#999\",grey04:\"#bbb\",grey05:\"#ccc\",grey06:\"#dbdbdb\",grey07:\"#eee\",grey071:\"#e0e0e0\",grey08:\"#f5f5f5\",grey09:\"#e8e8e8\",grey10:\"#ebebeb\",grey11:\"#dfe2e9\",red01:\"#a40403\",red02:\"#d40001\",red03:\"#d15668\",yellow01:\"#ffba01\",yellow02:\"#ffd500\",yellow02lighter:\"rgba(255,213,0,.3)\",primary:\"#1a73e8\"},e.exports=t},1980:function(e,t,n){var a=n(19),r=n(1981);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var o={insert:\"head\",singleton:!1},l=(a(e.i,r,o),r.locals?r.locals:{});e.exports=l},1981:function(e,t,n){(t=n(18)(!1)).push([e.i,\".accordion-title{display:flex;align-items:center;padding:10px 0}.accordion-title.small{padding:5px 0}.accordion-title.large{padding:15px 0}\",\"\"]),e.exports=t},1982:function(e,t,n){var a=n(19),r=n(1983);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var o={insert:\"head\",singleton:!1},l=(a(e.i,r,o),r.locals?r.locals:{});e.exports=l},1983:function(e,t,n){(t=n(18)(!1)).push([e.i,\".accordion-content{padding:10px 0}.accordion-content.small{padding:5px 0}.accordion-content.large{padding:15px 0}\",\"\"]),e.exports=t},1984:function(e,t,n){var a=n(19),r=n(1985);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var o={insert:\"head\",singleton:!1},l=(a(e.i,r,o),r.locals?r.locals:{});e.exports=l},1985:function(e,t,n){(t=n(18)(!1)).push([e.i,\".profile-customize-content{height:100%;min-height:300px;max-height:360px;width:350px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer}.profile-customize-content .profile-customize-metadata{margin-bottom:10px;display:flex}.profile-customize-content .profile-customize-metadata .profile-customize-name{width:calc(100% - 20px)}.profile-customize-content .profile-customize-metadata .profile-customize-name strong{text-overflow:ellipsis;display:block;width:100%;overflow:hidden;white-space:nowrap}.profile-customize-content .profile-group-content{padding:0 5px}.profile-customize-content .profile-group-content>div{margin-bottom:20px}.profile-customize-content .profile-group-content>div .form-control{background-color:transparent}.profile-customize-content .profile-group-content>div .widget-wrapper-label{background-color:#f5f5f5}.profile-customize-content .profile-customize-footer{margin-bottom:20px}.profile-customize-content .btn.btn-primary{margin-top:10px;width:100px}\",\"\"]),t.locals={white01:\"#fff\",green01:\"#01b133\",green02:\"#3cc801\",green03:\"#8af302\",green04:\"#0f9d58\",green05:\"#0b8043\",green06:\"#4ab63c\",blue01:\"#045599\",blue02:\"#0076dc\",blue03:\"#09f\",blue04:\"#58b7f6\",blue05:\"#7cd2eb\",blue06:\"#cae7ef\",blue07:\"#3c4355\",bluegrey01:\"#454a57\",bluegrey02:\"#4e5568\",bluegrey03:\"#5d6789\",bluegrey04:\"#979fbb\",bluegrey05:\"#bac1d8\",bluegrey06:\"#dce0ea\",orange01:\"#f60\",orange02:\"#fa8a00\",orange03:\"#ffa727\",orange04:\"#ffcc80\",orange05:\"#ffe0b2\",grey01:\"#333\",grey02:\"#666\",grey03:\"#999\",grey04:\"#bbb\",grey05:\"#ccc\",grey06:\"#dbdbdb\",grey07:\"#eee\",grey071:\"#e0e0e0\",grey08:\"#f5f5f5\",grey09:\"#e8e8e8\",grey10:\"#ebebeb\",grey11:\"#dfe2e9\",red01:\"#a40403\",red02:\"#d40001\",red03:\"#d15668\",yellow01:\"#ffba01\",yellow02:\"#ffd500\",yellow02lighter:\"rgba(255,213,0,.3)\",primary:\"#1a73e8\"},e.exports=t},1986:function(e,t,n){var a=n(19),r=n(1987);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var o={insert:\"head\",singleton:!1},l=(a(e.i,r,o),r.locals?r.locals:{});e.exports=l},1987:function(e,t,n){(t=n(18)(!1)).push([e.i,\"#profile-customize-popover{text-overflow:inherit}.profile-customize-popover .popper{min-width:350px;min-height:300px;max-height:360px;z-index:1;padding:20px;text-align:left;overflow-y:auto;overflow-x:hidden}.profile-customize-popover .popper[data-x-out-of-boundaries]{visibility:hidden}\",\"\"]),e.exports=t},1988:function(e,t,n){var a=n(522),r=n(316),o=n(223),l=n(249),i=n(317),c=n(732),s=l((function(e,t){var n=c(t);return i(n)&&(n=void 0),i(e)?a(e,r(t,1,i,!0),o(n,2)):[]}));e.exports=s},1989:function(e,t,n){var a=n(19),r=n(1990);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var o={insert:\"head\",singleton:!1},l=(a(e.i,r,o),r.locals?r.locals:{});e.exports=l},1990:function(e,t,n){(t=n(18)(!1)).push([e.i,\".compute-tab-content{height:100%}.profiles-list-view-on-pipeline{height:calc(100% - 40px)}.profiles-list-view-on-pipeline.empty-container{display:flex;align-items:center;justify-content:center}.profiles-list-view-on-pipeline>div{height:100%}.profiles-list-view-on-pipeline .grid-wrapper{height:100%;overflow:auto}.profiles-list-view-on-pipeline .grid.grid-container{height:100%;grid-auto-rows:40px;max-height:calc(100% - 50px)}.profiles-list-view-on-pipeline .grid.grid-container .grid-row{grid-template-columns:30px 1.3fr 1fr 1.3fr .8fr 70px 1fr 50px;align-items:center;white-space:nowrap}.profiles-list-view-on-pipeline .grid.grid-container .grid-row.enabled .profile-status{color:#3cc801}.profiles-list-view-on-pipeline .grid.grid-container .grid-row.disabled{cursor:not-allowed}.profiles-list-view-on-pipeline .grid.grid-container .grid-row.disabled>div:not(:last-child){opacity:.5}.profiles-list-view-on-pipeline .grid.grid-container .grid-header{z-index:1}.profiles-list-view-on-pipeline .grid.grid-container .grid-header .grid-row{background:#eee}.profiles-list-view-on-pipeline .grid.grid-container .grid-body .grid-row{padding:3px 0}.profiles-list-view-on-pipeline .grid.grid-container .grid-body .grid-row.active{background:rgba(255,213,0,.3)}.profiles-list-view-on-pipeline .grid.grid-container .grid-body .grid-row a:hover{text-decoration:underline}.profiles-list-view-on-pipeline .grid.grid-container .grid-body .grid-row .icon-star{color:var(--brand-primary-color);margin-right:5px}.profiles-list-view-on-pipeline .grid.grid-container .grid-body .grid-row .profile-label{white-space:nowrap}.profiles-list-view-on-pipeline .grid.grid-container.disabled .grid-body .grid-row:hover,.profiles-list-view-on-pipeline .grid.grid-container.disabled .grid-body .grid-row.active{background:#eee}.profiles-list-view-on-pipeline .profiles-count{color:#bbb;margin:5px 0}\",\"\"]),t.locals={white01:\"#fff\",green01:\"#01b133\",green02:\"#3cc801\",green03:\"#8af302\",green04:\"#0f9d58\",green05:\"#0b8043\",green06:\"#4ab63c\",blue01:\"#045599\",blue02:\"#0076dc\",blue03:\"#09f\",blue04:\"#58b7f6\",blue05:\"#7cd2eb\",blue06:\"#cae7ef\",blue07:\"#3c4355\",bluegrey01:\"#454a57\",bluegrey02:\"#4e5568\",bluegrey03:\"#5d6789\",bluegrey04:\"#979fbb\",bluegrey05:\"#bac1d8\",bluegrey06:\"#dce0ea\",orange01:\"#f60\",orange02:\"#fa8a00\",orange03:\"#ffa727\",orange04:\"#ffcc80\",orange05:\"#ffe0b2\",grey01:\"#333\",grey02:\"#666\",grey03:\"#999\",grey04:\"#bbb\",grey05:\"#ccc\",grey06:\"#dbdbdb\",grey07:\"#eee\",grey071:\"#e0e0e0\",grey08:\"#f5f5f5\",grey09:\"#e8e8e8\",grey10:\"#ebebeb\",grey11:\"#dfe2e9\",red01:\"#a40403\",red02:\"#d40001\",red03:\"#d15668\",yellow01:\"#ffba01\",yellow02:\"#ffd500\",yellow02lighter:\"rgba(255,213,0,.3)\",primary:\"#1a73e8\"},e.exports=t},1991:function(e,t,n){var a=n(319),r=n(223),o=n(1992),l=n(740);e.exports=function(e,t){if(null==e)return{};var n=a(l(e),(function(e){return[e]}));return t=r(t),o(e,n,(function(e,n){return t(e,n[0])}))}},1992:function(e,t,n){var a=n(736),r=n(1993),o=n(1781);e.exports=function(e,t,n){for(var l=-1,i=t.length,c={};++l<i;){var s=t[l],u=a(e,s);n(u,s)&&r(c,o(s,e),u)}return c}},1993:function(e,t,n){var a=n(528),r=n(1781),o=n(1996),l=n(86),i=n(738);e.exports=function(e,t,n,c){if(!l(e))return e;for(var s=-1,u=(t=r(t,e)).length,p=u-1,d=e;null!=d&&++s<u;){var m=i(t[s]),f=n;if(s!=p){var g=d[m];void 0===(f=c?c(g,m,d):void 0)&&(f=l(g)?g:o(t[s+1])?[]:{})}a(d,m,f),d=d[m]}return e}},1994:function(e,t,n){var a=n(1995),r=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,o=/\\\\(\\\\)?/g,l=a((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(\"\"),e.replace(r,(function(e,n,a,r){t.push(a?r.replace(o,\"$1\"):n||e)})),t}));e.exports=l},1995:function(e,t){e.exports=function(e){return e}},1996:function(e,t){var n=/^(?:0|[1-9]\\d*)$/;e.exports=function(e,t){var a=typeof e;return!!(t=null==t?9007199254740991:t)&&(\"number\"==a||\"symbol\"!=a&&n.test(e))&&e>-1&&e%1==0&&e<t}},1997:function(e,t,n){var a=n(315),r=n(721),o=n(223);e.exports=function(e,t){var n={};return t=o(t,3),r(e,(function(e,r,o){a(n,t(e,r,o),e)})),n}},2380:function(e,t,n){\"use strict\";n.r(t);var a,r=n(0),o=n.n(r),l=n(25),i=n(154),c=n.n(i),s=n(13),u=n.n(s),p=n(1558),d=n(8),m=n(3),f=n(1557),g=n(1743),b=u()((function(){return{indicator:{marginRight:\"5px\"},statusText:{verticalAlign:\"middle\"}}}))((function(e){var t=e.classes,n=e.status;if(!n)return r.createElement(\"span\",{className:t.root},\"--\");var a=f.a.lookupDisplayStatus(n);return r.createElement(\"span\",{className:t.root},r.createElement(g.a,{status:n,className:t.indicator}),r.createElement(\"span\",{className:t.statusText},a))})),v=n(505),h=n(162),E=n(12),y=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};!function(e){e.app=\"app\",e.draft=\"draft\"}(a||(a={}));var x=u()((function(){return{replicatorName:{marginLeft:\"5px\"}}}))((function(e){var t=e.classes,n=e.replicatorId,o=e.onDelete,l=e.show,i=e.closeModal,c=e.type,s=void 0===c?a.draft:c,u=y(r.useState(),2),m=u[0],f=u[1];if(!l)return null;var g=r.createElement(\"div\",null,\"Are you sure you want to delete\",r.createElement(E.a,{condition:s===a.app},r.createElement(\"strong\",{className:t.replicatorName},r.createElement(\"em\",null,n))),\"?\");return r.createElement(h.a,{headerTitle:s===a.app?\"Delete replication job\":\"Delete replication job draft\",toggleModal:i,confirmationElem:g,confirmButtonText:\"Delete\",confirmFn:function(){var e={namespace:Object(d.d)(),appName:n},t=p.a.delete(e);if(s===a.draft){var r={namespace:Object(d.d)(),draftId:n};t=p.a.deleteDraft(r)}t.subscribe((function(){i(),o()}),(function(e){f(e)}))},cancelFn:function(){f(null),i()},isOpen:l,errorMessage:m?\"Failed to delete replication job\":\"\",extendedMessage:m})})),S=n(506),O=n(1548),T=function(){return(T=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},C=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},w=u()((function(e){return{root:{height:\"100%\"},headerText:{marginBottom:\"10px\"},row:{color:e.palette.grey[50],\"&:hover\":{color:\"inherit\"}},gridWrapper:{height:\"calc(100% - 20px)\",\"& .grid.grid-container.grid-compact\":{maxHeight:\"100%\",\"& .grid-row\":{gridTemplateColumns:\"2fr 1fr 1fr 80px\"}}},delete:{color:e.palette.red[100]}}}))((function(e){var t=e.classes,n=C(r.useState([]),2),o=n[0],i=n[1],c=C(r.useState({}),2),s=c[0],u=c[1],f=C(r.useState({}),2),g=f[0],h=f[1],E=C(r.useState(null),2),y=E[0],w=E[1],N=C(r.useState(),2),j=N[0],R=N[1];function P(){var e={namespace:Object(d.d)()};p.a.list(e).subscribe((function(t){i(t);var n=t.map((function(e){return{appId:e.name,programType:\"worker\",programId:\"DeltaWorker\"}}));p.a.batchStatus(e,n).subscribe((function(e){var t={};e.forEach((function(e){t[e.appId]=e.status})),u(t)}));var a=t.map((function(e){return{appId:e.name}}));p.a.batchAppDetail(e,a).subscribe((function(e){var t={};e.forEach((function(e){if(e.detail){var n,a=e.detail;try{n=JSON.parse(a.configuration)}catch(e){return void console.log(\"Failed to parse replication job configuration\",e)}var r=Object(m.E)(n,\"connections\",0),o={from:r.from,to:r.to};t[a.name]={name:a.name,artifact:a.artifact,config:n,pluginDisplay:o}}})),h(t)}))}))}function _(e){var t=Object(m.E)(g,e);return{name:t.name,artifact:t.artifact,config:t.config}}return r.useEffect(P,[]),j?r.createElement(l.Redirect,{to:j}):r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.headerText},o.length,\" deployed\"),r.createElement(\"div\",{className:\"grid-wrapper \"+t.gridWrapper},r.createElement(\"div\",{className:\"grid grid-container grid-compact\"},r.createElement(\"div\",{className:\"grid-header\"},r.createElement(\"div\",{className:\"grid-row\"},r.createElement(\"div\",null,\"Name\"),r.createElement(\"div\",null,\"From / To\"),r.createElement(\"div\",null,\"Status\"),r.createElement(\"div\",null))),r.createElement(\"div\",{className:\"grid-body\"},o.map((function(e){var n=Object(m.E)(g,e.name,\"pluginDisplay\",\"from\")||\"--\",a=Object(m.E)(g,e.name,\"pluginDisplay\",\"to\")||\"--\",o=[{label:\"Export\",actionFn:function(){return t=e.name,n=_(t),void Object(S.a)(n);var t,n}},{label:\"Duplicate\",actionFn:function(){return function(e){var t=_(e),n=T(T({},t),{name:\"\"}),a=t.name;window.localStorage.setItem(a,JSON.stringify(n));var r=\"/ns/\"+Object(d.d)()+\"/replication/create?cloneId=\"+a;R(r)}(e.name)}},{label:\"separator\"},{label:\"Delete\",actionFn:function(){return w(e.name)},className:t.delete}];return r.createElement(l.Link,{to:Object(O.c)(e.name),className:\"grid-row \"+t.row,key:e.name},r.createElement(\"div\",null,e.name),r.createElement(\"div\",null,n,\" / \",a),r.createElement(\"div\",null,r.createElement(b,{status:s[e.name]})),r.createElement(\"div\",null,r.createElement(v.a,{actions:o})))}))))),r.createElement(x,{replicatorId:y,show:y&&y.length>0,onDelete:P,closeModal:function(){return w(null)},type:a.app}))})),N=n(1561),j=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},R=u()((function(e){return{root:{height:\"100%\"},row:{color:e.palette.grey[50],\"&:hover\":{color:\"inherit\"}},headerText:{marginBottom:\"10px\"},gridWrapper:{height:\"calc(100% - 20px)\",\"& .grid.grid-container.grid-compact\":{maxHeight:\"100%\",\"& .grid-row\":{gridTemplateColumns:\"1fr 1fr 1fr 1fr 80px\"}}},delete:{color:e.palette.red[100]}}}))((function(e){var t=e.classes,n=j(r.useState([]),2),o=n[0],i=n[1],c=j(r.useState(null),2),s=c[0],u=c[1],f=j(r.useState(),2),g=f[0],b=f[1];function h(){var e={namespace:Object(d.d)()};p.a.getDeltaApp().subscribe((function(t){b(t.artifact),p.a.listDrafts(e).subscribe((function(e){i(e)}))}))}return r.useEffect(h,[]),r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.headerText},o.length,\" \",1===o.length?\"draft\":\"drafts\",\" - Select a row to edit draft\"),r.createElement(\"div\",{className:\"grid-wrapper \"+t.gridWrapper},r.createElement(\"div\",{className:\"grid grid-container grid-compact\"},r.createElement(\"div\",{className:\"grid-header\"},r.createElement(\"div\",{className:\"grid-row\"},r.createElement(\"div\",null,\"Draft name\"),r.createElement(\"div\",null,\"From / To\"),r.createElement(\"div\",null,\"Created\"),r.createElement(\"div\",null,\"Updated\"),r.createElement(\"div\",null))),r.createElement(\"div\",{className:\"grid-body\"},o.map((function(e){var n={};(Object(m.E)(e,\"config\",\"stages\")||[]).forEach((function(e){n[e.plugin.type]=e.name}));var a=n[N.b.source]||\"--\",o=n[N.b.target]||\"--\",i=[{label:\"Export\",actionFn:function(){return n={name:(t=e).label,artifact:g,config:t.config},void Object(S.a)(n);var t,n}},{label:\"separator\"},{label:\"Delete\",actionFn:function(){return u(e.name)},className:t.delete}];return r.createElement(l.Link,{to:\"/ns/\"+Object(d.d)()+\"/replication/drafts/\"+e.name,className:\"grid-row \"+t.row,key:e.name},r.createElement(\"div\",null,e.label),r.createElement(\"div\",null,a,\" / \",o),r.createElement(\"div\",null,Object(m.s)(e.createdTimeMillis,!0)),r.createElement(\"div\",null,Object(m.s)(e.updatedTimeMillis,!0)),r.createElement(\"div\",null,r.createElement(v.a,{actions:i})))}))))),r.createElement(x,{replicatorId:s,show:s&&s.length>0,onDelete:h,closeModal:function(){return u(null)},type:a.draft}))})),P=n(416),_=n(421),I=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},k=u()((function(){return{root:{position:\"absolute\",top:\"20px\",right:\"25px\",zIndex:1},label:{cursor:\"pointer\",width:\"100%\"},fileInput:{display:\"none\"}}}))((function(e){var t=e.classes,n=I(r.useState(),2),a=n[0],o=n[1];if(a)return r.createElement(l.Redirect,{to:a});var i=[{label:\"Create a replication job\",to:\"/ns/\"+Object(d.d)()+\"/replication/create\"},{label:r.createElement(\"label\",{htmlFor:\"replication-import-btn\",className:t.label},\"Import\",r.createElement(\"input\",{id:\"replication-import-btn\",type:\"file\",accept:\".json\",onChange:function(e){if(Object(m.E)(e,\"target\",\"files\",0)){var t=e.target.files[0],n=new FileReader;n.readAsText(t,\"UTF-8\"),n.onload=function(e){var t=e.target.result.toString();window.localStorage.setItem(\"replicationImport\",t);var n=\"/ns/\"+Object(d.d)()+\"/replication/create?cloneId=replicationImport\";o(n)}}},className:t.fileInput}))}];return r.createElement(\"div\",{className:t.root},r.createElement(_.a,{mode:_.a.MODE.resourcecenter,contextItems:i}))})),L=u()((function(e){return{root:{height:\"100%\"},content:{height:\"calc(100% - 50px)\",padding:\"15px 50px\"},linkContainer:{borderBottom:\"2px solid \"+e.palette.grey[400],display:\"flex\"},link:{color:e.palette.grey[50],fontSize:\"20px\",marginRight:\"100px\",\"&:hover\":{textDecoration:\"none\",color:\"inherit\"}},activeLink:{fontWeight:600,borderBottom:\"3px solid \"+e.palette.grey[200]},contentContainer:{marginTop:\"15px\",height:\"calc(100% - 30px - 35px)\"}}}))((function(e){var t=e.classes;return r.createElement(\"div\",{className:t.root},r.createElement(P.a,{title:\"Replication jobs\"}),r.createElement(k,null),r.createElement(\"div\",{className:t.content},r.createElement(\"div\",{className:t.linkContainer},r.createElement(l.NavLink,{exact:!0,to:\"/ns/\"+Object(d.d)()+\"/replication\",activeClassName:t.activeLink,className:t.link},\"Deployed\"),r.createElement(l.NavLink,{exact:!0,to:\"/ns/\"+Object(d.d)()+\"/replication/drafts\",activeClassName:t.activeLink,className:t.link},\"Drafts\")),r.createElement(\"div\",{className:t.contentContainer},r.createElement(l.Switch,null,r.createElement(l.Route,{exact:!0,path:Cs+\"/drafts\",component:R}),r.createElement(l.Route,{exact:!0,path:\"\"+Cs,component:w})))))})),A=n(1545),D=n(310),M=n(197),U=n(62),B=Object(r.createContext)(null);function F(e){var t=e.children;return o.a.createElement(B.Provider,{value:window.CDAP_CONFIG.featureFlags},t)}var z,G,W,H=function(e,t){var n=Object(r.useContext)(B);if(null===n)throw new Error(\"Components must be wrapped in services/react/providers/featureFlagProvider\");return void 0===n[e]?t:\"true\"===n[e]},V=function(e){return H(e,!0)},K=Eo(u()((function(e){return{root:{marginTop:\"50px\",borderTop:\"1px solid \"+e.palette.grey[300],paddingTop:\"25px\",\"& button\":{marginRight:\"50px\"}}}}))((function(e){var t=e.activeStep,n=e.setActiveStep,a=e.nextDisabled,o=e.onNext,l=e.classes,i=e.onComplete,c=e.completeLoading,s=V(\"replication.transformations.enabled\"),u=$r(s);return r.createElement(\"div\",{className:l.root},r.createElement(E.a,{condition:t>0},r.createElement(M.a,{color:\"primary\",onClick:function(){return n(t-1)}},\"Previous\")),r.createElement(E.a,{condition:\"function\"!=typeof i},r.createElement(M.a,{variant:\"contained\",color:\"primary\",onClick:function(){t!==u.length-1&&(\"function\"==typeof o&&o(),n(t+1))},disabled:a},\"Next\")),r.createElement(E.a,{condition:\"function\"==typeof i},r.createElement(M.a,{variant:\"contained\",color:\"primary\",onClick:i,disabled:c},r.createElement(E.a,{condition:c},r.createElement(U.a,null)),\"Create Replicator\")))}))),Q=n(45),Y=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},q=function(e){var t=e.setName,n=e.value,a=e.error;return o.a.createElement(D.c,{widgetProperty:{label:\"Name\",name:\"name\",\"widget-type\":\"textbox\",\"widget-attributes\":{placeholder:\"Specify a name containing alphanumeric characters, underscores, and dashes only\"}},pluginProperty:{required:!0,name:\"name\"},value:n,onChange:t,errors:a})},J=function(e){var t=e.setDescription,n=e.value;return o.a.createElement(D.c,{widgetProperty:{label:\"Description\",name:\"description\",\"widget-type\":\"textbox\",\"widget-attributes\":{placeholder:\"Enter a description\"}},pluginProperty:{required:!1,name:\"description\"},value:n,onChange:t})},$=Eo(u()((function(e){return{root:{padding:\"30px 40px\"},content:{width:\"50%\",maxWidth:\"1000px\",minWidth:\"600px\"},error:{marginTop:\"3px\",color:e.palette.red[100]}}}))((function(e){var t=e.classes,n=e.name,a=e.description,l=e.setNameDescription,i=Y(Object(r.useState)(n),2),c=i[0],s=i[1],u=Y(Object(r.useState)(null),2),p=u[0],d=u[1],f=Y(Object(r.useState)(a),2),g=f[0],b=f[1],v=Object(r.useRef)(c),h=Object(r.useRef)(g);Object(r.useEffect)((function(){v.current=c}),[c]),Object(r.useEffect)((function(){h.current=g}),[g]),Object(r.useEffect)((function(){return function(){y()}}),[]);var y=function(){l(v.current,h.current)};var x=Object(m.E)(p,0,\"msg\");return o.a.createElement(\"div\",{className:t.root},o.a.createElement(\"div\",{className:t.content},o.a.createElement(Q.b,{type:Q.a.h3,label:\"Specify basic information\"}),o.a.createElement(\"br\",null),o.a.createElement(q,{value:c,setName:function(e){if(s(e),e.length>64)d([{msg:\"Name cannot be longer than 64 characters.\"}]);else if(Object(m.D)(e))d(null);else{d([{msg:\"Name is required. Name may only contain alphanumeric, -, and _\"}])}},error:p}),o.a.createElement(E.a,{condition:!!p},o.a.createElement(\"div\",{className:t.error},x)),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(J,{value:g,setDescription:b})),o.a.createElement(K,{onNext:y,nextDisabled:p||0===c.length}))}))),X=n(1619),Z=n(261),ee=n(6),te=n.n(ee),ne=n(662),ae=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},re=u()((function(){return{root:{padding:\"0 10px\"}}}))((function(e){var t=e.classes,n=e.pluginInfo,a=ae(r.useState(\"\"),2),o=a[0],l=a[1];return r.useEffect((function(){var e={namespace:Object(d.d)(),artifactName:n.artifact.name,artifactVersion:n.artifact.version,scope:n.artifact.scope,keys:\"doc.\"+n.name+\"-\"+n.type};p.a.fetchArtifactProperties(e).subscribe((function(t){l(t[e.keys])}))}),[]),r.createElement(\"div\",{className:t.root},r.createElement(ne.default,{markdown:o}))})),oe=n(1668),le=n(1483),ie=n(1526),ce=n(313),se=n.n(ce),ue=n(14),pe=u()((function(e){return{root:{border:\"1px solid \"+e.palette.grey[200],borderRadius:\"4px\",padding:\"20px 15px\",textAlign:\"center\",color:e.palette.grey[50],width:\"153px\",height:\"135px\",\"&:hover\":{backgroundColor:e.palette.grey[700],\"& *\":{textDecoration:\"none\",color:\"inherit\"}}},img:{height:\"40px\",width:\"40px\"},name:{marginTop:\"22px\",fontWeight:600,color:e.palette.grey[50],whiteSpace:\"pre-line\",lineHeight:1.2}}}))((function(e){var t=e.classes,n=e.name,a=e.icon,o=r.createElement(ue.a,{name:\"icon-plug\",className:t.img});return r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.imgContainer},a?r.createElement(\"img\",{src:a,className:t.img}):o),r.createElement(\"div\",{className:t.name},n))})),de=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},me=((z={})[N.b.source]=\"source\",z[N.b.target]=\"target\",z),fe=Eo(u()((function(e){return{header:{display:\"grid\",gridTemplateColumns:\"1fr 400px\"},searchSection:{display:\"flex\",alignItems:\"center\",justifyContent:\"flex-end\"},targetItem:{marginRight:\"25px\",cursor:\"pointer\"},selected:{borderColor:e.palette.blue[200],borderWidth:\"3px\"},search:{width:\"200px\",marginLeft:\"20px\",\"& input\":{paddingTop:\"10px\",paddingBottom:\"10px\"}},listContainer:{marginTop:\"15px\",marginBottom:\"15px\",height:\"135px\"},arrow:{top:Math.floor(67.5)+\"px\"}}}))((function(e){var t=e.classes,n=e.onSelect,a=e.currentSelection,o=e.parentArtifact,l=e.pluginType,i=de(r.useState([]),2),c=i[0],s=i[1],u=de(r.useState({}),2),p=u[0],d=u[1],f=de(r.useState(\"\"),2),g=f[0],b=f[1];r.useEffect((function(){Object(O.e)(o,l).subscribe((function(e){e.plugins.length>0&&!a&&n(e.plugins[0]),s(e.plugins),d(e.widgetMap)}))}),[]);var v=c;g.length>0&&(v=c.filter((function(e){var t=e.name+\"-\"+e.type,n=Object(m.E)(p,t,\"display-name\"),a=g.toLowerCase();return-1!==e.name.toLowerCase().indexOf(a)||n&&-1!==n.toLowerCase().indexOf(a)})));var h=me[l];return r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.header},r.createElement(\"div\",null,r.createElement(Q.b,{type:Q.a.h4,label:\"Select \"+h})),r.createElement(\"div\",{className:t.searchSection},r.createElement(\"div\",null,c.length,\" \",1===c.length?h:h+\"s\",\" \",\"available\"),r.createElement(le.a,{className:t.search,value:g,onChange:function(e){var t=e.target.value;b(t)},variant:\"outlined\",placeholder:\"Search \"+h+\"s by name\",InputProps:{startAdornment:r.createElement(ie.a,{position:\"start\"},r.createElement(se.a,null))}}))),r.createElement(\"div\",{className:t.listContainer},r.createElement(oe.a,{scrollAmount:153,classes:{arrow:t.arrow}},v.map((function(e){var o,l=e.name+\"-\"+e.type,i=p[l],c=i?i[\"display-name\"]:e.name,s=Object(m.E)(i,\"icon\",\"arguments\",\"data\"),u=Object(m.E)(a,\"name\"),d=Object(m.E)(a,\"artifact\",\"name\");return r.createElement(\"div\",{key:e.name,className:t.targetItem,onClick:n.bind(null,e)},r.createElement(pe,{name:c,icon:s,classes:{root:te()((o={},o[t.selected]=e.name===u&&e.artifact.name===d,o))}}))})))))}))),ge=n(178),be=n(294),ve=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};!function(e){e.configuration=\"CONFIGURATION\",e.documentation=\"DOCUMENTATION\"}(W||(W={}));var he,Ee,ye=((G={})[N.b.source]=\"Configure Source\",G[N.b.target]=\"Configure Target\",G),xe=Eo(u()((function(e){return{root:{padding:\"25px 40px\"},header:{marginTop:\"35px\",fontSize:\"18px\",borderBottom:\"1px solid \"+e.palette.grey[300]},option:{marginRight:\"100px\",cursor:\"pointer\"},active:{fontWeight:\"bold\",borderBottom:\"3px solid \"+e.palette.grey[200]},content:{paddingTop:\"25px\"}}}))((function(e){var t,n,a=e.classes,l=e.pluginInfo,i=e.pluginWidget,c=e.pluginConfig,s=e.setPluginInfo,u=e.setPluginWidget,p=e.setPluginConfig,d=e.parentArtifact,f=e.pluginType,g=ve(Object(r.useState)(W.configuration),2),b=g[0],v=g[1],h=ve(Object(r.useState)(c||{}),2),y=h[0],x=h[1],S=Object(r.useRef)(c||{}),T=ve(Object(r.useState)(!1),2),C=T[0],w=T[1];function N(){var e,t,n,a;p((e=Object(m.E)(i,\"configuration-groups\"),t=Object(m.E)(i,\"outputs\"),n=Object(ge.c)(j,e,t),a=Object(be.b)(n.configurationGroups,i,j,S.current),Object(ge.d)(S.current,a)))}Object(r.useEffect)((function(){if(!i&&l){var e=l.artifact;Object(X.b)(e.name,e.version,e.scope,l.name,l.type).subscribe((function(e){u(e)}))}}),[]),Object(r.useEffect)((function(){S.current=y}),[y]),Object(r.useEffect)((function(){return function(){N()}}),[]);var j=Object(m.E)(l,\"properties\")||{};return o.a.createElement(\"div\",{className:a.root},o.a.createElement(fe,{onSelect:function(e){w(!0);var t=e.artifact.name,n=e.name;Object(O.d)(d,t,e.artifact.scope,n,f).subscribe((function(e){Object(X.b)(t,e.artifact.version,e.artifact.scope,n,f).subscribe((function(t){x({}),s(e),u(t)}),null,(function(){w(!1)}))}),(function(e){console.error(\"Error fetching plugin\",e)}))},currentSelection:l,pluginType:f}),o.a.createElement(\"div\",{className:a.header},o.a.createElement(\"span\",{className:te()(a.option,(t={},t[a.active]=b===W.configuration,t)),onClick:function(){return v(W.configuration)}},ye[f]),o.a.createElement(\"span\",{className:te()(a.option,(n={},n[a.active]=b===W.documentation,n)),onClick:function(){return v(W.documentation)}},\"Documentation\")),o.a.createElement(E.a,{condition:l&&!C},o.a.createElement(\"div\",{className:a.content},o.a.createElement(E.a,{condition:b===W.configuration},o.a.createElement(Z.a,{widgetJson:i,pluginProperties:j,values:y,onChange:x})),o.a.createElement(E.a,{condition:b===W.documentation},o.a.createElement(re,{pluginInfo:l})))),o.a.createElement(E.a,{condition:C},o.a.createElement(U.a,null)),o.a.createElement(K,{onNext:N,onPrevious:N,nextDisabled:Object.keys(j).filter((function(e){return j[e].required})).map((function(e){return y&&y[e]&&y[e].length>0})).filter((function(e){return!e})).length>0}))}))),Se=Eo((function(e){var t=e.sourcePluginInfo,n=e.sourcePluginWidget,a=e.sourceConfig,o=e.setSourcePluginInfo,l=e.setSourcePluginWidget,i=e.setSourceConfig;return r.createElement(xe,{pluginType:N.b.source,pluginInfo:t,pluginWidget:n,pluginConfig:a,setPluginInfo:o,setPluginWidget:l,setPluginConfig:i})})),Oe=n(160),Te=n(1541),Ce=n(221),we=n.n(Ce),Ne=n(42),je=n(2),Re=n.n(je),Pe=n(282),_e=n.n(Pe),Ie=n(278),ke=n(1478),Le=n(1539),Ae=n(1535),De=u()((function(){return{searchBox:{width:\"200px\",\"& input\":{paddingTop:\"7px\",paddingBottom:\"7px\"}}}}))((function(e){var t=e.classes,n=e.value,a=e.onChange,o=e.placeholder,l=e.withAdornment;return r.createElement(le.a,{className:t.searchBox,value:n,onChange:function(e){a(e.target.value)},placeholder:o,variant:\"outlined\",InputProps:l?{startAdornment:r.createElement(ie.a,{position:\"start\",style:{marginLeft:\"-14px\",borderRadius:\"3px 0 0 3px\"}},r.createElement(se.a,{style:{background:\"#EEEEEE\",height:\"28px\",width:\"24px\",color:\"#979797\",borderRadius:\"4px 0 0 4px\"}}))}:null})})),Me=n(134),Ue=n.n(Me),Be=(he=function(e,t){return(he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}he(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e.all=\"ALL\",e.individual=\"INDIVIDUAL\"}(Ee||(Ee={}));var Fe,ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={columns:[],filteredColumns:[],primaryKeys:[],selectedReplication:Ee.all,selectedColumns:Object(Oe.Map)(),loading:!0,error:null,search:\"\"},t.getInitialSelectedColumns=function(e){var n={};e.forEach((function(e){n[e.name]=!0}));var a=!1,r={};t.props.initialSelected&&t.props.initialSelected.size>0&&t.props.initialSelected.forEach((function(e){var t=e.get(\"name\");n[t]?r[t]=e:a=!0}));var o=Object(Oe.Map)(r);return a&&t.props.onSave(t.props.tableInfo,o.toList()),o},t.setFilteredColumns=Ue()((function(e,n){void 0===e&&(e=t.state.search),void 0===n&&(n=t.state.columns);var a=n;e&&e.length>0&&(a=a.filter((function(t){var n=t.name.toLowerCase(),a=e.toLowerCase();return-1!==n.indexOf(a)}))),t.setState({filteredColumns:a})}),300),t.fetchColumns=function(){t.setState({loading:!0});var e={namespace:Object(d.d)(),draftId:t.props.draftId},n={table:t.props.tableInfo.table,database:t.props.tableInfo.database};t.props.tableInfo.schema&&(n.schema=t.props.tableInfo.schema),p.a.getTableInfo(e,n).subscribe((function(e){var n=t.getInitialSelectedColumns(e.columns);t.setState({columns:e.columns,primaryKeys:e.primaryKey,selectedColumns:n,selectedReplication:0===n.size?Ee.all:Ee.individual},(function(){0===n.size&&t.toggleSelectAll(),t.setFilteredColumns()}))}),(function(e){t.setState({error:e})}),(function(){t.setState({loading:!1})}))},t.handleSearch=function(e){t.setState({search:e}),t.setFilteredColumns(e)},t.handleSave=function(){var e=t.state.selectedReplication===Ee.all?null:t.state.selectedColumns.toList();t.props.onSave(t.props.tableInfo,e),t.props.toggle()},t.toggleSelected=function(e){var n=e.name;t.state.selectedColumns.get(n)?t.setState({selectedColumns:t.state.selectedColumns.delete(n)}):t.setState({selectedColumns:t.state.selectedColumns.set(n,Object(Oe.Map)({name:e.name,type:e.type}))})},t.toggleSelectAll=function(){if(t.state.selectedColumns.size>t.state.primaryKeys.length){var e={};return t.state.columns.forEach((function(n){-1!==t.state.primaryKeys.indexOf(n.name)&&(e[n.name]=Object(Oe.Map)({name:n.name,type:n.type}))})),void t.setState({selectedColumns:Object(Oe.Map)(e)})}var n={};t.state.columns.forEach((function(e){n[e.name]=Object(Oe.Map)({name:e.name,type:e.type})})),t.setState({selectedColumns:Object(Oe.Map)(n)})},t.handleReplicationSelection=function(e){t.setState({selectedReplication:e.target.value})},t.isSaveDisabled=function(){return t.state.selectedReplication===Ee.individual&&0===t.state.selectedColumns.size||t.state.loading},t.renderContent=function(){var e=t.props.classes;return r.createElement(r.Fragment,null,r.createElement(E.a,{condition:t.state.selectedReplication===Ee.all},r.createElement(\"div\",{className:e.overlay})),r.createElement(\"div\",{className:e.subtitleContainer},r.createElement(\"div\",null,\"Columns - \"+t.state.selectedColumns.size+\" of \"+t.state.columns.length+\" selected\"),r.createElement(\"div\",null,r.createElement(De,{value:t.state.search,onChange:t.handleSearch,placeholder:\"Search by column name\"}))),r.createElement(\"div\",{className:\"grid-wrapper \"+e.gridWrapper},r.createElement(\"div\",{className:\"grid grid-container grid-compact\"},r.createElement(\"div\",{className:\"grid-header\"},r.createElement(\"div\",{className:\"grid-row\"},r.createElement(\"div\",null,r.createElement(Te.a,{color:\"primary\",className:e.radio,checked:t.state.selectedColumns.size===t.state.columns.length,indeterminate:t.state.selectedColumns.size<t.state.columns.length&&t.state.selectedColumns.size>0,onChange:t.toggleSelectAll})),r.createElement(\"div\",null,\"#\"),r.createElement(\"div\",null,\"Column name\"),r.createElement(\"div\",null,\"Type\"),r.createElement(\"div\",null,\"Null\"),r.createElement(\"div\",null,\"Key\"))),r.createElement(\"div\",{className:\"grid-body\"},t.state.filteredColumns.map((function(n,a){var o=-1!==t.state.primaryKeys.indexOf(n.name);return r.createElement(\"div\",{key:n.name,className:\"grid-row\"},r.createElement(\"div\",{title:o?Re.a.translate(\"features.Replication.Create.Content.SelectColumns.primaryKeyDescription\").toString():\"\"},r.createElement(Te.a,{color:\"primary\",className:e.radio,checked:!!t.state.selectedColumns.get(n.name),disabled:o,onChange:t.toggleSelected.bind(t,n)})),r.createElement(\"div\",null,a+1),r.createElement(\"div\",null,n.name),r.createElement(\"div\",null,n.type),r.createElement(\"div\",null,r.createElement(Te.a,{className:e.radio,checked:n.nullable,disabled:!0})),r.createElement(\"div\",null,o?\"Primary\":\"--\"))}))))))},t.renderLoading=function(){return r.createElement(\"div\",{className:t.props.classes.loadingContainer},r.createElement(U.a,null))},t}return Be(t,e),t.prototype.componentDidMount=function(){this.fetchColumns()},t.prototype.render=function(){if(!this.props.tableInfo)return null;var e=this.props.classes;return r.createElement(\"div\",{className:e.backdrop},r.createElement(\"div\",{className:e.root},r.createElement(\"div\",{className:e.header},r.createElement(\"div\",null,r.createElement(Q.b,{type:Q.a.h3,label:this.props.tableInfo.table}),r.createElement(E.a,{condition:!this.state.loading},r.createElement(\"div\",{className:e.radioContainer},r.createElement(Ae.a,{value:this.state.selectedReplication,onChange:this.handleReplicationSelection,className:e.radioGroup},r.createElement(ke.a,{value:Ee.all,control:r.createElement(Le.a,{color:\"primary\",className:e.radio+\" \"+e.replicateSelectionRadio}),label:\"Replicate all available columns\"}),r.createElement(ke.a,{value:Ee.individual,control:r.createElement(Le.a,{color:\"primary\",className:e.radio+\" \"+e.replicateSelectionRadio}),label:\"Select the columns to replicate\"}))))),r.createElement(\"div\",{className:e.actionButtons},r.createElement(M.a,{variant:\"contained\",color:\"primary\",onClick:this.handleSave,disabled:this.isSaveDisabled()},\"Save\"),r.createElement(Ie.a,{onClick:this.props.toggle},r.createElement(_e.a,null)))),this.state.loading?this.renderLoading():this.renderContent()))},t}(r.PureComponent),Ge=Eo(u()((function(e){return{backdrop:{position:\"absolute\",top:0,left:0,right:0,bottom:0,backgroundColor:\"rgba(0, 0, 0, 0.1)\",zIndex:5},root:{position:\"absolute\",top:\"100px\",right:0,height:\"calc(100vh - 100px - 70px)\",width:\"750px\",padding:\"15px 30px\",backgroundColor:e.palette.white[50],border:\"1px solid \"+e.palette.grey[200],boxShadow:\"0 3px 10px 1px \"+e.palette.grey[200]},header:{display:\"grid\",gridTemplateColumns:\"75% 25%\"},actionButtons:{textAlign:\"right\",\"& > button:not(:last-child)\":{marginRight:\"10px\"}},gridWrapper:{height:\"calc(100% - 100px - 40px)\",\"& .grid.grid-container.grid-compact\":{maxHeight:\"100%\",\"& .grid-header\":{zIndex:5},\"& .grid-row\":{gridTemplateColumns:\"40px 40px 1fr 200px 55px 100px\",alignItems:\"center\"},'& > div[class^=\"grid-\"] .grid-row > div':{paddingTop:0,paddingBottom:0}}},loadingContainer:{textAlign:\"center\",marginTop:\"100px\"},replicateSelectionRadio:{marginRight:\"10px\"},radioContainer:{paddingLeft:\"10px\",marginTop:\"15px\",marginBottom:\"5px\"},radio:{padding:0},subtitleContainer:{display:\"flex\",alignItems:\"center\",marginBottom:\"10px\",\"& > div\":{marginRight:\"25px\"}},overlay:{backgroundColor:e.palette.white[50],opacity:.7,top:\"100px\",bottom:0,left:0,right:0,position:\"absolute\",zIndex:6}}}))(ze)),We=n(1482),He=n(1976),Ve=n.n(He),Ke=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};!function(e){e.all=\"ALL\",e.individual=\"INDIVIDUAL\"}(Fe||(Fe={}));var Qe,Ye,qe,Je,$e,Xe,Ze,et,tt,nt,at,rt,ot,lt,it,ct,st,ut,pt,dt,mt,ft,gt,bt,vt,ht,Et,yt,xt,St,Ot,Tt,Ct,wt,Nt,jt,Rt,Pt,_t=function(){return(_t=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},It=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},kt=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(It(arguments[t]));return e},Lt=function(e,t){switch(t.type){case\"setTableInfo\":return _t(_t({},e),{columns:t.payload.columns,primaryKeys:t.payload.primaryKeys,selectedColumns:t.payload.selectedColumns,filteredColumns:t.payload.filteredColumns,selectedReplication:0===t.payload.selectedColumns.size?Fe.all:Fe.individual});case\"setLoading\":return _t(_t({},e),{loading:t.payload});case\"setError\":return _t(_t({},e),{error:t.payload});case\"setSearch\":return _t(_t({},e),{search:t.payload});case\"setSelectedColumns\":return _t(_t({},e),{selectedColumns:t.payload});case\"setSelectedReplication\":return _t(_t({},e),{selectedReplication:t.payload});case\"setFilteredColumns\":return _t(_t({},e),{filteredColumns:t.payload});case\"filterErrs\":return _t(_t({},e),{filterErrs:t.payload});case\"setColumnTransformation\":return _t(_t({},e),{transformations:kt(e.transformations,[t.payload])});case\"removeColumnTransformation\":var n=e.transformations.splice(0,t.payload);return _t(_t({},e),{transformations:n});case\"setInitialTransformations\":return _t(_t({},e),{transformations:t.payload});default:return e}},At={columns:[],filteredColumns:[],filterErrs:[],primaryKeys:[],selectedReplication:Fe.all,selectedColumns:Object(Oe.Map)(),loading:!0,error:null,search:\"\",columnsWithErrors:\"\",transformations:[]},Dt=n(1972),Mt=n(79),Ut=n(1617),Bt=n.n(Ut),Ft=n(504),zt=n.n(Ft),Gt=n(618),Wt=function(e,t){return Object.defineProperty?Object.defineProperty(e,\"raw\",{value:t}):e.raw=t,e},Ht=Mt.c.div.withConfig({displayName:\"styles__Backdrop\"})(Qe||(Qe=Wt([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background-color: rgba(0, 0, 0, 0.1);\\n  z-index: 4;\\n\"],[\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background-color: rgba(0, 0, 0, 0.1);\\n  z-index: 4;\\n\"]))),Vt=Mt.c.div.withConfig({displayName:\"styles__Root\"})(Ye||(Ye=Wt([\"\\n  width: 100%;\\n  height: 100%;\\n  padding: 0 30px;\\n  background-color: \",\";\\n  border: 1px solid \",\";\\n\"],[\"\\n  width: 100%;\\n  height: 100%;\\n  padding: 0 30px;\\n  background-color: \",\";\\n  border: 1px solid \",\";\\n\"])),(function(e){return e.theme.palette.white[50]}),(function(e){return e.theme.palette.white[50]})),Kt=Mt.c.div.withConfig({displayName:\"styles__Header\"})(qe||(qe=Wt([\"\\n  display: grid;\\n  grid-template-columns: 75% 25%;\\n  background-color: #f5f5f5;\\n  padding: 64px 30px 15px;\\n  border: 0;\\n\"],[\"\\n  display: grid;\\n  grid-template-columns: 75% 25%;\\n  background-color: #f5f5f5;\\n  padding: 64px 30px 15px;\\n  border: 0;\\n\"]))),Qt=Mt.c.div.withConfig({displayName:\"styles__ActionButtons\"})(Je||(Je=Wt([\"\\n  text-align: right;\\n  & > button:not(:last-child): {\\n    margin-right: 25px;\\n  }\\n\"],[\"\\n  text-align: right;\\n  & > button:not(:last-child): {\\n    margin-right: 25px;\\n  }\\n\"]))),Yt=Object(Mt.c)(Le.a).withConfig({displayName:\"styles__StyledRadio\"})($e||($e=Wt([\"\\n  \",\"\\n  margin-right: 10px;\\n\"],[\"\\n  \",\"\\n  margin-right: 10px;\\n\"])),\"padding: 0;\"),qt=Object(Mt.c)(Te.a).withConfig({displayName:\"styles__StyledCheckbox\"})(Xe||(Xe=Wt([\"\\n  \",\"\\n\"],[\"\\n  \",\"\\n\"])),\"padding: 0;\"),Jt=Mt.c.div.withConfig({displayName:\"styles__SubtitleContainer\"})(Ze||(Ze=Wt([\"\\n  display: flex;\\n  align-items: center;\\n  margin-bottom: 10px;\\n  justify-content: space-between;\\n  & > div: {\\n    margin-right: 25px;\\n  }\\n\"],[\"\\n  display: flex;\\n  align-items: center;\\n  margin-bottom: 10px;\\n  justify-content: space-between;\\n  & > div: {\\n    margin-right: 25px;\\n  }\\n\"]))),$t=Mt.c.div.withConfig({displayName:\"styles__RadioContainer\"})(et||(et=Wt([\"\\n  padding-left: 10px;\\n  margin-top: 15px;\\n  margin-bottom: 5px;\\n\"],[\"\\n  padding-left: 10px;\\n  margin-top: 15px;\\n  margin-bottom: 5px;\\n\"]))),Xt=Object(Mt.c)(Ae.a).withConfig({displayName:\"styles__StyledRadioGroup\"})(tt||(tt=Wt([\"\\n  align-items: flex-start;\\n\"],[\"\\n  align-items: flex-start;\\n\"]))),Zt=Mt.c.div.withConfig({displayName:\"styles__LoadingContainer\"})(nt||(nt=Wt([\"\\n  text-align: center;\\n  margin-top: 100px;\\n\"],[\"\\n  text-align: center;\\n  margin-top: 100px;\\n\"]))),en=Mt.c.span.withConfig({displayName:\"styles__LineForArrow\"})(at||(at=Wt([\"\\n  min-width: 90%;\\n  margin-right: -9px;\\n  &:before {\\n    background-color: #d7d7d7;\\n    content: '';\\n    display: inline-block;\\n    height: 2px;\\n    position: relative;\\n    vertical-align: middle;\\n    width: 100%;\\n  }\\n\"],[\"\\n  min-width: 90%;\\n  margin-right: -9px;\\n  &:before {\\n    background-color: #d7d7d7;\\n    content: '';\\n    display: inline-block;\\n    height: 2px;\\n    position: relative;\\n    vertical-align: middle;\\n    width: 100%;\\n  }\\n\"]))),tn=Object(Mt.c)(Bt.a).withConfig({displayName:\"styles__ChevWithStyles\"})(rt||(rt=Wt([\"\\n  font-size: 22px;\\n  color: #d7d7d7;\\n\"],[\"\\n  font-size: 22px;\\n  color: #d7d7d7;\\n\"]))),nn=Mt.c.div.withConfig({displayName:\"styles__PointerContainer\"})(ot||(ot=Wt([\"\\n  display: flex;\\n  margin-left: 5px;\\n\"],[\"\\n  display: flex;\\n  margin-left: 5px;\\n\"]))),an=Mt.c.span.withConfig({displayName:\"styles__CenteredTextSpan\"})(lt||(lt=Wt([\"\\n  text-align: center;\\n\"],[\"\\n  text-align: center;\\n\"]))),rn=Mt.c.span.withConfig({displayName:\"styles__NoPaddingSpanLeft\"})(it||(it=Wt([\"\\n  padding-bottom: 0;\\n  margin-bottom: 0;\\n  text-align: left;\\n\"],[\"\\n  padding-bottom: 0;\\n  margin-bottom: 0;\\n  text-align: left;\\n\"]))),on=Object(Mt.c)(rn).withConfig({displayName:\"styles__PrimaryKeySpan\"})(ct||(ct=Wt([\"\\n  padding-left: 40%;\\n\"],[\"\\n  padding-left: 40%;\\n\"]))),ln=Object(Mt.c)(an).withConfig({displayName:\"styles__NoPaddingSpan\"})(st||(st=Wt([\"\\n  padding-bottom: 0;\\n  margin-bottom: 0;\\n\"],[\"\\n  padding-bottom: 0;\\n  margin-bottom: 0;\\n\"]))),cn=Object(Mt.c)(ln).withConfig({displayName:\"styles__SubHeaderSpanNoPad\"})(ut||(ut=Wt([\"\\n  font-family: roboto;\\n  font-size: 13px;\\n  font-weight: 800;\\n  color: #666666;\\n\"],[\"\\n  font-family: roboto;\\n  font-size: 13px;\\n  font-weight: 800;\\n  color: #666666;\\n\"]))),sn=Object(Mt.c)(cn).withConfig({displayName:\"styles__SubHeaderSpanNoPadLeft\"})(pt||(pt=Wt([\"\\n  text-align: left;\\n\"],[\"\\n  text-align: left;\\n\"]))),un=Object(Mt.c)(sn).withConfig({displayName:\"styles__KeySubHeaderSpan\"})(dt||(dt=Wt([\"\\n  padding-left: 40%;\\n\"],[\"\\n  padding-left: 40%;\\n\"]))),pn=Object(Mt.c)(an).withConfig({displayName:\"styles__SubHeaderSpan\"})(mt||(mt=Wt([\"\\n  font-family: roboto;\\n  font-size: 13px;\\n  font-weight: 800;\\n  color: #666666;\\n\"],[\"\\n  font-family: roboto;\\n  font-size: 13px;\\n  font-weight: 800;\\n  color: #666666;\\n\"]))),dn=function(){return o.a.createElement(nn,null,o.a.createElement(en,null),o.a.createElement(tn,null))},mn=Object(Mt.c)(Dt.a).withConfig({displayName:\"styles__GridCell\"})(ft||(ft=Wt([\"\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n\"],[\"\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n\"]))),fn=Object(Mt.c)(Dt.a).withConfig({displayName:\"styles__GridButtonCell\"})(gt||(gt=Wt([\"\\n  display: flex;\\n  vertical-align: middle;\\n\"],[\"\\n  display: flex;\\n  vertical-align: middle;\\n\"]))),gn=Mt.c.p.withConfig({displayName:\"styles__HeaderWithLineThrough\"})(bt||(bt=Wt([\"\\n  margin: 0 20px;\\n  overflow: hidden;\\n  font-size: 12px;\\n  text-align: center;\\n  color: #666666;\\n\\n  &:before,\\n  &:after {\\n    background-color: #666666;\\n    content: '';\\n    display: inline-block;\\n    height: 1px;\\n    position: relative;\\n    vertical-align: middle;\\n    width: 40%;\\n  }\\n\\n  &:before {\\n    right: 0.5em;\\n    margin-left: -50%;\\n  }\\n\\n  &:after {\\n    left: 0.5em;\\n    margin-right: -50%;\\n  }\\n\"],[\"\\n  margin: 0 20px;\\n  overflow: hidden;\\n  font-size: 12px;\\n  text-align: center;\\n  color: #666666;\\n\\n  &:before,\\n  &:after {\\n    background-color: #666666;\\n    content: '';\\n    display: inline-block;\\n    height: 1px;\\n    position: relative;\\n    vertical-align: middle;\\n    width: 40%;\\n  }\\n\\n  &:before {\\n    right: 0.5em;\\n    margin-left: -50%;\\n  }\\n\\n  &:after {\\n    left: 0.5em;\\n    margin-right: -50%;\\n  }\\n\"]))),bn=Mt.c.p.withConfig({displayName:\"styles__SchemaPropertiesHeader\"})(vt||(vt=Wt([\"\\n  margin: 0 20px;\\n  overflow: hidden;\\n  font-size: 12px;\\n  text-align: center;\\n  color: #666666;\\n\\n  &:before,\\n  &:after {\\n    background-color: #666666;\\n    content: '';\\n    display: inline-block;\\n    height: 1px;\\n    position: relative;\\n    vertical-align: middle;\\n    width: 5%;\\n  }\\n\\n  &:before {\\n    right: 0.5em;\\n    margin-left: -50%;\\n  }\\n\\n  &:after {\\n    left: 0.5em;\\n    margin-right: -50%;\\n  }\\n\"],[\"\\n  margin: 0 20px;\\n  overflow: hidden;\\n  font-size: 12px;\\n  text-align: center;\\n  color: #666666;\\n\\n  &:before,\\n  &:after {\\n    background-color: #666666;\\n    content: '';\\n    display: inline-block;\\n    height: 1px;\\n    position: relative;\\n    vertical-align: middle;\\n    width: 5%;\\n  }\\n\\n  &:before {\\n    right: 0.5em;\\n    margin-left: -50%;\\n  }\\n\\n  &:after {\\n    left: 0.5em;\\n    margin-right: -50%;\\n  }\\n\"]))),vn=Object(Mt.c)(Dt.a).withConfig({displayName:\"styles__GridCellContainer\"})(ht||(ht=Wt([\"\\n  padding-left: 20px;\\n\"],[\"\\n  padding-left: 20px;\\n\"]))),hn=Object(Mt.c)(Dt.a).withConfig({displayName:\"styles__HeaderGrid\"})(Et||(Et=Wt([\"\\n  background: #f5f5f5;\\n  color: #666666;\\n  fontweight: 700;\\n  padding: 5px 0;\\n  height: 100%;\\n\"],[\"\\n  background: #f5f5f5;\\n  color: #666666;\\n  fontweight: 700;\\n  padding: 5px 0;\\n  height: 100%;\\n\"]))),En=Object(Mt.c)(vn).withConfig({displayName:\"styles__GridDividerCell\"})(yt||(yt=Wt([\"\\n  border-right: 1px solid #d7d7d7;\\n\"],[\"\\n  border-right: 1px solid #d7d7d7;\\n\"]))),yn=Object(Mt.c)(Dt.a).withConfig({displayName:\"styles__GridBorderBottom\"})(xt||(xt=Wt([\"\\n  border-bottom: 1px solid #d7d7d7;\\n\"],[\"\\n  border-bottom: 1px solid #d7d7d7;\\n\"]))),xn=Object(Mt.c)(zt.a).withConfig({displayName:\"styles__KeyboardArrowDownIconTransformGrid\"})(St||(St=Wt([\"\\n  color: #acacac;\\n  font-size: 24px;\\n\"],[\"\\n  color: #acacac;\\n  font-size: 24px;\\n\"]))),Sn=Mt.c.span.withConfig({displayName:\"styles__WarningMessage\"})(Ot||(Ot=Wt([\"\\n  color: \",\";\\n\"],[\"\\n  color: \",\";\\n\"])),(function(e){return e.theme.palette.red[50]})),On=Object(Mt.c)(M.a).withConfig({displayName:\"styles__SmallButton\"})(Tt||(Tt=Wt([\"\\n  font-size: 12px;\\n  align-self: center;\\n\"],[\"\\n  font-size: 12px;\\n  align-self: center;\\n\"]))),Tn=Mt.c.div.withConfig({displayName:\"styles__RefreshContainer\"})(Ct||(Ct=Wt([\"\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  margin-left: auto;\\n\"],[\"\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  margin-left: auto;\\n\"]))),Cn=Mt.c.div.withConfig({displayName:\"styles__Circle\"})(wt||(wt=Wt([\"\\n  width: 15px;\\n  height: 15px;\\n  margin: 3px;\\n  background: #666666;\\n  border-radius: 50%;\\n\"],[\"\\n  width: 15px;\\n  height: 15px;\\n  margin: 3px;\\n  background: #666666;\\n  border-radius: 50%;\\n\"]))),wn=Mt.c.span.withConfig({displayName:\"styles__NumSpan\"})(Nt||(Nt=Wt([\"\\n  text-align: right;\\n\"],[\"\\n  text-align: right;\\n\"]))),Nn=Object(Mt.c)(Gt.a).withConfig({displayName:\"styles__CancelButton\"})(jt||(jt=Wt([\"\\n  margin-right: 40px;\\n\"],[\"\\n  margin-right: 40px;\\n\"]))),jn=n(1521),Rn=n(1973),Pn=n.n(Rn),_n=n(244),In=n.n(_n),kn=n(220);!function(e){e.yes=\"YES\",e.no=\"NO\",e.partial=\"PARTIAL\"}(Pt||(Pt={}));var Ln,An,Dn,Mn,Un,Bn,Fn,zn=((Rt={})[Pt.no]=\"The column is not supported\",Rt[Pt.partial]=\"The column is partially supported\",Rt),Gn=u()((function(e){return{green:{color:e.palette.green[50]},red:{color:e.palette.red[100]},supportIcon:{marginTop:\"-2px\"},clickable:{cursor:\"pointer\",color:e.palette.blue[100],\"&:hover $supportText\":{textDecoration:\"underline\"}},supportText:{marginLeft:\"5px\"},popoverContentContainer:{display:\"flex\",textAlign:\"left\",padding:\"10px 5px\"},popover:{\"& .popper\":{width:\"250px\"}},iconContainer:{paddingRight:\"5px\"}}}))((function(e){var t,n,a=e.classes,o=e.columnRow,l=r.createElement(ue.a,{name:o.support===Pt.partial?\"icon-circle-o\":\"icon-circle\",className:te()(a.supportIcon,(t={},t[a.green]=o.support===Pt.yes,t[a.red]=o.support!==Pt.yes,t))}),i=r.createElement(\"span\",{className:te()((n={},n[a.clickable]=o.support!==Pt.yes,n))},l,r.createElement(\"span\",{className:a.supportText},In()(o.support)));if(o.support===Pt.yes)return i;var c=Object(m.E)(o,\"suggestion\",\"message\");return r.createElement(kn.a,{target:function(){return i},className:a.popover,placement:\"left\",bubbleEvent:!1,enableInteractionInPopover:!0,showOn:\"Click\"},r.createElement(\"div\",{className:a.popoverContentContainer},r.createElement(\"div\",{className:a.iconContainer},l),r.createElement(\"div\",{className:a.popoverContent},r.createElement(\"div\",null,zn[o.support]),r.createElement(\"br\",null),r.createElement(\"div\",null,r.createElement(\"strong\",null,\"Reason:\")),r.createElement(\"div\",null,c))))})),Wn=n(1473),Hn=function(e,t){return Object.defineProperty?Object.defineProperty(e,\"raw\",{value:t}):e.raw=t,e},Vn=Object(Mt.c)(Wn.a).withConfig({displayName:\"styles__StyledPopper\"})(Ln||(Ln=Hn([\"\\n  z-index: 5;\\n  overflow-x: unset;\\n  overflow-y: unset;\\n  &::before {\\n    content: '';\\n    position: absolute;\\n    margin-right: -0.71em;\\n    top: 12px;\\n    left: 4.7px;\\n    width: 15px;\\n    height: 15px;\\n    background-color: \",\";\\n    box-shadow: -2px -2px 4px -1px rgb(0 0 0 / 31%);\\n    transform: rotate(225deg);\\n    clip-path: polygon(-5px -5px, calc(100% + 5px) -5px, calc(100% + 5px) calc(100% + 5px));\\n  }\\n\"],[\"\\n  z-index: 5;\\n  overflow-x: unset;\\n  overflow-y: unset;\\n  &::before {\\n    content: '';\\n    position: absolute;\\n    margin-right: -0.71em;\\n    top: 12px;\\n    left: 4.7px;\\n    width: 15px;\\n    height: 15px;\\n    background-color: \",\";\\n    box-shadow: -2px -2px 4px -1px rgb(0 0 0 / 31%);\\n    transform: rotate(225deg);\\n    clip-path: polygon(-5px -5px, calc(100% + 5px) -5px, calc(100% + 5px) calc(100% + 5px));\\n  }\\n\"])),(function(e){return e.theme.palette.white[50]})),Kn=Object(Mt.c)(M.a).withConfig({displayName:\"styles__StyledButton\"})(An||(An=Hn([\"\\n  &&& {\\n    font-size: 18px;\\n    padding: 2px;\\n    min-width: 15px;\\n    &:focus {\\n      background-color: rgba(0, 0, 0, 0.04);\\n    }\\n  }\\n\"],[\"\\n  &&& {\\n    font-size: 18px;\\n    padding: 2px;\\n    min-width: 15px;\\n    &:focus {\\n      background-color: rgba(0, 0, 0, 0.04);\\n    }\\n  }\\n\"]))),Qn=Mt.c.p.withConfig({displayName:\"styles__StyledP\"})(Dn||(Dn=Hn([\"\\n  margin-bottom: 0;\\n\"],[\"\\n  margin-bottom: 0;\\n\"]))),Yn=Mt.c.p.withConfig({displayName:\"styles__BoldP\"})(Mn||(Mn=Hn([\"\\n  font-weight: 800;\\n  margin-bottom: 0;\\n\"],[\"\\n  font-weight: 800;\\n  margin-bottom: 0;\\n\"]))),qn=Object(Mt.c)(Ie.a).withConfig({displayName:\"styles__PositionedIconButton\"})(Un||(Un=Hn([\"\\n  &&& {\\n    right: 3px;\\n    top: 3px;\\n    height: 4px;\\n    width: 4px;\\n    position: absolute;\\n  }\\n\"],[\"\\n  &&& {\\n    right: 3px;\\n    top: 3px;\\n    height: 4px;\\n    width: 4px;\\n    position: absolute;\\n  }\\n\"]))),Jn=Object(Mt.c)(_e.a).withConfig({displayName:\"styles__CloseIconScaled\"})(Bn||(Bn=Hn([\"\\n  transform: scale(0.8);\\n\"],[\"\\n  transform: scale(0.8);\\n\"]))),$n=Object(Mt.c)(We.a).withConfig({displayName:\"styles__StyledBox\"})(Fn||(Fn=Hn([\"\\n  border: 0;\\n  min-width: 240px;\\n  max-width: 290px;\\n  border-radius: 4px;\\n  margin-left: 12px;\\n  padding: 16px;\\n  background-color: \",\";\\n  box-shadow: -2px 2px 4px -1px rgba(0, 0, 0, 0.31);\\n\"],[\"\\n  border: 0;\\n  min-width: 240px;\\n  max-width: 290px;\\n  border-radius: 4px;\\n  margin-left: 12px;\\n  padding: 16px;\\n  background-color: \",\";\\n  box-shadow: -2px 2px 4px -1px rgba(0, 0, 0, 0.31);\\n\"])),(function(e){return e.theme.palette.white[50]})),Xn=n(713),Zn=function(){return(Zn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ea=function(e){return o.a.createElement(Xn.a,Zn({},e),o.a.createElement(\"path\",{d:\"M21.008845,21 C22.1085295,21 22.555163,20.2316452 21.9946626,19.2635082 L13.0053374,3.73649183 C12.4501049,2.77745388 11.555163,2.76835477 10.9946626,3.73649183 L2.00533738,19.2635082 C1.45010488,20.2225461 1.88967395,21 2.991155,21 L21.008845,21 Z M13,18 L11,18 L11,16 L13,16 L13,18 L13,18 Z M13,14 L11,14 L11,10 L13,10 L13,14 L13,14 Z\",id:\"Shape\",fill:\"#F3B300\"}))},ta=function(e){return o.a.createElement(Xn.a,Zn({},e),o.a.createElement(\"path\",{d:\"M12,2 C6.48,2 2,6.48 2,12 C2,17.52 6.48,22 12,22 C17.52,22 22,17.52 22,12 C22,6.48 17.52,2 12,2 Z M10,17 L5,12 L6.41,10.59 L10,14.17 L17.59,6.58 L19,8 L10,17 Z\",id:\"Shape\",fill:\"#00C752\"}))},na=function(e){return o.a.createElement(Xn.a,Zn({},e),o.a.createElement(\"path\",{d:\"M12,2 C6.48,2 2,6.48 2,12 C2,17.52 6.48,22 12,22 C17.52,22 22,17.52 22,12 C22,6.48 17.52,2 12,2 L12,2 Z M13,17 L11,17 L11,15 L13,15 L13,17 L13,17 Z M13,13 L11,13 L11,7 L13,7 L13,13 L13,13 Z\",id:\"Shape\",fill:\"#DA4236\"}))},aa=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},ra=function(e){return o.a.createElement(qn,{\"aria-label\":\"close\",onClick:e.handleClick},o.a.createElement(Jn,null))},oa=function(e){var t,n,a,l,i=aa(Object(r.useState)(void 0),2),c=i[0],s=i[1],u=aa(Object(r.useState)(),2),p=u[0],d=u[1];Object(r.useEffect)((function(){a=Pn()()}),[]),e.status===Pt.yes?(t=o.a.createElement(ta,null),n=\"Success - no errors\"):e.status===Pt.no?(t=o.a.createElement(na,null),n=\"Error\"):(t=o.a.createElement(ea,null),n=\"Warning\");var m=function(t){if(e.status!==Pt.yes){var n=\"click\"===p?void 0:\"click\";s(void 0!==n?t.target:void 0),d(n)}},f=function(t){e.status!==Pt.yes&&(l&&clearTimeout(l),\"click\"!==p&&(c||s(t.target),d(\"hover\")))},g=function(){\"click\"!==p&&(l=setTimeout((function(){l=void 0,d(void 0),s(void 0)}),200))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Kn,{\"aria-label\":n,\"aria-describedby\":a,style:{backgroundColor:p?\"rgba(0, 0, 0, 0.04)\":\"\"},onKeyPress:function(e){\"Enter\"===e.key&&m(e)},onClick:function(){return m},onMouseOver:f,onMouseLeave:g},t,Boolean(e.message)&&o.a.createElement(Bt.a,null)),o.a.createElement(Vn,{id:a,open:Boolean(e.message)&&Boolean(p),placement:\"right-start\",anchorEl:c,transition:!0},o.a.createElement(\"div\",{onMouseEnter:f,onMouseLeave:g},o.a.createElement(jn.a,{onClickAway:m},o.a.createElement($n,null,\"click\"===p&&o.a.createElement(ra,{handleClick:function(){d(void 0),s(void 0)}}),o.a.createElement(We.a,null,o.a.createElement(\"span\",null,t,\" The column is not supported\")),o.a.createElement(We.a,null,o.a.createElement(Yn,null,\"Reason: \"),o.a.createElement(Qn,null,e.message)))))))},la=n(1974),ia=n.n(la),ca=n(708),sa=n(712),ua=n(1525),pa=function(e){return\"mask \"+e.columnName+\" \"+e.directive},da=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};function ma(e){var t=e.row,n=e.addColumnsToTransforms,a=e.tinkEnabled,l=e.currentColumnName,i=da(Object(r.useState)(null),2),c=i[0],s=i[1],u=da(Object(r.useState)(null),2),p=u[0],d=u[1],m=da(Object(r.useState)(null),2),f=m[0],g=m[1],b=da(Object(r.useState)(\"\"),2),v=b[0],h=b[1],E=da(Object(r.useState)(null),2),y=E[0],x=E[1],S=!!y,O=!!c,T=!!p,C=\"string\"===t.targetType.toLowerCase(),w=function(e){g(e.currentTarget.innerText),d(e.currentTarget)},N=function(){s(null),g(null),d(null),x(null),h(\"\")},j=function(e){var a=pa({columnName:l,directive:\"right * \"+e});n({columnName:t.name,directive:a}),N()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(On,{color:\"primary\",id:\"transform-menu-\"+t.name+\"-button\",\"aria-controls\":\"trasnform-column-menu\",\"aria-haspopup\":\"true\",variant:\"text\",\"aria-expanded\":O?\"true\":void 0,onClick:function(e){s(e.currentTarget)}},\"Transform\",o.a.createElement(xn,null)),o.a.createElement(ca.a,{getContentAnchorEl:null,id:\"transform-menu-\"+t.name,anchorEl:c,open:O,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},onClose:N,style:{paddingTop:0,paddingBottom:0},MenuListProps:{\"aria-labelledby\":\"transform-menu-\"+t.name+\"-button\",dense:!0}},o.a.createElement(sa.a,{onClick:w},\"Rename \",o.a.createElement(ia.a,null)),o.a.createElement(sa.a,{disabled:!C,onClick:function(e){x(e.currentTarget)}},\"Mask \",o.a.createElement(ia.a,null)),o.a.createElement(ca.a,{getContentAnchorEl:null,id:\"transform-menu-\"+t.name+\"-mask\",anchorEl:y,open:S,anchorOrigin:{vertical:\"top\",horizontal:\"right\"},onClose:N,style:{paddingTop:0,paddingBottom:0},MenuListProps:{\"aria-labelledby\":\"transform-menu-\"+t.name+\"-button-mask-menu\",dense:!0}},o.a.createElement(sa.a,{disabled:!C,onClick:function(){return j(2)}},\"Show last 2\"),o.a.createElement(sa.a,{disabled:!C,onClick:function(){return j(4)}},\"Show last 4\"),o.a.createElement(sa.a,{disabled:!C,onClick:w},\"Custom \",o.a.createElement(ia.a,null)),a&&o.a.createElement(sa.a,{onClick:w},\"TINK \",o.a.createElement(ia.a,null)))),o.a.createElement(ua.a,{id:\"transform-menu-\"+t.name+\"-TINK\",anchorEl:p,open:O&&T,anchorOrigin:{vertical:\"top\",horizontal:\"right\"},onClose:N},o.a.createElement(Dt.a,{container:!0,direction:\"row\",spacing:0,justifyContent:\"center\",style:{alignSelf:\"center\",minWidth:\"200px\",padding:\"8px\"}},o.a.createElement(le.a,{size:\"small\",id:t.name+\"-outlined-multiline-flexible-directive-text\",label:\"Custom\"===f?\"Mask (ie: right * 4)\":f,variant:\"outlined\",value:v,onChange:function(e){h(e.target.value)}})),o.a.createElement(Dt.a,{container:!0,direction:\"row\",spacing:0,justifyContent:\"center\",alignItems:\"center\",style:{minWidth:\"200px\",padding:\"8px\",textAlign:\"center\",borderTop:\"1px solid #d7d7d7\"}},o.a.createElement(Dt.a,{item:!0,xs:6},o.a.createElement(On,{color:\"primary\",variant:\"contained\",onClick:function(){var e,a,r={columnName:l,directive:v};e=\"tink\"===f?\"tink \"+(a=r).columnName+\" \"+a.directive:\"Rename\"===f?function(e){return\"rename \"+e.columnName+\" \"+e.directive}(r):pa(r),n({columnName:t.name,directive:e}),N()}},\"Apply\")),o.a.createElement(Dt.a,{item:!0,xs:6},o.a.createElement(On,{color:\"primary\",variant:\"text\",onClick:N},\"Cancel\")))))}var fa=n(1975),ga=n.n(fa),ba=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};function va(e){var t=e.row,n=e.deleteColumnsFromTransforms,a=e.transforms,l=a.filter((function(e){return e.columnName===t.name})).length,i=ba(Object(r.useState)(null),2),c=i[0],s=i[1],u=!!c,p=function(){s(null)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(On,{color:\"primary\",id:\"transform-delete-\"+t.name+\"-button\",\"aria-controls\":\"trasnform-column-menu\",\"aria-haspopup\":\"true\",variant:\"text\",disabled:0===l,\"aria-expanded\":u?\"true\":void 0,onClick:function(e){s(e.currentTarget)},style:{alignSelf:\"start\"}},\"\"+(0===l?\"--\":l),0!==l&&o.a.createElement(xn,null)),o.a.createElement(ca.a,{getContentAnchorEl:null,id:\"transform-menu-\"+t.name,anchorEl:c,open:u,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},onClose:p,MenuListProps:{\"aria-labelledby\":\"transform-menu-\"+t.name+\"-button\"}},o.a.createElement(Dt.a,{container:!0,direction:\"row\",spacing:0,justifyContent:\"flex-start\",alignItems:\"flex-start\",style:{minWidth:\"400px\",padding:\"16px 12px 16px 16px\"}},o.a.createElement(Dt.a,{item:!0,xs:1},o.a.createElement(\"span\",null,\" # \")),o.a.createElement(Dt.a,{item:!0,xs:11},o.a.createElement(\"span\",null,\" Transformations \"))),a.map((function(e,a){var r=e.columnName,l=e.directive,i=r===t.name;return o.a.createElement(Dt.a,{container:!0,direction:\"row\",key:r+\"-\"+l+\"-row\"},o.a.createElement(sa.a,{style:{minWidth:\"400px\",background:i?\"#f5f5f5\":\"\",borderTop:\"1px solid #d7d7d7\"},onClick:function(){return n(a),void p()},disabled:!i},o.a.createElement(Dt.a,{item:!0,xs:1},\"\"+(a+1)),o.a.createElement(Dt.a,{item:!0,xs:11},l,\" \",o.a.createElement(ga.a,{style:{float:\"right\"}}))))}))))}var ha,Ea=function(e){var t,n=e.state,a=e.handleSearch,r=e.toggleSelectAll,l=e.toggleSelected,i=e.I18N_PREFIX,c=e.addColumnsToTransforms,s=e.deleteColumnsFromTransforms,u=e.transforms,p=e.tableAssessments,d=e.handleFilterErrors,m=e.filterErrs,f=e.tinkEnabled,g=!!p,b=g&&0===Object.keys(p).length,v=[];g&&(t=Object.values(p).filter((function(e){if(e.support!==Pt.yes)return v.push(e.sourceName.toLowerCase()),!0})));var h,E=t&&t.length;return E>0&&(h=o.a.createElement(o.a.Fragment,null,\" - \",o.a.createElement(Sn,null,E,\" not or partially supported \",\"  \"),o.a.createElement(On,{variant:\"text\",color:\"primary\",onClick:function(){d(m.length?[]:v)}},m.length?\"hide\":\"show\"))),o.a.createElement(o.a.Fragment,null,o.a.createElement(Jt,null,o.a.createElement(\"div\",null,\"Columns - \"+n.selectedColumns.size+\" of \"+n.columns.length+\" selected\",E>0?h:\"\"),o.a.createElement(\"div\",null,o.a.createElement(De,{value:n.search,onChange:a,placeholder:\"Search by column name\",withAdornment:!0}))),o.a.createElement(Dt.a,{spacing:0,container:!0,direction:\"row\",justifyContent:\"flex-start\",alignItems:\"flex-start\"},o.a.createElement(Dt.a,{container:!0,direction:\"row\"},o.a.createElement(Dt.a,{item:!0,xs:1}),o.a.createElement(Dt.a,{item:!0,xs:3},o.a.createElement(gn,null,\" Field Names \")),o.a.createElement(Dt.a,{item:!0,xs:2},o.a.createElement(gn,null,\" Data Types \")),o.a.createElement(Dt.a,{item:!0,xs:2},o.a.createElement(bn,null,\" Schema properties \")),o.a.createElement(Dt.a,{item:!0,xs:4},o.a.createElement(gn,null,\" Assessments and transformations \"))),o.a.createElement(hn,{container:!0,direction:\"row\"},o.a.createElement(vn,{item:!0,xs:1,container:!0,direction:\"row\"},o.a.createElement(fn,{item:!0,xs:6},o.a.createElement(qt,{color:\"primary\",checked:n.selectedColumns.size===n.columns.length,indeterminate:n.selectedColumns.size<n.columns.length&&n.selectedColumns.size>0,onChange:r})),o.a.createElement(mn,{item:!0,xs:6,alignItems:\"center\"},o.a.createElement(wn,null,\"#\"))),o.a.createElement(vn,{item:!0,xs:3,container:!0,direction:\"row\"},o.a.createElement(mn,{item:!0,xs:3},o.a.createElement(sn,null,\"Source\")),o.a.createElement(mn,{item:!0,xs:5},o.a.createElement(dn,null)),o.a.createElement(mn,{item:!0,xs:4},o.a.createElement(sn,null,\"Target\"))),o.a.createElement(vn,{item:!0,xs:2,container:!0,direction:\"row\"},o.a.createElement(mn,{item:!0,xs:3},o.a.createElement(sn,null,\"Source\")),o.a.createElement(mn,{item:!0,xs:5},o.a.createElement(dn,null)),o.a.createElement(mn,{item:!0,xs:4},o.a.createElement(sn,null,\"Target\"))),o.a.createElement(En,{item:!0,xs:2,container:!0,direction:\"row\"},o.a.createElement(mn,{item:!0,xs:6},o.a.createElement(pn,null,\"Null\")),o.a.createElement(mn,{item:!0,xs:6},o.a.createElement(un,null,\"Key\"))),o.a.createElement(vn,{item:!0,xs:4,container:!0,direction:\"row\"},o.a.createElement(fn,{item:!0,xs:6},o.a.createElement(Cn,null)),o.a.createElement(mn,{item:!0,xs:6},o.a.createElement(\"span\",null,\"Transformations Applied\")))),n.filteredColumns.map((function(e,t){var a,r,d,m=-1!==n.primaryKeys.indexOf(e.name);return g&&(a=p[e.name]),b&&(a={support:Pt.yes}),o.a.createElement(yn,{key:e.name,container:!0,direction:\"row\"},o.a.createElement(vn,{item:!0,xs:1,container:!0,direction:\"row\"},o.a.createElement(fn,{item:!0,xs:6,title:m?Re.a.translate(i+\".primaryKeyDescription\").toString():\"\"},o.a.createElement(qt,{color:\"primary\",checked:!!n.selectedColumns.get(e.name),disabled:m,onChange:l.bind(void 0,e)})),o.a.createElement(mn,{item:!0,xs:6,alignItems:\"center\"},o.a.createElement(wn,null,t+1))),o.a.createElement(vn,{item:!0,xs:3,container:!0,direction:\"row\"},o.a.createElement(mn,{item:!0,xs:3},o.a.createElement(rn,null,e.name)),o.a.createElement(Dt.a,{item:!0,xs:5},o.a.createElement(\"span\",null)),o.a.createElement(mn,{item:!0,xs:4},o.a.createElement(rn,null,function(e,t){var n=t.slice().reverse().find((function(t){return t.directive.startsWith(\"rename\")&&t.columnName===e}));return n?n.directive.split(\" \")[2]:e}(e.name,u)))),o.a.createElement(vn,{item:!0,xs:2,container:!0,direction:\"row\"},o.a.createElement(mn,{item:!0,xs:3},o.a.createElement(rn,null,\" \",e.type.toLowerCase())),o.a.createElement(Dt.a,{item:!0,xs:5},o.a.createElement(\"span\",null)),o.a.createElement(mn,{item:!0,xs:4},o.a.createElement(rn,null,e.targetType.toLowerCase()))),o.a.createElement(En,{item:!0,xs:2,container:!0,direction:\"row\"},o.a.createElement(mn,{item:!0,xs:6},o.a.createElement(an,null,o.a.createElement(qt,{checked:e.nullable,disabled:!0}))),o.a.createElement(mn,{item:!0,xs:6},o.a.createElement(on,null,m?\"Primary\":\"--\"))),o.a.createElement(vn,{item:!0,xs:4,container:!0,direction:\"row\"},o.a.createElement(fn,{item:!0,xs:2},!!a&&o.a.createElement(oa,{status:a.support,message:a.suggestion})),o.a.createElement(mn,{item:!0,xs:4},o.a.createElement(ma,{row:e,tinkEnabled:f,currentColumnName:(r=e.name,d=u.filter((function(e){return e.columnName===r&&e.directive.includes(\"rename\")})),d.length>0?d[d.length-1].directive.split(\" \")[2]:r),addColumnsToTransforms:c})),o.a.createElement(mn,{item:!0,xs:6},o.a.createElement(va,{row:e,transforms:u,deleteColumnsFromTransforms:s}))))}))))},ya=n(663),xa=n(617),Sa=n(28),Oa=function(){return(Oa=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ta=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},Ca=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ta(arguments[t]));return e},wa=Object(ya.a)(M.a),Na=Eo((function(e){var t=Ta(Object(r.useReducer)(Lt,At),2),n=t[0],a=t[1],l=function(){return n.selectedReplication===Fe.all?null:n.selectedColumns.toList()};Object(r.useEffect)((function(){a({type:\"setLoading\",payload:!0});var t={namespace:Object(d.d)(),draftId:e.draftId},n={namespace:Object(d.d)()},r={table:e.tableInfo.table,database:e.tableInfo.database};e.tableInfo.schema&&(r.schema=e.tableInfo.schema);var o=e.getReplicatorConfig(),l=!0;o.tables.forEach((function(e){e.table!==r.table||(l=!1)})),l&&(o.tables=Ca(o.tables,[r]));var i={dBTable:r,deltaConfig:o};Sa.Observable.forkJoin([p.a.getTableInfo(t,r),p.a.getTargetTableInfo(n,i)]).subscribe({next:function(t){var n=Ta(t,2),r=n[0],o=n[1],l=r.columns.map((function(e){return Oa(Oa({},e),o.columns.find((function(t){return t.sourceName===e.name})))})),i=function(t){var n={};t.forEach((function(e){n[e.name]=!0}));var a=!1,r={};e.initialSelected&&e.initialSelected.size>0&&e.initialSelected.forEach((function(e){var t=e.get(\"name\");n[t]?r[t]=e:a=!0}));var o=Object(Oe.Map)(r);return a&&e.onSave(e.tableInfo,o.toList()),o}(l);a({type:\"setTableInfo\",payload:{columns:l,primaryKeys:r.primaryKey,selectedColumns:i,filteredColumns:l,selectedReplication:0===i.size?Fe.all:Fe.individual}})},error:function(e){a({type:\"setError\",payload:e})},complete:function(){a({type:\"setLoading\",payload:!1})}})}),[]),Object(r.useEffect)((function(){n.selectedReplication===Fe.all&&c()}),[n.selectedReplication]),Object(r.useEffect)((function(){n.columns.length>0&&0===n.selectedColumns.size&&c()}),[n.columns]),Object(r.useEffect)((function(){Object.values(e.transformations).forEach((function(t){t.tableName===e.tableInfo.table&&a({type:\"setInitialTransformations\",payload:t.columnTransformations})}))}),[]);var i=function(e,t){void 0===t&&(t=300);var n=Ke(Object(r.useState)(e),2),a=n[0],o=n[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e]),a}(n.search);Object(r.useEffect)((function(){var e=n.columns;(\"\"!==i||n.filterErrs.length>0)&&(e=e.filter((function(e){var t=e.name.toLowerCase(),a=i.toLowerCase(),r=-1!==n.filterErrs.indexOf(t),o=-1!==t.indexOf(a);return n.filterErrs.length&&\"\"!==i?r&&o:n.filterErrs.length?r:-1!==t.indexOf(a)}))),a({type:\"setFilteredColumns\",payload:e})}),[i,n.filterErrs]);var c=function(){if(n.selectedColumns.size>n.primaryKeys.length&&n.selectedReplication!==Fe.all){var e={};return n.columns.forEach((function(t){-1!==n.primaryKeys.indexOf(t.name)&&(e[t.name]=Object(Oe.Map)({name:t.name,type:t.type}))})),void a({type:\"setSelectedColumns\",payload:Object(Oe.Map)(e)})}var t={};n.columns.forEach((function(e){t[e.name]=Object(Oe.Map)({name:e.name,type:e.type})})),a({type:\"setSelectedColumns\",payload:Object(Oe.Map)(t)})};Object(r.useEffect)((function(){e.onSave(e.tableInfo,l())}),[n.selectedColumns,n.selectedReplication]);return e.tableInfo?o.a.createElement(Ht,null,o.a.createElement(Kt,null,o.a.createElement(Q.b,{type:Q.a.h4,label:e.tableInfo.table+\" - Mappings, assessments and transformations\"}),o.a.createElement(Qt,null,o.a.createElement(Nn,{onClick:e.toggle},\"Cancel\"),o.a.createElement(xa.a,{onClick:function(){e.saveTransformationsAndColumns(e.tableInfo,{tableName:e.tableInfo.table,columnTransformations:n.transformations},l()),e.toggle()},disabled:function(){if(n.selectedReplication===Fe.individual&&0===n.selectedColumns.size)return!0;var t=e.tableAssessments;return!(t&&(!t||0===Object.keys(t).length))||n.loading}()},\"Save\"))),o.a.createElement(Vt,null,!n.loading&&o.a.createElement(We.a,{sx:{display:\"flex\"}},o.a.createElement($t,null,o.a.createElement(Xt,{value:n.selectedReplication,onChange:function(e){a({type:\"setSelectedReplication\",payload:e.target.value})}},o.a.createElement(ke.a,{value:Fe.all,control:o.a.createElement(Yt,{color:\"primary\"}),label:\"Replicate all available columns\"}),o.a.createElement(ke.a,{value:Fe.individual,control:o.a.createElement(Yt,{color:\"primary\"}),label:\"Select the columns to replicate\"}))),o.a.createElement(Tn,null,o.a.createElement(wa,{loading:e.assessmentLoading,variant:\"outlined\",color:\"primary\",onClick:function(){return e.handleAssessTable(e.tableInfo,n.transformations,l())}},o.a.createElement(Ve.a,null),\" REFRESH\"))),n.loading?o.a.createElement(Zt,null,o.a.createElement(U.a,null)):Ea({state:n,toggleSelectAll:c,toggleSelected:function(e){if(n.selectedReplication!==Fe.all){var t=e.name;n.selectedColumns.get(t)?a({type:\"setSelectedColumns\",payload:n.selectedColumns.delete(t)}):a({type:\"setSelectedColumns\",payload:n.selectedColumns.set(t,Object(Oe.Map)({name:e.name,type:e.type}))})}},I18N_PREFIX:\"features.Replication.Create.Content.SelectColumns\",handleSearch:function(e){a({type:\"setSearch\",payload:e})},addColumnsToTransforms:function(e){return a({type:\"setColumnTransformation\",payload:e})},deleteColumnsFromTransforms:function(e){return a({type:\"removeColumnTransformation\",payload:e})},transforms:n.transformations,tableInfo:e.tableInfo,tableAssessments:e.tableAssessments,handleFilterErrors:function(e){a({type:\"filterErrs\",payload:e})},filterErrs:n.filterErrs,selectedList:l,tinkEnabled:e.tinkEnabled}))):null})),ja=n(99),Ra=n(1477),Pa=n(78);!function(e){e.insert=\"INSERT\",e.update=\"UPDATE\",e.delete=\"DELETE\"}(ha||(ha={}));var _a,Ia=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),ka=function(){return(ka=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},La=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={value:t.props.value},t.handleChange=function(e){var n=e.target.value;t.setState({value:n})},t.handleBlur=function(e){t.onChange(e.target.value)},t.renderInput=function(){return r.createElement(Ra.a,{placeholder:\"Column name\",onChange:t.handleChange,onBlur:t.handleBlur,value:t.state.value,autoFocus:t.props.autofocus,onKeyPress:t.handleKeyPress,onKeyDown:t.handleKeyDown,inputRef:t.props.forwardedRef})},t}return Ia(t,e),t}(Pa.b),Aa=u()((function(e){return ka(ka({},Object(Pa.a)(e)),{disabled:{color:\"\"+e.palette.grey[50]}})}))(La),Da=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ma=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deconstructValues=function(e){return e.value&&0!==e.value.length?e.value:[]},t.constructValues=function(){return t.state.rows.filter((function(e){return t.values[e]&&t.values[e].value})).map((function(e){return t.values[e].value}))},t.renderRow=function(e,n){return r.createElement(Aa,{key:e,value:t.values[e].value,id:e,index:n,onChange:t.editRow,addRow:t.addRow.bind(t,n),removeRow:t.removeRow.bind(t,n),autofocus:t.state.autofocus===e,changeFocus:t.changeFocus,disabled:t.props.disabled,forwardedRef:t.values[e].ref,errors:t.props.errors})},t}return Da(t,e),t.prototype.componentWillReceiveProps=function(){},t}(ja.a),Ua=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ba=function(){return(Ba=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};!function(e){e.all=\"ALL\",e.manual=\"MANUAL\"}(_a||(_a={}));var Fa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={table:Object(m.E)(t.props,\"value\",\"table\")||\"\",schema:Object(m.E)(t.props,\"value\",\"schema\")||\"\",dmlBlacklist:Object(m.E)(t.props,\"value\",\"dmlBlacklist\")||Object(Oe.Set)(),columns:Object(m.E)(t.props,\"value\",\"columns\")||[],selectColumn:(Object(m.E)(t.props,\"value\",\"columns\")||[]).length>0?_a.manual:_a.all},t.constructValue=function(){var e=t.state.selectColumn===_a.all?[]:t.state.columns;t.onChange({table:t.state.table,schema:t.state.schema,dmlBlacklist:t.state.dmlBlacklist,columns:e})},t.handleTableChange=function(e){var n=e.target.value;t.setState({table:n},t.constructValue)},t.handleSchemaChange=function(e){var n=e.target.value;t.setState({schema:n},t.constructValue)},t.toggleDML=function(e){var n,a=t.state.dmlBlacklist;n=a?a.has(e)?a.delete(e):a.add(e):Object(Oe.Set)([e]),t.setState({dmlBlacklist:n},t.constructValue)},t.handleColumnChange=function(e){t.setState({columns:e},t.constructValue)},t.handleSelectColumnChange=function(e){t.setState({selectColumn:e.target.value},t.constructValue)},t.renderInput=function(){var e,n=t.props.classes;return r.createElement(\"div\",null,r.createElement(\"div\",{className:n.inputContainer},r.createElement(Ra.a,{placeholder:\"Table name\",onChange:t.handleTableChange,value:t.state.table,autoFocus:t.props.autofocus,onKeyPress:t.handleKeyPress,onKeyDown:t.handleKeyDown,inputRef:t.props.forwardedRef,className:n.inputBox}),r.createElement(Ra.a,{placeholder:\"Schema name\",onChange:t.handleSchemaChange,value:t.state.schema,onKeyPress:t.handleKeyPress,onKeyDown:t.handleKeyDown,className:n.inputBox}),r.createElement(\"div\",null,r.createElement(ke.a,{control:r.createElement(Te.a,{color:\"primary\",onClick:t.toggleDML.bind(t,ha.insert),checked:!t.state.dmlBlacklist.has(ha.insert),className:n.checkbox}),label:\"Inserts\"})),r.createElement(\"div\",null,r.createElement(ke.a,{control:r.createElement(Te.a,{color:\"primary\",onClick:t.toggleDML.bind(t,ha.update),checked:!t.state.dmlBlacklist.has(ha.update),className:n.checkbox}),label:\"Updates\"})),r.createElement(\"div\",null,r.createElement(ke.a,{control:r.createElement(Te.a,{color:\"primary\",onClick:t.toggleDML.bind(t,ha.delete),checked:!t.state.dmlBlacklist.has(ha.delete),className:n.checkbox}),label:\"Deletes\"}))),r.createElement(\"div\",{className:te()(n.columnsSelectorContainer,(e={},e[n.border]=t.state.selectColumn===_a.manual,e))},r.createElement(\"div\",null,r.createElement(Ae.a,{value:t.state.selectColumn,onChange:t.handleSelectColumnChange,className:n.radioGroup},r.createElement(ke.a,{value:_a.all,control:r.createElement(Le.a,null),label:\"Replicate all columns\"}),r.createElement(ke.a,{value:_a.manual,control:r.createElement(Le.a,null),label:\"Manual entry\"}))),r.createElement(E.a,{condition:t.state.selectColumn===_a.manual},r.createElement(\"div\",null,r.createElement(Q.b,{type:Q.a.h5,label:\"Columns\"}),r.createElement(Ma,{value:t.state.columns,onChange:t.handleColumnChange})))))},t}return Ua(t,e),t.prototype.componentDidMount=function(){this.setState({table:Object(m.E)(this.props,\"value\",\"table\")||\"\",schema:Object(m.E)(this.props,\"value\",\"schema\")||\"\",dmlBlacklist:Object(m.E)(this.props,\"value\",\"dmlBlacklist\")||Object(Oe.Set)(),columns:Object(m.E)(this.props,\"value\",\"columns\")||[],selectColumn:(Object(m.E)(this.props,\"value\",\"columns\")||[]).length>0?_a.manual:_a.all})},t}(Pa.b),za=u()((function(e){return Ba(Ba({},Object(Pa.a)(e)),{root:Ba(Ba({},Object(Pa.a)(e).root),{height:\"initial\"}),disabled:{color:\"\"+e.palette.grey[50]},inputContainer:{display:\"grid\",gridTemplateColumns:\"1fr 1fr 100px 100px 100px\"},inputBox:{marginRight:\"15px\"},checkbox:{\"& label\":{marginBottom:0}},columnsSelectorContainer:{padding:\"5px 0 15px 40px\",width:\"60%\",minWidth:\"500px\",marginBottom:\"15px\"},border:{borderLeft:\"3px solid \"+e.palette.grey[500]},radioGroup:{flexDirection:\"initial\",marginBottom:\"15px\",\"& > label\":{marginRight:\"40px\"}}})}))(Fa),Ga=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Wa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deconstructValues=function(e){return e.value&&0!==e.value.length?e.value:[]},t.constructValues=function(){return t.state.rows.filter((function(e){return t.values[e]&&t.values[e].value})).map((function(e){return t.values[e].value}))},t.renderRow=function(e,n){return r.createElement(za,{key:e,value:t.values[e].value,id:e,index:n,onChange:t.editRow,addRow:t.addRow.bind(t,n),removeRow:t.removeRow.bind(t,n),autofocus:t.state.autofocus===e,changeFocus:t.changeFocus,disabled:t.props.disabled,forwardedRef:t.values[e].ref,errors:t.props.errors})},t}return Ga(t,e),t.prototype.componentWillReceiveProps=function(){},t}(ja.a),Ha=n(614),Va=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},Ka=function(e){var t=e.setDatabase,n=e.value;return o.a.createElement(D.c,{widgetProperty:{label:\"Database name\",name:\"database\",\"widget-type\":\"textbox\",\"widget-attributes\":{placeholder:\"Set database name\"}},pluginProperty:{required:!0,name:\"database\"},value:n,onChange:t})},Qa=Eo(u()((function(){return{root:{marginTop:\"25px\"},tablesInputContainer:{marginTop:\"25px\"},tableHeader:{display:\"grid\",gridTemplateColumns:\"1fr 1fr 390px\",fontWeight:\"bold\"}}}))((function(e){var t=e.classes,n=e.tables,a=e.dmlBlacklist,l=e.columns,i=e.setTables,c=Va(Object(r.useState)(\"\"),2),s=c[0],u=c[1],p=Va(Object(r.useState)([]),2),d=p[0],m=p[1],f=Va(Object(r.useState)(!1),2),g=f[0],b=f[1],v=V(\"replication.transformations.enabled\");function h(){if(s&&0!==s.length){var e=Object(Oe.Map)(),t=Object(Oe.Map)(),n=Object(Oe.Map)();d.forEach((function(a){if(a.table&&0!==a.table.length){var r=Object(Oe.Map)({database:s,table:a.table,schema:a.schema}),o=Object(O.g)(r);e=e.set(o,r),a.dmlBlacklist&&a.dmlBlacklist.size>0&&(n=n.set(o,a.dmlBlacklist)),a.columns&&a.columns.length>0&&(t=t.set(o,Object(Oe.List)(a.columns.map((function(e){return Object(Oe.Map)({name:e})})))))}})),i(e,t,n)}}Object(Ha.a)((function(){v&&h()})),Object(r.useEffect)((function(){var e=[],t=\"\";n.toList().forEach((function(n){var r=Object(O.g)(n);t=n.get(\"database\");var o=l.get(r)?l.get(r).toArray():[];e.push({table:n.get(\"table\"),schema:n.get(\"schema\"),dmlBlacklist:a.get(r),columns:o.map((function(e){return e.get(\"name\")}))})})),u(t),m(e),b(!0)}),[]);var E=0===s.length||0===d.length||0===d.filter((function(e){return e.table.length>0})).length;return g?o.a.createElement(o.a.Fragment,null,o.a.createElement(\"div\",{className:t.root},o.a.createElement(\"div\",null,o.a.createElement(Ka,{value:s,setDatabase:u})),o.a.createElement(\"div\",{className:t.tablesInputContainer},o.a.createElement(Q.b,{type:Q.a.h4,label:\"Tables\"}),o.a.createElement(\"div\",{className:t.tableHeader},o.a.createElement(\"div\",null,\"Table name*\"),o.a.createElement(\"div\",null,\"Schema name\"),o.a.createElement(\"div\",null)),o.a.createElement(Wa,{value:d,onChange:m}))),o.a.createElement(K,{onNext:h,nextDisabled:E})):null}))),Ya=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),qa=function(){return(qa=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ja=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},$a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={tables:[],filteredTables:[],selectedTables:t.props.tables,columns:t.props.columns,dmlBlacklist:t.props.dmlBlacklist,openTable:null,loading:!0,error:null,search:\"\"},t.handleSearchChange=function(e){t.setState({search:e}),t.setFilteredTables(e)},t.setFilteredTables=Ue()((function(e,n){void 0===e&&(e=t.state.search),void 0===n&&(n=t.state.tables);var a=n;e&&e.length>0&&(a=a.filter((function(t){var n=Object(O.i)(t).toLowerCase(),a=e.toLowerCase();return-1!==n.indexOf(a)}))),t.setState({filteredTables:a})}),300),t.removeNonExistingTable=function(e){var n={};e.forEach((function(e){var t=Object(O.g)(e);n[t]=!0}));var a=t.props.tables,r=t.props.columns,o=t.props.dmlBlacklist,l=!1;t.props.tables.toList().forEach((function(e){var t=Object(O.g)(e);n[t]||(a=a.delete(t),r=r.delete(t),o=o.delete(t),l=!0)})),l&&(t.props.setTables(a,r,o),t.setState({selectedTables:a,columns:r,dmlBlacklist:o}))},t.fetchTables=function(){t.setState({loading:!0});var e={namespace:Object(d.d)(),draftId:t.props.draftId};p.a.listTables(e).subscribe((function(e){t.removeNonExistingTable(e.tables);var n=we()(e.tables,[\"table\"],[\"asc\"]);t.setState({tables:n,loading:!1},t.setFilteredTables)}),(function(e){console.log(\"error\",e),t.setState({error:Object(m.o)(e),loading:!1})}))},t.toggleSelected=function(e){var n=Object(O.g)(e);t.state.selectedTables.get(n)?t.setState({selectedTables:t.state.selectedTables.delete(n)}):t.setState({selectedTables:t.state.selectedTables.set(n,Object(Oe.Map)(e))})},t.toggleSelectAll=function(){if(t.state.selectedTables&&t.state.selectedTables.size>0)t.setState({selectedTables:t.state.selectedTables.clear()});else{var e={};t.state.filteredTables.forEach((function(t){var n=Object(O.g)(t);e[n]=Object(Oe.Map)(t)})),t.setState({selectedTables:Object(Oe.Map)(e)})}},t.openTable=function(e){void 0===e&&(e=null),t.setState({openTable:e})},t.getInitialSelected=function(){return t.state.openTable?t.state.columns.get(Object(O.g)(t.state.openTable)):null},t.onColumnsSelection=function(e,n){var a=Object(O.g)(e),r=t.state.columns.set(a,n);n&&0!==n.size||(r=r.delete(a));var o=t.state.selectedTables.set(a,Object(Oe.Map)(e));t.setState({columns:r,selectedTables:o})},t.dmlSelectAllIndicator=function(e){var n=t.state.filteredTables.map((function(n){var a=Object(O.g)(n),r=t.state.dmlBlacklist.get(a);return!!r&&r.has(e)})),a=Object(Oe.Set)(n);return 2===a.size?0:a.has(!1)?1:-1},t.toggleAllDML=function(e){var n=t.state.dmlBlacklist;-1!==t.dmlSelectAllIndicator(e)?t.state.filteredTables.forEach((function(t){var a=Object(O.g)(t),r=n.get(a);r=r?r.add(e):Object(Oe.Set)([e]),n=n.set(a,r)})):t.state.filteredTables.forEach((function(t){var a=Object(O.g)(t),r=n.get(a);r=r?r.remove(e):Object(Oe.Set)(),n=n.set(a,r)})),t.setState({dmlBlacklist:n})},t.toggleDML=function(e,n){var a,r=Object(O.g)(e),o=t.state.dmlBlacklist.get(r);a=o?o.has(n)?o.delete(n):o.add(n):Object(Oe.Set)([n]);var l=t.state.selectedTables.set(r,Object(Oe.Map)(e));t.setState({dmlBlacklist:t.state.dmlBlacklist.set(r,a),selectedTables:l})},t.renderError=function(){return t.state.error?r.createElement(r.Fragment,null,r.createElement(\"br\",null),r.createElement(\"div\",{className:\"text-danger\"},r.createElement(Q.b,{type:Q.a.h5,label:\"Error\"}),r.createElement(\"span\",null,t.state.error),Object(m.C)(t.state.error)&&r.createElement(\"div\",null,r.createElement(\"span\",null,'Please manually put in the correct database name and table name below, or go back to \"Configure source\" tab and put in the correct \"Database Name\".'))),r.createElement(Qa,null)):null},t.handleSave=function(){t.props.setTables(t.state.selectedTables,t.state.columns,t.state.dmlBlacklist,t.props.useReplicationTransformation)},t.isTableSelected=function(e){var n=t.state.openTable;return!!n&&(e.table===n.table&&e.database===n.database)},t.isNextDisabled=function(){return t.state.selectedTables.filter(t.isTableSelectionInvalid).size>0},t.isTableSelectionInvalid=function(e){var n=Object(O.g)(e),a=t.state.dmlBlacklist.get(n);return a&&3===a.size},t.renderColumns=function(){var e=Ge;return t.props.useReplicationTransformation&&(e=Na),r.createElement(e,{tableInfo:t.state.openTable,tableAssessments:t.props.tableAssessments[t.state.openTable.table],initialSelected:t.getInitialSelected(),toggle:t.openTable.bind(t,null),onSave:t.onColumnsSelection,assessmentLoading:t.props.assessmentLoading,transformations:t.props.transformations,saveTransformationsAndColumns:t.props.saveTransformationsAndColumns,assessTable:t.props.handleAssessTable,isTinkEnabled:t.props.tinkEnabled})},t.renderContent=function(){if(t.state.error)return null;var e=t.props.classes;return r.createElement(r.Fragment,null,r.createElement(\"div\",{className:\"grid-wrapper \"+e.gridWrapper},r.createElement(\"div\",{className:\"grid grid-container grid-compact\"},r.createElement(\"div\",{className:\"grid-header\"},r.createElement(\"div\",{className:\"grid-row grouping-row\"},r.createElement(\"div\",{className:e.tableHeaderEvents+\" \"+e.groupHeader},r.createElement(\"hr\",{className:e.groupLine}),r.createElement(\"div\",{className:e.groupText},\"Events to replicate\"))),r.createElement(\"div\",{className:\"grid-row\"},r.createElement(\"div\",null,r.createElement(Te.a,{checked:t.state.selectedTables.size===t.state.tables.length,indeterminate:t.state.selectedTables.size<t.state.tables.length&&t.state.selectedTables.size>0,onChange:t.toggleSelectAll,color:\"primary\",className:e.checkbox})),r.createElement(\"div\",null,\"Table name\"),r.createElement(\"div\",{className:e.count},\"Columns to replicate\"),r.createElement(\"div\",null),r.createElement(\"div\",null,r.createElement(Te.a,{color:\"primary\",className:e.checkbox,checked:1===t.dmlSelectAllIndicator(ha.insert),indeterminate:0===t.dmlSelectAllIndicator(ha.insert),onChange:t.toggleAllDML.bind(t,ha.insert)})),r.createElement(\"div\",null,r.createElement(Te.a,{color:\"primary\",className:e.checkbox,checked:1===t.dmlSelectAllIndicator(ha.update),indeterminate:0===t.dmlSelectAllIndicator(ha.update),onChange:t.toggleAllDML.bind(t,ha.update)})),r.createElement(\"div\",null,r.createElement(Te.a,{color:\"primary\",className:e.checkbox,checked:1===t.dmlSelectAllIndicator(ha.delete),indeterminate:0===t.dmlSelectAllIndicator(ha.delete),onChange:t.toggleAllDML.bind(t,ha.delete)})))),r.createElement(\"div\",{className:\"grid-body\"},t.state.filteredTables.map((function(n,a){var o,l,i,c,s=Object(O.g)(n),u=!!t.state.selectedTables.get(s),p=t.state.columns.get(s),d=t.state.dmlBlacklist.get(s)||Object(Oe.Set)(),m=u&&t.isTableSelectionInvalid(n),f=m?\"Select events to replicate\":null;return r.createElement(\"div\",{key:\"\"+s+a,className:te()(\"grid-row\",{active:t.isTableSelected(n)})},r.createElement(\"div\",null,r.createElement(Te.a,{checked:u,onChange:t.toggleSelected.bind(t,n),color:\"primary\",className:e.checkbox})),r.createElement(\"div\",{onClick:t.openTable.bind(t,n),className:te()(e.pointer,(o={},o[e.invalidTable]=m,o)),title:f},Object(O.i)(n)),r.createElement(\"div\",{className:e.pointer+\" \"+e.count,onClick:t.openTable.bind(t,n)},r.createElement(\"span\",{className:e.openOverviewLink},p&&p.size>0?p.size:\"All\")),r.createElement(\"div\",null),r.createElement(\"div\",null,r.createElement(ke.a,{className:e.checkboxLabel,control:r.createElement(Te.a,{color:\"primary\",onClick:t.toggleDML.bind(t,n,ha.insert),checked:!d.has(ha.insert),className:te()(e.checkbox,(l={},l[e.unselectedTable]=!u,l))}),label:\"Inserts\"})),r.createElement(\"div\",null,r.createElement(ke.a,{className:e.checkboxLabel,control:r.createElement(Te.a,{color:\"primary\",onClick:t.toggleDML.bind(t,n,ha.update),checked:!d.has(ha.update),className:te()(e.checkbox,(i={},i[e.unselectedTable]=!u,i))}),label:\"Updates\"})),r.createElement(\"div\",null,r.createElement(ke.a,{className:e.checkboxLabel,control:r.createElement(Te.a,{color:\"primary\",onClick:t.toggleDML.bind(t,n,ha.delete),checked:!d.has(ha.delete),className:te()(e.checkbox,(c={},c[e.unselectedTable]=!u,c))}),label:\"Deletes\"})))}))))),r.createElement(K,{onNext:t.handleSave,onPrevious:t.handleSave,nextDisabled:t.isNextDisabled()}))},t}return Ya(t,e),t.prototype.componentDidMount=function(){this.fetchTables()},t.prototype.componentWillUnmount=function(){this.handleSave()},t.prototype.render=function(){if(this.state.loading)return r.createElement(Ne.a,null);var e=this.props.classes;return r.createElement(r.Fragment,null,r.createElement(\"div\",{className:e.root},r.createElement(Q.b,{type:Q.a.h3,label:\"Select tables, columns, and events to replicate\"}),r.createElement(\"div\",{className:e.subHeadingContainer},r.createElement(\"div\",{className:e.subHeadingText},this.state.selectedTables.size,\" of \",this.state.tables.length,\" tables selected\"),r.createElement(\"div\",null,r.createElement(De,{value:this.state.search,onChange:this.handleSearchChange,placeholder:\"Search tables by name\"}))),this.renderError(),this.renderContent()),!!this.state.openTable&&this.renderColumns())},t}(r.PureComponent),Xa=Eo(u()((function(e){return{root:{padding:\"15px 40px\"},gridWrapper:{height:\"calc(100% - 110px - 30px - 35px - 15px)\",\"& > .grid.grid-container\":{maxHeight:\"100%\",\"& .grid-header\":{zIndex:4,\"& .grid-row.grouping-row\":{borderBottom:0,backgroundColor:e.palette.white[50],fontWeight:400},\"& .grid-row:not(.grouping-row)\":{alignItems:\"flex-end\",paddingTop:\"5px\",paddingBottom:\"5px\"}},\"& .grid-row\":{gridTemplateColumns:\"40px 1fr 100px 100px 120px 120px 120px\",alignItems:\"center\",\"&:hover $openOverviewLink\":{color:e.palette.blue[200]},\"&.active\":{backgroundColor:e.palette.grey[700],\"& $openOverviewLink\":{color:e.palette.blue[200]}}},'&.grid-compact > div[class^=\"grid-\"] .grid-row > div':{paddingTop:0,paddingBottom:0}}},groupHeader:{position:\"relative\",height:\"100%\",\"& > *\":{position:\"absolute\",transform:\"translate(-50%, -50%)\",left:\"50%\",top:\"50%\"}},groupLine:{margin:0,width:\"100%\",borderWidth:\"2px\",borderColor:e.palette.grey[400]},groupText:{backgroundColor:e.palette.white[50],paddingLeft:\"15px\",paddingRight:\"15px\",width:\"max-content\",color:e.palette.grey[100]},openOverviewLink:{\"&:hover\":{textDecoration:\"underline\",color:e.palette.blue[200]}},tableHeaderEvents:{gridColumn:\"5 / span 3\",textAlign:\"center\"},count:{textAlign:\"right\",lineHeight:1.2},subHeadingContainer:{display:\"flex\",alignItems:\"center\",marginBottom:\"15px\"},subHeadingText:{color:e.palette.grey[100],marginRight:\"25px\"},checkbox:{padding:0},checkboxLabel:{marginLeft:0,marginBottom:0,\"& $checkbox\":{marginRight:\"10px\"}},invalidTable:{color:e.palette.red[100]},pointer:{cursor:\"pointer\"},unselectedTable:{opacity:.4}}}))($a)),Za=function(e){e.children;var t=Ja(e,[\"children\"]);return r.createElement(Xa,qa({},qa({useReplicationTransformation:V(\"replication.transformations.enabled\")},t)))},er=Eo((function(e){var t=e.targetPluginInfo,n=e.targetPluginWidget,a=e.targetConfig,o=e.setTargetConfig,l=e.setTargetPluginInfo,i=e.setTargetPluginWidget;return r.createElement(xe,{pluginType:N.b.target,pluginInfo:t,pluginWidget:n,pluginConfig:a,setPluginInfo:l,setPluginWidget:i,setPluginConfig:o})})),tr=n(370),nr=n.n(tr),ar=function(){return(ar=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},rr=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};function or(e,t){return Object(m.E)(t,\"display-name\")||Object(m.E)(e,\"name\")}var lr=Eo(u()((function(e){return{root:{position:\"absolute\",top:\"50px\",bottom:\"54px\",left:0,right:0,background:e.palette.white[50],zIndex:10},header:{display:\"grid\",gridTemplateColumns:\"75px 1fr\",height:\"60px\",backgroundColor:e.palette.grey[700],borderBottom:\"1px solid \"+e.palette.grey[400],alignContent:\"center\",alignItems:\"center\",\"& > div\":{padding:\"0 15px\"}},headerPluginTypes:{fontWeight:500,color:e.palette.grey[100],\"& > span\":{marginRight:\"5px\"}},backButton:{color:e.palette.blue[100],cursor:\"pointer\",\"& > span:first-child\":{marginRight:\"5px\"},\"&:hover > span:last-child\":{textDecoration:\"underline\"}},separator:{marginLeft:\"15px\"},columnAction:{color:e.palette.blue[100],cursor:\"pointer\",\"&:hover\":{textDecoration:\"underline\"}},actionsSeparator:{marginLeft:\"5px\",marginRight:\"5px\"},mappings:{padding:\"10px 25px\",height:\"calc(100% - 60px)\",\"& .grid-wrapper\":{height:\"100%\",\"& .grid.grid-container.grid-compact\":{maxHeight:\"100%\",\"& .section-heading\":{fontWeight:\"bold\",lineHeight:1.2},\"& .grid-header\":{\"& .grid-row\":{minHeight:0,\"&:first-child\":{borderBottom:0,\"& > div\":{paddingTop:\"5px\"}},\"&:last-child > div\":{paddingBottom:\"5px\"},\"& > div\":{paddingTop:0,paddingBottom:0}}},\"& .grid-row\":{gridTemplateColumns:\"2fr 2fr 125px 25px 125px 3fr 150px 120px\",\"& > div:first-child:not($headerDataTypes)\":{paddingLeft:\"25px\"}}}}},headerColumnName:{gridColumn:\"1 / span 2\"},headerDataTypes:{gridColumn:\"3 / span 3\"}}}))((function(e){var t=e.classes,n=e.tableInfo,a=e.onClose,o=e.draftId,l=e.name,i=e.sourcePluginInfo,c=e.sourcePluginWidget,s=e.targetPluginInfo,u=e.targetPluginWidget,m=e.columns,f=e.setColumns,g=e.saveDraft,b=rr(r.useState([]),2),v=b[0],h=b[1],y=rr(r.useState(null),2),x=y[0],S=y[1],T=rr(r.useState(!0),2),C=T[0],w=T[1],N=rr(r.useState(!1),2),j=N[0],R=N[1];function P(e){var t={namespace:Object(d.d)(),draftId:o},a={database:n.database,table:n.table};n.schema&&(a.schema=n.schema),p.a.assessTable(t,a).subscribe((function(t){var a=nr()(t.columns,[function(e){switch(e.support){case Pt.no:return 0;case Pt.partial:return 1;default:return 2}}]),r=Object(O.g)(n),o=e||m.get(r),l={};o&&o.forEach((function(e){var t=e.get(\"name\");l[t]=e.get(\"suppressWarning\")||!1}));var i=a.map((function(e){return ar(ar({},e),{suppressWarning:l[e.sourceName]||!1})}));h(i),w(!1)}),(function(e){S(e),w(!1)}))}function _(e){var t,a=Object(O.g)(n),r=m.get(a);if(r&&r.size>0)t=r.filter((function(t){return!(t.get(\"name\")===e.sourceName&&t.get(\"type\")===e.sourceType)}));else{var o=v.filter((function(t){return!(t.sourceName===e.sourceName&&t.sourceType===e.sourceType)})).map((function(e){return Object(Oe.Map)({name:e.sourceName,type:e.sourceType})}));t=Object(Oe.List)(o)}f(m.set(a,t),(function(){R(!0),w(!0),g().subscribe(P)}))}function I(e){var t=this,a=Object(O.g)(n),r=m.get(a),o=r;r&&0!==r.size||(o=Object(Oe.List)(v.map((function(e){return Object(Oe.Map)({name:e.sourceName,type:e.sourceType})})))),o=o.map((function(t){var n=t;return t.get(\"name\")===e.sourceName&&(n=n.set(\"suppressWarning\",!0)),n})),f(m.set(a,o),(function(){R(!0),w(!0),g().subscribe(P.bind(t,o))}))}r.useEffect(P,[]);var k=or(i,c),L=or(s,u);return r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.header},r.createElement(\"div\",{className:t.backButtonContainer},r.createElement(\"span\",{className:t.backButton,onClick:a.bind(null,j)},r.createElement(\"span\",null,\"«\"),r.createElement(\"span\",null,\"Back\")),r.createElement(\"span\",{className:t.separator},\"|\")),r.createElement(\"div\",null,r.createElement(\"div\",{className:t.headerPluginTypes},r.createElement(\"span\",null,\"Source: \",k),r.createElement(\"span\",null,\">\"),r.createElement(\"span\",null,\"Target: \",L)),r.createElement(Q.b,{type:Q.a.h4,label:l}))),r.createElement(E.a,{condition:x},r.createElement(\"div\",{className:\"text-danger\"},JSON.stringify(x,null,2))),r.createElement(E.a,{condition:C},r.createElement(\"div\",{className:\"text-center\"},r.createElement(\"br\",null),r.createElement(U.a,null))),r.createElement(E.a,{condition:!x&&!C},r.createElement(\"div\",{className:t.mappings},r.createElement(\"div\",{className:\"grid-wrapper\"},r.createElement(\"div\",{className:\"grid grid-container grid-compact\"},r.createElement(\"div\",{className:\"grid-row section-heading\"},r.createElement(\"div\",null,r.createElement(\"div\",null,\"Source\"),r.createElement(\"div\",null,\"'\",n.table,\"'\")),r.createElement(\"div\",null,r.createElement(\"div\",null,\"Target\"),r.createElement(\"div\",null,\"'\",n.table,\"'\"))),r.createElement(\"div\",{className:\"grid-header\"},r.createElement(\"div\",{className:\"grid-row\"},r.createElement(\"div\",{className:t.headerColumnName},\"Column name\"),r.createElement(\"div\",{className:t.headerDataTypes},\"Data type\")),r.createElement(\"div\",{className:\"grid-row\"},r.createElement(\"div\",null,\"Source\"),r.createElement(\"div\",null,\"Target\"),r.createElement(\"div\",null,\"Source\"),r.createElement(\"div\",null,\">\"),r.createElement(\"div\",null,\"Target\"),r.createElement(\"div\",null),r.createElement(\"div\",null,\"Supported\"),r.createElement(\"div\",null))),r.createElement(\"div\",{className:\"grid-body\"},v.map((function(e){return r.createElement(\"div\",{className:\"grid-row\",key:e.sourceName},r.createElement(\"div\",null,e.sourceName),r.createElement(\"div\",null,e.targetName),r.createElement(\"div\",{className:t.source},e.sourceType),r.createElement(\"div\",null,\">\"),r.createElement(\"div\",null,e.targetType),r.createElement(\"div\",null),r.createElement(\"div\",null,r.createElement(Gn,{columnRow:e})),r.createElement(\"div\",null,r.createElement(E.a,{condition:!(e.support===Pt.partial&&e.suppressWarning)},r.createElement(E.a,{condition:e.support===Pt.partial},r.createElement(\"span\",{className:t.columnAction,onClick:I.bind(null,e)},\"Ignore\"),r.createElement(\"span\",{className:t.actionsSeparator},\"|\")),r.createElement(E.a,{condition:e.support!==Pt.yes},r.createElement(\"span\",{className:t.columnAction,onClick:_.bind(null,e)},\"Remove\"))),r.createElement(E.a,{condition:e.support===Pt.partial&&e.suppressWarning},r.createElement(\"span\",null,\"Ignored\"))))}))))))))}))),ir=n(246),cr=n(247),sr=n(200),ur=n(75),pr=n(248),dr=u()((function(e){return{mappingButton:{color:e.palette.blue[200],cursor:\"pointer\",\"&:hover\":{textDecoration:\"underline\"}}}}))((function(e){var t=e.classes,n=e.onClick;return o.a.createElement(\"span\",{className:t.mappingButton,onClick:n},\"View mappings\")})),mr=u()((function(e){return{text:{marginBottom:\"10px\",color:e.palette.grey[100]},noTablesText:{fontWeight:600,padding:\"5px 7px\",borderBottom:\"1px solid \"+e.palette.grey[500]},errorBorder:{borderColor:e.palette.red[100]}}}))((function(e){var t=e.classes,n=e.tables,a=e.setOpenTable,o=0===n.length?null:{gridRow:t.errorBorder};return r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.text},n.length,\" tables have been assessed with schema issues\"),r.createElement(ir.a,{columnTemplate:\"150px 150px 5fr 150px 150px 150px 2fr\"},r.createElement(cr.a,null,r.createElement(sr.a,{classes:o},r.createElement(ur.a,null,\"Name\"),r.createElement(ur.a,{textAlign:\"right\"},\"Number of columns\"),r.createElement(ur.a,null),r.createElement(ur.a,{textAlign:\"right\"},\"Data type issues\"),r.createElement(ur.a,{textAlign:\"right\"},\"Partially supported\"),r.createElement(ur.a,{textAlign:\"right\"},\"Not supported\"),r.createElement(ur.a,null))),r.createElement(pr.a,null,n.map((function(e){var t=Object(O.i)(e);return r.createElement(sr.a,{key:e.database+\"-\"+e.table,classes:o},r.createElement(ur.a,null,t),r.createElement(ur.a,{textAlign:\"right\"},e.numColumns),r.createElement(ur.a,null),r.createElement(ur.a,{textAlign:\"right\"},e.numColumnsPartiallySupported+e.numColumnsNotSupported),r.createElement(ur.a,{textAlign:\"right\"},e.numColumnsPartiallySupported),r.createElement(ur.a,{textAlign:\"right\"},e.numColumnsNotSupported),r.createElement(ur.a,{textAlign:\"right\"},r.createElement(dr,{onClick:function(){return a(e)}})))})),r.createElement(E.a,{condition:0===n.length},r.createElement(\"div\",{className:t.noTablesText},\"The system hasn't found any tables with schema issues\")))))})),fr=u()((function(e){return{text:{marginBottom:\"10px\",color:e.palette.grey[100]}}}))((function(e){var t=e.classes,n=e.tables,a=e.setOpenTable;return 0===n.length?null:r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.text},n.length,\" tables have been assessed with no schema issues\"),r.createElement(ir.a,{columnTemplate:\"150px 150px 1fr\"},r.createElement(cr.a,null,r.createElement(sr.a,null,r.createElement(ur.a,null,\"Name\"),r.createElement(ur.a,{textAlign:\"right\"},\"Number of columns\"),r.createElement(ur.a,null))),r.createElement(pr.a,null,n.map((function(e){var t=Object(O.i)(e);return r.createElement(sr.a,{key:e.database+\"-\"+e.table},r.createElement(ur.a,null,t),r.createElement(ur.a,{textAlign:\"right\"},e.numColumns),r.createElement(ur.a,{textAlign:\"right\"},r.createElement(dr,{onClick:function(){return a(e)}})))})))))})),gr=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},br=Eo(u()((function(){return{tableContainer:{marginBottom:\"50px\"}}}))((function(e){var t=e.classes,n=e.tables,a=e.assessmentTables,l=e.runAssessment,i=gr(o.a.useState(null),2),c=i[0],s=i[1],u=gr(o.a.useState([]),2),p=u[0],d=u[1],m=gr(o.a.useState([]),2),f=m[0],g=m[1],b=gr(o.a.useState(0),2),v=b[0],h=b[1];return Object(r.useEffect)((function(){var e=[],t=[],r=n;a.forEach((function(n){var a=Object(O.g)(n);r.get(a)&&(r=r.remove(a)),0===n.numColumnsPartiallySupported&&0===n.numColumnsNotSupported?t.push(n):e.push(n)})),r.size>0&&h(r.size),d(e),g(t)}),[a]),o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{condition:v>0},o.a.createElement(\"div\",null,\"There\",\" \",1===v?\"is \"+v+\" table\":\"are \"+v+\" tables\",\" \",\"that cannot be assessed. Please check the Connectivity issues tab.\")),o.a.createElement(E.a,{condition:!(v>0&&0===p.length)},o.a.createElement(\"div\",{className:t.tableContainer},o.a.createElement(mr,{tables:p,setOpenTable:s}))),o.a.createElement(\"div\",{className:t.tableContainer},o.a.createElement(fr,{tables:f,setOpenTable:s})),o.a.createElement(E.a,{condition:c},o.a.createElement(lr,{tableInfo:c,onClose:function(e){s(null),e&&l()}})))})));function vr(e){return{root:{height:\"100%\"},text:{color:e.palette.grey[100],marginBottom:\"10px\"},gridWrapper:{height:\"calc(100% - 30px)\",\"& .grid.grid-container.grid-compact\":{maxHeight:\"100%\",\"& .grid-row\":{gridTemplateColumns:\"1fr 2fr 1fr 1fr\",gridColumnGap:\"50px\"}}}}}var hr,Er,yr=u()((function(e){return vr(e)}))((function(e){var t=e.classes,n=e.connectivity;return 0===n.length?r.createElement(\"div\",null,\"No connectivity issue\"):r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.text},\"Address the following connectivity issues\"),r.createElement(\"div\",{className:\"grid-wrapper \"+t.gridWrapper},r.createElement(\"div\",{className:\"grid grid-container grid-compact\"},r.createElement(\"div\",{className:\"grid-header\"},r.createElement(\"div\",{className:\"grid-row\"},r.createElement(\"div\",null,\"Issue name\"),r.createElement(\"div\",null,\"Description\"),r.createElement(\"div\",null,\"Suggestion\"),r.createElement(\"div\",null,\"Impact\"))),r.createElement(\"div\",{className:\"grid-body\"},n.map((function(e,t){return r.createElement(\"div\",{key:\"\"+e.name+t,className:\"grid-row\"},r.createElement(\"div\",null,e.name),r.createElement(\"div\",null,e.description||\"--\"),r.createElement(\"div\",null,e.suggestion||\"--\"),r.createElement(\"div\",null,e.impact||\"--\"))}))))))})),xr=u()((function(e){return vr(e)}))((function(e){var t=e.classes,n=e.features;return 0===n.length?r.createElement(\"div\",null,\"No missing features\"):r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.text},\"Address the following missing features\"),r.createElement(\"div\",{className:\"grid-wrapper \"+t.gridWrapper},r.createElement(\"div\",{className:\"grid grid-container grid-compact\"},r.createElement(\"div\",{className:\"grid-header\"},r.createElement(\"div\",{className:\"grid-row\"},r.createElement(\"div\",null,\"Issue name\"),r.createElement(\"div\",null,\"Description\"),r.createElement(\"div\",null,\"Suggestion\"),r.createElement(\"div\",null,\"Impact\"))),r.createElement(\"div\",{className:\"grid-body\"},n.map((function(e,t){return r.createElement(\"div\",{key:\"\"+e.name+t,className:\"grid-row\"},r.createElement(\"div\",null,e.name),r.createElement(\"div\",null,e.description||\"--\"),r.createElement(\"div\",null,e.suggestion||\"--\"),r.createElement(\"div\",null,e.impact||\"--\"))}))))))})),Sr=n(1977),Or=n.n(Sr),Tr=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};!function(e){e.tables=\"tables\",e.features=\"features\",e.connectivity=\"connectivity\"}(hr||(hr={})),function(e){e.error=\"ERROR\",e.warning=\"WARNING\"}(Er||(Er={}));for(var Cr=Eo(u()((function(e){return{root:{padding:\"10px 40px\"},title:{marginBottom:\"5px\"},heading:{display:\"grid\",gridTemplateColumns:\"1fr 150px\",\"& > div:last-child\":{textAlign:\"right\",paddingTop:\"10px\"}},subHeading:{color:e.palette.grey[100]},btnText:{marginRight:\"5px\"},headerLinks:{marginBottom:\"20px\",marginTop:\"20px\"},link:{fontSize:\"16px\",marginRight:\"75px\",cursor:\"pointer\",color:e.palette.grey[100],\"&:not($active):hover\":{borderBottom:\"2px solid \"+e.palette.grey[300]}},active:{fontWeight:600,color:e.palette.grey[50],borderBottom:\"5px solid \"+e.palette.grey[300]},contentContainer:{height:\"calc(100% - 27px - 87px - 110px)\"},schemaContentContainer:{minHeight:\"calc(100% - 27px - 87px - 110px)\"}}}))((function(e){var t,n,a,l,i=e.classes,c=e.draftId,s=Tr(Object(r.useState)(!0),2),u=s[0],f=s[1],g=Tr(Object(r.useState)(null),2),b=g[0],v=g[1],h=Tr(Object(r.useState)(0),2),E=h[0],y=h[1],x=Tr(Object(r.useState)(0),2),S=x[0],O=x[1],T=Tr(Object(r.useState)(hr.tables),2),C=T[0],w=T[1],N=Tr(Object(r.useState)({tables:[],features:[],connectivity:[]}),2),j=N[0],R=N[1];function P(){f(!0),v(null);var e={namespace:Object(d.d)(),draftId:c};p.a.assessPipeline(e).subscribe((function(e){var t=0;e.tables.forEach((function(e){0===e.numColumnsPartiallySupported&&0===e.numColumnsNotSupported||t++}));var n=e.features.filter((function(e){return e.severity===Er.error})).length;O(n),y(t),R(e),f(!1)}),(function(e){v(Object(m.o)(e)),f(!1)}))}return o.a.useEffect(P,[]),u?o.a.createElement(Ne.a,null):o.a.createElement(\"div\",{className:i.root},o.a.createElement(\"div\",{className:i.heading},o.a.createElement(\"div\",null,o.a.createElement(Q.b,{type:Q.a.h4,label:\"Review assessment\",className:i.title}),o.a.createElement(\"div\",{className:i.subHeading},\"Resolve all issues to continue\")),o.a.createElement(\"div\",null,o.a.createElement(M.a,{color:\"primary\",onClick:P},o.a.createElement(\"span\",{className:i.btnText},\"Refresh\"),o.a.createElement(Or.a,null)))),b&&o.a.createElement(o.a.Fragment,null,o.a.createElement(\"br\",null),o.a.createElement(\"div\",{className:\"text-danger\"},o.a.createElement(Q.b,{type:Q.a.h5,label:\"Error\"}),o.a.createElement(\"span\",null,b))),!u&&!b&&o.a.createElement(o.a.Fragment,null,o.a.createElement(\"div\",{className:i.headerLinks},o.a.createElement(\"span\",{className:te()(i.link,(t={},t[i.active]=C===hr.tables,t)),onClick:function(){return w(hr.tables)}},\"Schema issues (\",E,\")\"),o.a.createElement(\"span\",{className:te()(i.link,(n={},n[i.active]=C===hr.features,n)),onClick:function(){return w(hr.features)}},\"Missing features (\",j.features.length,\")\"),o.a.createElement(\"span\",{className:te()(i.link,(a={},a[i.active]=C===hr.connectivity,a)),onClick:function(){return w(hr.connectivity)}},\"Connectivity issues (\",j.connectivity.length,\")\")),o.a.createElement(\"div\",{className:te()((l={},l[i.contentContainer]=C!==hr.tables,l[i.schemaContentContainer]=C===hr.tables,l))},C===hr.tables&&o.a.createElement(br,{assessmentTables:j.tables,runAssessment:P}),C===hr.features&&o.a.createElement(xr,{features:j.features}),C===hr.connectivity&&o.a.createElement(yr,{connectivity:j.connectivity}))),o.a.createElement(K,{nextDisabled:!b&&E+S+j.connectivity.length!==0}))}))),wr=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},Nr=function(e){var t=e.onChange,n=e.value;return o.a.createElement(D.c,{widgetProperty:{label:\"Number of tasks\",name:\"numInstance\",\"widget-type\":\"number\",\"widget-attributes\":{min:1}},pluginProperty:{required:!0,name:\"numInstance\",description:\"The tables in a replication job are evenly distributed amongst all the tasks. Set this to a higher number to distribute the load amongst a larger number of tasks, thereby increasing the parallelism of the replication job. This value cannot be changed after the job is created.\"},value:n.toString(),onChange:function(e){t(parseInt(e,10))}})},jr=[{value:1,label:\"< 1 GB / hr\"}],Rr=1;Rr<10;Rr++){var Pr=10*Rr+1,_r=10*(Rr+1);jr.push({value:2*Rr,label:Pr+\" - \"+_r+\" GB / hr\"})}var Ir,kr=function(e){var t=e.onChange,n=e.value,a={label:\"Number of tasks\",name:\"numInstance\",\"widget-type\":\"select\",\"widget-attributes\":{options:jr}};return o.a.createElement(D.c,{widgetProperty:a,pluginProperty:{required:!1,name:\"dataAmount\"},value:n.toString(),onChange:t,hideLabel:!0})},Lr=\"Set number of tasks manually\",Ar=\"Calculate number of tasks based on data\",Dr=Eo(u()((function(){return{root:{padding:\"30px 40px\"},taskSection:{marginBottom:\"35px\"},numInstances:{width:\"200px\",marginLeft:\"25px\"},dataAmountContainer:{padding:\"0 25px\"},dataAmountSelector:{marginTop:\"15px\",width:\"200px\"},radioGroup:{flexDirection:\"initial\",marginBottom:\"5px\",\"& > label\":{marginRight:\"40px\"}}}}))((function(e){var t=e.classes,n=e.numInstances,a=e.setAdvanced,l=wr(Object(r.useState)(n||1),2),i=l[0],c=l[1],s=wr(Object(r.useState)(Ar),2),u=s[0],p=s[1],d=wr(Object(r.useState)(1),2),m=d[0],f=d[1],g=Object(r.useRef)(i);function b(){a(g.current)}return Object(r.useEffect)((function(){var e=function(){var e=n||1,t=jr.find((function(t){return t.value===e}));if(t)return f(t.value),Ar;return Lr}();p(e)}),[]),Object(r.useEffect)((function(){g.current=function(){var e=i;u===Ar&&(e=m);return e}()}),[i,u,m]),Object(r.useEffect)((function(){return function(){b()}}),[]),o.a.createElement(\"div\",{className:t.root},o.a.createElement(Q.b,{type:Q.a.h3,label:\"Configure advanced properties\"}),o.a.createElement(\"br\",null),o.a.createElement(\"div\",{className:t.taskSection},o.a.createElement(Q.b,{type:Q.a.h4,label:\"Tasks\"}),o.a.createElement(\"div\",{className:t.numTasksRadio},o.a.createElement(Ae.a,{value:u,onChange:function(e){p(e.target.value)},className:t.radioGroup},o.a.createElement(ke.a,{value:Ar,control:o.a.createElement(Le.a,{color:\"primary\"}),label:Ar}),o.a.createElement(ke.a,{value:Lr,control:o.a.createElement(Le.a,{color:\"primary\"}),label:Lr}))),o.a.createElement(E.a,{condition:u===Lr},o.a.createElement(\"div\",{className:t.numInstances},o.a.createElement(Nr,{value:i,onChange:c}))),o.a.createElement(E.a,{condition:u===Ar},o.a.createElement(\"div\",{className:t.dataAmountContainer},o.a.createElement(\"div\",null,\"How much data are you replicating in an hour?\"),o.a.createElement(\"div\",{className:t.dataAmountSelector},o.a.createElement(kr,{value:m,onChange:f}))))),o.a.createElement(K,{onPrevious:b,onNext:b}))}))),Mr=n(525),Ur=n.n(Mr),Br=function(){return(Br=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Fr=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},zr=[\"password\",\"serviceAccountKey\"],Gr=u()((function(e){return{configRow:{display:\"grid\",gridTemplateColumns:\"30% 60%\",borderTop:\"1px solid \"+e.palette.grey[300],padding:\"5px 0\",\"&:last-child\":{borderBottom:\"1px solid \"+e.palette.grey[300]},\"& > div\":{wordBreak:\"break-word\"}},label:{color:e.palette.grey[100],paddingRight:\"5px\"},heading:{marginBottom:\"15px\"}}}))((function(e){var t=e.classes,n=e.pluginInfo,a=e.pluginWidget,l=e.pluginConfig,i=Fr(Object(r.useState)([]),2),c=i[0],s=i[1];Object(r.useEffect)((function(){var e=[],t=[];(Object(m.E)(a,\"configuration-groups\")||[]).forEach((function(e){e.properties.forEach((function(e){t.push({name:e.name,label:e.label,type:e[\"widget-type\"]})}))})),t.forEach((function(t){l[t.name]&&e.push(Br(Br({},t),{value:l[t.name]}))}));var n=Object.keys(l||{}),r=t.map((function(e){return e.name}));Ur()(n,r).forEach((function(t){e.push({name:t,label:t,type:\"textbox\",value:l[t]})})),s(e)}),[n,a,l]);var u=Object(m.E)(a,\"display-name\")||Object(m.E)(n,\"name\");return o.a.createElement(\"div\",null,o.a.createElement(Q.b,{type:Q.a.h4,label:u,className:t.heading}),o.a.createElement(\"div\",{className:t.configContainer},c.map((function(e){return-1!==zr.indexOf(e.name)?null:o.a.createElement(\"div\",{key:e.name,className:t.configRow},o.a.createElement(\"div\",{className:t.label},o.a.createElement(\"strong\",null,e.label)),o.a.createElement(\"div\",null,e.value))}))))})),Wr=u()((function(e){return{container:{paddingTop:\"15px\",marginBottom:\"40px\",display:\"grid\",gridTemplateColumns:\"45% 45%\",gridColumnGap:\"10%\"},sectionTitle:{marginBottom:\"5px\"},advanced:{marginBottom:\"15px\"},advancedLabel:{color:e.palette.grey[100],marginRight:\"10px\"}}}))((function(e){var t=e.classes,n=e.sourcePluginInfo,a=e.targetPluginInfo,o=e.sourcePluginWidget,l=e.targetPluginWidget,i=e.sourceConfig,c=e.targetConfig,s=e.numInstances;return r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.container},r.createElement(\"div\",null,r.createElement(Q.b,{type:Q.a.h6,className:t.sectionTitle,label:\"SOURCE\"}),r.createElement(Gr,{pluginInfo:n,pluginWidget:o,pluginConfig:i})),r.createElement(\"div\",null,r.createElement(Q.b,{type:Q.a.h6,className:t.sectionTitle,label:\"TARGET\"}),r.createElement(Gr,{pluginInfo:a,pluginWidget:l,pluginConfig:c}))),r.createElement(\"div\",{className:t.advanced},r.createElement(Q.b,{type:Q.a.h4,className:t.sectionTitle,label:\"Advanced\"}),r.createElement(\"div\",null,r.createElement(\"strong\",{className:t.advancedLabel},\"Number of tasks:\"),r.createElement(\"span\",null,s))))})),Hr=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},Vr=Eo(u()((function(){return{subtitle:{marginTop:\"10px\",marginBottom:\"10px\",display:\"grid\",gridTemplateColumns:\"50% 50%\",alignItems:\"center\",\"& > div:last-child\":{textAlign:\"right\"}},gridWrapper:{\"& > .grid.grid-container\":{maxHeight:\"500px\"}},search:{width:\"250px\",\"& input\":{paddingTop:\"10px\",paddingBottom:\"10px\"}}}}))((function(e){var t=e.classes,n=e.tables,a=e.columns,o=Hr(r.useState(n.toList()),2),l=o[0],i=o[1],c=Hr(r.useState(\"\"),2),s=c[0],u=c[1];var p=Ue()((function(){if(s&&0!==s.length){var e=n.toList().filter((function(e){var t=Object(O.i)(e).toLowerCase(),n=s.toLowerCase();return-1!==t.indexOf(n)}));i(e)}else i(n.toList())}),300);return r.useEffect(p,[s]),r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.subtitle},r.createElement(\"div\",null,r.createElement(\"strong\",null,n.size),\" tables to be replicated\"),r.createElement(\"div\",null,r.createElement(le.a,{className:t.search,value:s,onChange:function(e){u(e.target.value)},variant:\"outlined\",placeholder:\"Search by table name\",InputProps:{startAdornment:r.createElement(ie.a,{position:\"start\"},r.createElement(se.a,null))}}))),r.createElement(\"div\",{className:\"grid-wrapper \"+t.gridWrapper},r.createElement(\"div\",{className:\"grid grid-container grid-compact\"},r.createElement(\"div\",{className:\"grid-header\"},r.createElement(\"div\",{className:\"grid-row\"},r.createElement(\"div\",null,\"Table name\"),r.createElement(\"div\",null,\"Number of columns\"))),r.createElement(\"div\",{className:\"grid-body\"},l.map((function(e){var t=Object(O.g)(e),n=a.get(t);return r.createElement(\"div\",{key:t,className:\"grid-row\"},r.createElement(\"div\",null,Object(O.i)(e)),r.createElement(\"div\",null,n&&n.size>0?n.size:\"All\"))}))))))}))),Kr=n(1560),Qr=function(){return(Qr=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Yr=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};!function(e){e.detail=\"detail\",e.drafts=\"drafts\"}(Ir||(Ir={}));var qr=Eo(u()((function(e){return{root:{marginTop:\"50px\",borderTop:\"1px solid \"+e.palette.grey[300],paddingTop:\"25px\",\"& button\":{marginRight:\"50px\"}},error:{marginTop:\"50px\",color:e.palette.red[100]}}}))((function(e){var t=e.classes,n=e.getReplicatorConfig,a=e.parentArtifact,o=e.draftId,i=e.saveDraft,c=e.name,s=Yr(r.useState(!1),2),u=s[0],f=s[1],g=Yr(r.useState(null),2),b=g[0],v=g[1],h=Yr(r.useState(null),2),y=h[0],x=h[1];if(y){var S=\"/ns/\"+Object(d.d)()+\"/replication\";return y===Ir.detail?S=S+\"/detail/\"+c:S+=\"/drafts\",r.createElement(l.Redirect,{to:S})}return r.createElement(r.Fragment,null,r.createElement(E.a,{condition:b},r.createElement(\"div\",{className:t.error},Object(m.o)(b))),r.createElement(\"div\",{className:t.root},r.createElement(M.a,{variant:\"contained\",color:\"primary\",onClick:function(){f(!0);var e,t=(e=n(),{name:c,artifact:Qr({},a),config:e}),r={namespace:Object(d.d)(),appName:t.name};Kr.a.list({namespace:Object(d.d)()}).subscribe((function(e){if(e.filter((function(e){return e.name===c})).length>0)return v('There is already an existing application \"'+c+'\"'),void f(!1);p.a.publish(r,t).subscribe((function(){p.a.deleteDraft({namespace:Object(d.d)(),draftId:o}).subscribe(null,null,(function(){x(Ir.detail)}))}),(function(e){v(e),f(!1)}))}),(function(e){v(e),f(!1)}))},disabled:u},r.createElement(E.a,{condition:u},r.createElement(U.a,null)),\"Deploy Replication Job\"),r.createElement(M.a,{color:\"primary\",onClick:function(){i().subscribe((function(){x(Ir.drafts)}),(function(e){v(e)}))}},\"Save And Close\")))}))),Jr=Eo(u()((function(e){var t=\"2px solid \"+e.palette.grey[300];return{root:{padding:\"15px 40px\"},header:{borderBottom:t,paddingBottom:\"15px\"},description:{color:e.palette.grey[100]},configContainer:{borderBottom:t}}}))((function(e){var t=e.classes,n=e.sourcePluginInfo,a=e.targetPluginInfo,o=e.sourcePluginWidget,l=e.targetPluginWidget,i=e.sourceConfig,c=e.targetConfig,s=e.name,u=e.description,p=e.numInstances;return r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.header},r.createElement(Q.b,{type:Q.a.h4,label:s}),r.createElement(\"div\",{className:t.description},u)),r.createElement(\"div\",{className:t.configContainer},r.createElement(Wr,{sourcePluginInfo:n,targetPluginInfo:a,sourcePluginWidget:o,targetPluginWidget:l,sourceConfig:i,targetConfig:c,numInstances:p})),r.createElement(\"div\",null,r.createElement(Vr,null)),r.createElement(qr,null))}))),$r=function(e){var t=e?3:2,n={label:e?\"Select tables and transformations\":\"Select tables\",component:Za,required:[\"tables\"]},a=[{label:\"Specify basic information\",component:$,required:[\"name\"]},{label:\"Configure source\",component:Se,required:[\"sourceConfig\"]},{label:\"Configure target\",component:er,required:[\"targetConfig\"]},{label:\"Configure advanced properties\",component:Dr,required:[\"numInstances\"]},{label:\"Review assessment\",component:Cr,required:[\"name\",\"sourceConfig\",\"tables\",\"targetConfig\",\"numInstances\"]},{label:\"View summary\",component:Jr}];return a.splice(t,0,n),a},Xr=n(1749),Zr=n.n(Xr),eo=Eo(u()((function(e){return{root:{borderRight:\"1px solid \"+e.palette.grey[300]},row:{padding:\"15px\",lineHeight:\"24px\"},finishedRow:{cursor:\"pointer\",\"&:hover\":{backgroundColor:e.palette.grey[700]},\"& $chip\":{backgroundColor:e.palette.blue[100]}},active:{backgroundColor:e.palette.grey[700]},chip:{marginRight:\"10px\",color:e.palette.white[50],backgroundColor:e.palette.grey[200],minWidth:\"24px\",height:\"24px\",\"& span\":{paddingLeft:\"5px\",paddingRight:\"5px\"}},checkIcon:{fontSize:\"14px\"}}}))((function(e){var t=e.classes,n=e.setActiveStep,a=e.activeStep,o=e.isStateFilled,l=V(\"replication.transformations.enabled\"),i=$r(l);function c(e){s(e)&&n(e)}function s(e){var t=i[e];return t.required?o(t.required):e<=a}return r.createElement(\"div\",{className:t.root},i.map((function(e,n){var o,l=n<a?r.createElement(Zr.a,{className:t.checkIcon}):n+1;return r.createElement(\"div\",{key:e.label,className:te()(t.row,(o={},o[t.finishedRow]=s(n),o[t.active]=n===a,o)),onClick:c.bind(null,n)},r.createElement(A.a,{label:l,className:t.chip}),r.createElement(\"span\",null,e.label))})))}))),to=u()((function(e){return{root:{lineHeight:1.2},type:{color:e.palette.grey[200]},name:{fontSize:\"14px\"}}}))((function(e){var t=e.classes,n=e.type,a=e.pluginInfo,o=e.pluginWidget;if(!a)return null;var l=Object(m.E)(o,\"display-name\")||Object(m.E)(a,\"name\");return r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.type},n),r.createElement(\"div\",{className:t.name},l))})),no=Eo(u()((function(e){return{root:{height:\"50px\",backgroundColor:e.palette.grey[600],display:\"flex\",alignItems:\"center\",\"& > div:first-child\":{width:\"calc(100% - 75px)\"}},contentContainer:{display:\"flex\",height:\"100%\",alignItems:\"center\",paddingLeft:\"25px\"},closeButtonContainer:{float:\"right\",marginRight:\"30px\",display:\"flex\",alignItems:\"center\",justifyContent:\"flex-end\"},heading:{marginBottom:0},contentHeading:{maxWidth:\"60%\",overflow:\"hidden\",whiteSpace:\"nowrap\",textOverflow:\"ellipsis\",marginRight:\"50px\",minWidth:0},divider:{marginRight:\"30px\",marginLeft:\"30px\",fontSize:\"35px\",color:e.palette.grey[200]},reviewContentContainer:{paddingLeft:\"calc(\"+vo+\"px + 40px)\"}}}))((function(e){var t=e.classes,n=e.name,a=e.sourcePluginInfo,o=e.sourcePluginWidget,l=e.targetPluginInfo,i=e.targetPluginWidget,c=e.activeStep,s=V(\"replication.transformations.enabled\"),u=c===$r(s).length-1;return r.createElement(\"div\",{className:t.root},r.createElement(E.a,{condition:!u},r.createElement(\"div\",{className:t.contentContainer},r.createElement(Q.b,{type:Q.a.h5,label:n||\"Create new replication job\",className:t.heading+\" \"+t.contentHeading}),r.createElement(E.a,{condition:!!a},r.createElement(to,{type:\"Source\",pluginInfo:a,pluginWidget:o})),r.createElement(E.a,{condition:!!l},r.createElement(r.Fragment,null,r.createElement(Bt.a,{className:t.divider}),r.createElement(to,{type:\"Target\",pluginInfo:l,pluginWidget:i}))))),r.createElement(E.a,{condition:u},r.createElement(\"div\",{className:t.reviewContentContainer},r.createElement(Q.b,{type:Q.a.h5,label:\"Review replication job details\",className:t.heading}))),r.createElement(\"div\",{className:t.closeButtonContainer},r.createElement(Ie.a,{size:\"small\",onClick:function(){return history.back()}},r.createElement(_e.a,null))))}))),ao=Eo((function(e){var t=e.activeStep,n=V(\"replication.transformations.enabled\"),a=$r(n);if(!a[t]||!a[t].component)return null;var o=a[t].component;return r.createElement(o,null)})),ro=n(22),oo=n.n(ro),lo=n(318),io=n(145);function co(e){return(co=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var so=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),uo=function(){return(uo=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},po=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))},mo=function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;l;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(r=l.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},fo=function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},go=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},bo=r.createContext({}),vo=275,ho=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setActiveStep=function(e){t.state.sourcePluginInfo?setTimeout((function(){t.saveDraft().subscribe((function(){t.setState({activeStep:e})}),(function(e){console.log(\"Failed to save draft\",e)}))}),100):t.setState({activeStep:e})},t.setNameDescription=function(e,n){t.setState({name:e,description:n})},t.setSourcePluginWidget=function(e){t.setState({sourcePluginWidget:e})},t.setSourceConfig=function(e){t.setState({sourceConfig:e},(function(){t.props.history.replace(\"/ns/\"+Object(d.d)()+\"/replication/drafts/\"+t.state.draftId)}))},t.setSourcePluginInfo=function(e){t.setState({sourcePluginInfo:e})},t.setTargetPluginInfo=function(e){t.setState({targetPluginInfo:e})},t.setTargetPluginWidget=function(e){t.setState({targetPluginWidget:e})},t.setTargetConfig=function(e){t.setState({targetConfig:e})},t.setTables=function(e,n,a,r){if(void 0===r&&(r=!1),r){var o={};e.forEach((function(e){var n=Object(O.j)(e);t.state.transformations[n.table]&&(o[n.table]=t.state.transformations[n.table])})),t.setState({tables:e,columns:n,dmlBlacklist:a,transformations:o})}else t.setState({tables:e,columns:n,dmlBlacklist:a})},t.saveTransformationsAndColumns=function(e,n,a){var r=Object(O.g)(e),o={tables:t.state.tables};if(t.state.tables.get(r)||o.tables.set(r,Object(Oe.Map)(e)),n){var l=uo({},t.state.transformations);l[e.table]=n,o.transformations=l}var i=t.state.columns.set(r,a);a&&0!==a.size||(i=i.delete(r)),o.columns=i,t.setState(o)},t.handleError=function(e){t.setState({error:e})},t.handleAssessTable=function(e,n,a){t.setState({assessmentLoading:!0},(function(){var r,o={namespace:Object(d.d)()},l=t.getReplicatorConfig(),i=l.tables.find((function(t){return t.table===e.table})),c=[];(a&&a.size>0&&a.forEach((function(e){var t={name:e.get(\"name\"),type:e.get(\"type\")};e.get(\"suppressWarning\")&&(t.suppressWarning=!0),c.push(t)})),i?i.columns=c:l.tables.push(uo(uo({},e),{columns:c})),n)&&(l.tableTransformations.find((function(t,n){if(t.tableName===e.table)return r=n,!0}))&&l.tableTransformations.splice(r,1),l.tableTransformations.push({tableName:\"Microsoft SQLServer\"===l.connections[0].from?e.schema+\".\"+e.table:e.table,columnTransformations:n}));p.a.validatePipeline(o,l).subscribe((function(n){var a,r,o,l=\"\",i=((a={})[e.table]={},a);if(n.features.length){try{for(var c=fo(n.features),s=c.next();!s.done;s=c.next()){var u=s.value;if(\"ERROR\"===u.severity){var p=u.description.split(\" \"),d=u.name+\" - \"+u.description+\" - \"+u.suggestion;if(\"Table\"===p[0]){var m=p[1].split(\"'\")[1];i[m]={FEATURE_ERROR_FROM_ASSESSMENT:{err:d,support:Pt.yes}}}\"\"===l||(l+=\"\\n\"),l+=d}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}t.handleError({error:{response:l}})}n.transformationIssues.length&&n.transformationIssues.forEach((function(e){var t={},n=go(Object(O.l)(e),3),a=n[0],r=n[1],o=n[2];t[r]={support:Pt.no,suggestion:o,sourceName:r},i[a]=uo(uo({},i[a]),t)})),t.setState({tableAssessments:i,assessmentLoading:!1})}),(function(e){t.setState({assessmentLoading:!1},(function(){t.handleError({error:e})}))}))}))},t.setAdvanced=function(e){t.setState({numInstances:e})},t.setColumns=function(e,n){t.setState({columns:e},(function(){n()}))},t.saveDraft=function(){if(t.state.name){var e={namespace:Object(d.d)(),draftId:t.state.draftId},n={label:t.state.name,config:t.getReplicatorConfig()};return p.a.putDraft(e,n)}},t.getReplicatorConfig=function(){var e=t.constructStageSpec(\"source\"),n=t.constructStageSpec(\"target\"),a=[];e&&a.push(e),n&&a.push(n);var r=[];return e&&n&&r.push({from:e.name,to:n.name}),{description:t.state.description,connections:r,stages:a,tables:Object(O.a)(t.state.tables,t.state.columns,t.state.dmlBlacklist),offsetBasePath:t.state.offsetBasePath,parallelism:{numInstances:t.state.numInstances},tableTransformations:Object.values(t.state.transformations)}},t.isStateFilled=function(e){var n,a;try{for(var r=fo(e),o=r.next();!o.done;o=r.next()){var l=o.value,i=t.state[l];if(!i||\"object\"===co(i)&&0===Object.keys(i).length||Oe.Map.isMap(i)&&0===i.size)return!1}}catch(e){n={error:e}}finally{try{o&&!o.done&&(a=r.return)&&a.call(r)}finally{if(n)throw n.error}}return!0},t.checkIfTinkEnabled=function(){var e=Object(d.d)();io.a.fetchArtifactVersion({namespace:e,artifactName:\"delta-app\",scope:\"system\"}).subscribe((function(n){var a;if(n.length){a=n.sort((function(e,t){return e.version>t.version?-1:1}))[0].version;var r={namespace:e,artifactId:\"delta-app\",version:a,scope:\"system\",extensionType:\"transform\"};io.a.fetchPluginTypes(r).subscribe((function(e){var n,a;try{for(var r=fo(e),o=r.next();!o.done;o=r.next()){if(\"tink\"===o.value.name){t.setState({tinkEnabled:!0});break}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(a=r.return)&&a.call(r)}finally{if(n)throw n.error}}}))}}))},t.state={name:\"\",description:\"\",sourcePluginInfo:null,sourcePluginWidget:null,targetPluginInfo:null,targetPluginWidget:null,sourceConfig:null,targetConfig:null,tables:Object(Oe.Map)(),columns:Object(Oe.Map)(),dmlBlacklist:Object(Oe.Map)(),offsetBasePath:window.CDAP_CONFIG.delta.defaultCheckpointDir||\"\",numInstances:null,assessmentLoading:!1,parentArtifact:null,draftId:null,isInvalidSource:!1,loading:!0,transformations:{},activeStep:0,tinkEnabled:!1,setActiveStep:t.setActiveStep,setNameDescription:t.setNameDescription,setSourcePluginWidget:t.setSourcePluginWidget,setSourceConfig:t.setSourceConfig,setSourcePluginInfo:t.setSourcePluginInfo,setTargetPluginInfo:t.setTargetPluginInfo,setTargetPluginWidget:t.setTargetPluginWidget,setTargetConfig:t.setTargetConfig,setTables:t.setTables,setAdvanced:t.setAdvanced,getReplicatorConfig:t.getReplicatorConfig,saveDraft:t.saveDraft,setColumns:t.setColumns,isStateFilled:t.isStateFilled,saveTransformationsAndColumns:t.saveTransformationsAndColumns,tableAssessments:{},handleAssessTable:t.handleAssessTable,error:null},t.initCreate=function(){t.setState({draftId:oo()(),loading:!1})},t.initClone=function(e){return po(t,void 0,void 0,(function(){var t,n,a,r;return mo(this,(function(o){switch(o.label){case 0:t=window.localStorage.getItem(e),window.localStorage.removeItem(e),o.label=1;case 1:return o.trys.push([1,3,,4]),n=JSON.parse(t),[4,Object(O.b)(n,this.state.parentArtifact)];case 2:return a=o.sent(),r=uo(uo({},a),{draftId:oo()(),activeStep:0}),this.setState(r),[3,4];case 3:return o.sent(),console.log(\"Failed to parse replication config\"),this.initCreate(),[3,4];case 4:return[2]}}))}))},t.initDraft=function(e){var n={namespace:Object(d.d)(),draftId:e};p.a.getDraft(n).subscribe((function(n){return po(t,void 0,void 0,(function(){var t,a;return mo(this,(function(r){switch(r.label){case 0:return[4,Object(O.b)(n,this.state.parentArtifact)];case 1:return t=r.sent(),a=uo({draftId:e},t),this.setState(a),[2]}}))}))}))},t.constructStageSpec=function(e){var n=e+\"PluginInfo\",a=e+\"PluginWidget\",r=e+\"Config\";if(!t.state[n])return null;var o=t.state[n],l={name:Object(m.E)(t.state,a,\"display-name\")||Object(m.E)(o,\"name\"),plugin:{name:o.name,type:o.type,artifact:uo({},o.artifact),properties:{}}},i=t.state[r];return i&&(l.plugin.properties=uo({},i)),l},t.redirectToListView=function(){return r.createElement(l.Redirect,{to:\"/ns/\"+Object(d.d)()+\"/replication\"})},t}return so(t,e),t.prototype.componentDidMount=function(){var e=this;p.a.getDeltaApp().subscribe((function(t){e.setState({parentArtifact:t.artifact});var n=new URLSearchParams(location.search).get(\"cloneId\");if(n)e.initClone(n);else{var a=Object(m.E)(e.props,\"match\",\"params\",\"draftId\");a?e.initDraft(a):e.initCreate()}})),this.checkIfTinkEnabled()},t.prototype.render=function(){var e=this;return this.state.isInvalidSource?this.redirectToListView():this.state.loading?r.createElement(Ne.a,null):r.createElement(bo.Provider,{value:this.state},r.createElement(\"div\",{className:this.props.classes.root},r.createElement(no,null),r.createElement(\"div\",{className:this.props.classes.content},r.createElement(eo,null),r.createElement(ao,null)),!!this.state.error&&r.createElement(lo.a,{error:this.state.error.error.response,canEditPageWhileOpen:!0,onClose:function(){return e.handleError(null)}})))},t}(r.PureComponent);function Eo(e){return function(t){return r.createElement(bo.Consumer,null,(function(n){var a=uo(uo({},n),t);return r.createElement(F,null,r.createElement(e,uo({},a)))}))}}var yo=u()((function(){return{root:{height:\"100%\"},content:{height:\"calc(100% - 50px)\",display:\"grid\",gridTemplateColumns:vo+\"px 1fr\",\"& > div\":{overflowY:\"auto\"}}}}))(ho),xo=u()((function(e){return{root:{height:\"50px\",width:\"60px\",textAlign:\"center\",backgroundColor:e.palette.white[50],borderRadius:\"4px\",border:\"1px solid \"+e.palette.grey[400],cursor:\"pointer\",marginLeft:\"15px\",userSelect:\"none\",\"&:hover\":{backgroundColor:e.palette.grey[800]}},icon:{fontSize:\"18px\"},loading:{height:\"24px\"},disabled:{color:e.palette.grey[300],cursor:\"not-allowed\",\"&:hover\":{backgroundColor:e.palette.white[50]},\"& svg\":{color:e.palette.grey[300]}}}}))((function(e){var t,n=e.classes,a=e.icon,o=e.text,l=e.loading,i=e.disabled,c=e.onClick;var s=r.createElement(\"span\",{className:n.loading},r.createElement(U.a,null));return r.createElement(\"div\",{className:te()(n.root,(t={},t[n.disabled]=l||i,t)),onClick:function(){l||i||c()}},r.createElement(\"div\",{className:n.icon},l?s:a),r.createElement(\"div\",null,o))})),So=u()((function(e){return{root:{borderRight:\"2px solid \"+e.palette.grey[300],height:\"50px\",marginLeft:\"15px\",marginRight:\"15px\"}}}))((function(e){var t=e.classes;return r.createElement(\"div\",{className:t.root})})),Oo=n(1629),To=Os(u()((function(e){return{root:{textAlign:\"center\",cursor:\"pointer\",borderRadius:\"4px\",width:\"50px\",color:e.palette.grey[50],\"&:not([href])\":{cursor:\"not-allowed\",color:e.palette.grey[200],\"&:hover\":{color:e.palette.grey[200]}},\"&[href]:hover\":{backgroundColor:e.palette.white[50],border:\"1px solid \"+e.palette.grey[400],color:\"inherit\",textDecoration:\"none\"}},icon:{fontSize:\"18px\"}}}))((function(e){var t=e.classes,n=e.runId,a=e.name,o=Object(d.d)(),l=N.a.programType,i=N.a.programId,c=n?Object(Oo.getLogViewerPageUrl)(o,a,l,i,n):null;return r.createElement(\"a\",{className:t.root,href:c,target:\"_blank\",rel:\"noopener noreferrer\"},r.createElement(\"div\",{className:t.icon},r.createElement(ue.a,{name:\"icon-file-text-o\"})),r.createElement(\"div\",{className:t.text},\"Logs\"))}))),Co=Os(u()((function(e){return{root:{width:\"150px\"},title:{fontWeight:600,fontSize:\"15px\",color:e.palette.grey[200]}}}))((function(e){var t=e.classes,n=e.status;return r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.title},\"Status\"),r.createElement(\"div\",null,r.createElement(b,{status:n})))}))),wo=n(27),No=function(){return(No=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},jo=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},Ro=Os(u()((function(e){return{actionsBtn:{height:\"50px\",width:\"60px\",textAlign:\"center\",backgroundColor:e.palette.white[50],borderRadius:\"4px\",border:\"1px solid \"+e.palette.grey[400],cursor:\"pointer\",marginLeft:\"15px\",userSelect:\"none\",\"&:hover\":{backgroundColor:e.palette.grey[800]},\"&.active\":{color:e.palette.blue[300],\"& $icon\":{stroke:e.palette.blue[300]}}},icon:{fontSize:\"20px\",fill:\"none\",stroke:e.palette.grey[200]},iconContainer:{paddingTop:\"5px\",marginBottom:\"2px\"},delete:{color:e.palette.red[100]}}}))((function(e){var t=e.classes,n=e.name,o=e.exportPipeline,i=e.duplicatePipeline,c=jo(r.useState(!1),2),s=c[0],u=c[1],p=jo(r.useState(!1),2),m=p[0],f=p[1];if(m)return r.createElement(l.Redirect,{to:\"/ns/\"+Object(d.d)()+\"/replication\"});var g=[{label:\"Export\",actionFn:o},{label:\"Duplicate\",actionFn:i},{label:\"separator\"},{label:\"Delete\",actionFn:function(){return u(!0)},className:t.delete}];return r.createElement(\"div\",{className:t.root},r.createElement(v.a,{actions:g,targetElem:function(e){return r.createElement(\"div\",No({},e,{className:t.actionsBtn+\" \"+e.className}),r.createElement(\"div\",{className:t.iconContainer},r.createElement(ue.a,{name:\"icon-cog-empty\",className:t.icon})),r.createElement(\"div\",null,\"Actions\"))}}),r.createElement(x,{replicatorId:n,show:s,onDelete:function(){return f(!0)},closeModal:function(){return u(!1)},type:a.app}))}))),Po=n(1),_o=n.n(Po),Io=n(1549),ko=n(498),Lo=n.n(ko),Ao=n(146),Do=n(33);function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(n),!0).forEach((function(t){Bo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fo={INITIALIZE_PIPELINE_DETAILS:\"INITIALIZE_PIPELINE_DETAILS\",SET_OPTIONAL_PROPERTY:\"SET_OPTIONAL_PROPERTY\",SET_SCHEDULE:\"SET_SCHEDULE\",SET_CONFIG:\"SET_CONFIG\",SET_MAX_CONCURRENT_RUNS:\"SET_MAX_CONCURRENT_RUNS\",SET_SCHEDULE_STATUS:\"SET_SCHEDULE_STATUS\",SET_NEXT_RUN_TIME:\"SET_NEXT_RUN_TIME\",SET_CURRENT_RUN_ID:\"SET_CURRENT_RUN_ID\",SET_RUNS:\"SET_RUNS\",SET_RUNS_COUNT:\"SET_RUNS_COUNT\",SET_STATISTICS:\"SET_STATISTICS\",SET_USER_RUNTIME_ARGUMENTS:\"SET_USER_RUNTIME_ARGUMENTS\",SET_MACROS_AND_USER_RUNTIME_ARGUMENTS:\"SET_MACROS_AND_USER_RUNTIME_ARGUMENTS\",SET_RUNTIME_ARGUMENTS_FOR_DISPLAY:\"SET_RUNTIME_ARGUMENTS_FOR_DISPLAY\",SET_RUN_BUTTON_LOADING:\"SET_RUN_BUTTON_LOADING\",SET_RUN_ERROR:\"SET_RUN_ERROR\",SET_SCHEDULE_BUTTON_LOADING:\"SET_SCHEDULE_BUTTON_LOADING\",SET_SCHEDULE_ERROR:\"SET_SCHEDULE_ERROR\",SET_STOP_BUTTON_LOADING:\"SET_STOP_BUTTON_LOADING\",SET_STOP_ERROR:\"SET_STOP_ERROR\",RESET:\"RESET\"},zo={name:\"\",description:\"\",artifact:{name:\"\",version:\"\",scope:\"\"},config:{},version:\"\",scheduleStatus:\"\",runs:[],runsCount:null,currentRun:{},nextRunTime:null,statistics:\"\",macrosMap:{},userRuntimeArgumentsMap:{},runtimeArgsForDisplay:{},runButtonLoading:!1,runError:\"\",scheduleButtonLoading:!0,scheduleError:\"\",stopButtonLoading:!0,stopError:\"\"},Go=Object(Do.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.m;switch(t.type){case Fo.INITIALIZE_PIPELINE_DETAILS:var n=t.payload.pipeline,a=Uo({},e.config);try{a=JSON.parse(n.configuration)}catch(t){console.log(\"ERROR: cannot parse configuration\"),a=Uo({},e.config)}return Uo({},e,{name:n.name,description:n.description,artifact:{name:n.artifact.name,version:n.artifact.version,scope:n.artifact.scope},config:Uo({},a),version:n.appVersion});case Fo.SET_OPTIONAL_PROPERTY:return Uo({},e,Bo({},t.payload.key,t.payload.value));case Fo.SET_SCHEDULE:return Uo({},e,{config:Uo({},e.config,{schedule:t.payload.schedule})});case Fo.SET_SCHEDULE_STATUS:return Uo({},e,{scheduleStatus:t.payload.scheduleStatus});case Fo.SET_CONFIG:return Uo({},e,{config:t.payload.config});case Fo.SET_MAX_CONCURRENT_RUNS:return Uo({},e,{config:Uo({},e.config,{maxConcurrentRuns:t.payload.maxConcurrentRuns})});case Fo.SET_NEXT_RUN_TIME:return Uo({},e,{nextRunTime:t.payload.nextRunTime});case Fo.SET_CURRENT_RUN_ID:var r=t.payload.runId,o=e.runs.find((function(e){return e.runid===r}))||e.currentRun;return Uo({},e,{currentRunId:r,currentRun:o});case Fo.SET_RUNS:var l,i=t.payload.runs;return e.currentRunId&&(l=i.find((function(t){return t.runid===e.currentRunId}))),l||(l=i[0]),Uo({},e,{runs:i,currentRun:l,runButtonLoading:!1,stopButtonLoading:!1});case Fo.SET_RUNS_COUNT:return Uo({},e,{runsCount:t.payload.runsCount});case Fo.SET_STATISTICS:return Uo({},e,{statistics:t.payload.statistics});case Fo.SET_USER_RUNTIME_ARGUMENTS:return Uo({},e,{userRuntimeArgumentsMap:t.payload.argsMap});case Fo.SET_MACROS_AND_USER_RUNTIME_ARGUMENTS:return Uo({},e,{macrosMap:t.payload.macrosMap,userRuntimeArgumentsMap:t.payload.argsMap});case Fo.SET_RUNTIME_ARGUMENTS_FOR_DISPLAY:return Uo({},e,{runtimeArgsForDisplay:t.payload.args});case Fo.SET_RUN_BUTTON_LOADING:return Uo({},e,{runButtonLoading:t.payload.loading});case Fo.SET_RUN_ERROR:return Uo({},e,{runError:t.payload.error});case Fo.SET_SCHEDULE_BUTTON_LOADING:return Uo({},e,{scheduleButtonLoading:t.payload.loading});case Fo.SET_SCHEDULE_ERROR:return Uo({},e,{scheduleError:t.payload.error});case Fo.SET_STOP_BUTTON_LOADING:return Uo({},e,{stopButtonLoading:t.payload.loading});case Fo.SET_STOP_ERROR:return Uo({},e,{stopError:t.payload.error});case Fo.RESET:return zo;default:return e}}),zo,Object(m.h)(\"PipelineDetailStore\")()),Wo=n(1530);function Ho(e){return(Ho=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ko(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Qo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qo(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=$o(e);if(t){var r=$o(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Jo(this,n)}}function Jo(e,t){return!t||\"object\"!==Ho(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function $o(e){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1978);var Zo=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(l,e);var t,n,a,r=qo(l);function l(){return Ko(this,l),r.apply(this,arguments)}return t=l,(n=[{key:\"render\",value:function(){var e=this,t=this.props,n=t.onTabPaneClick,a=t.activePane,r=t.size,l=t.id;return o.a.createElement(\"div\",{className:te()(\"accordion-pane\",{active:this.props.activePane===this.props.id})},o.a.Children.map(this.props.children,(function(t){return\"AccordionTitle\"===t.type.displayName||\"AccordionTitle\"===t.type.name||e.props.activePane===e.props.id?o.a.cloneElement(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){Xo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.props,{onTabPaneClick:n,activePane:a,size:r,id:l,key:e.props.id})):null})))}}])&&Qo(t.prototype,n),a&&Qo(t,a),l}(r.PureComponent);function el(e){return(el=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function tl(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function nl(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function al(e,t){return(al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rl(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=il(e);if(t){var r=il(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ol(this,n)}}function ol(e,t){return!t||\"object\"!==el(t)&&\"function\"!=typeof t?ll(e):t}function ll(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function il(e){return(il=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xo(Zo,\"propTypes\",{id:_o.a.string.isRequired,onTabPaneClick:_o.a.func,activePane:_o.a.string,size:_o.a.oneOf([\"small\",\"medium\",\"large\"]),children:_o.a.node}),n(1980);var sl=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&al(e,t)}(l,e);var t,n,a,r=rl(l);function l(){var e;tl(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return cl(ll(e=r.call.apply(r,[this].concat(n))),\"onClickHandler\",(function(){e.props.onTabPaneClick&&e.props.onTabPaneClick(e.props.id)})),e}return t=l,(n=[{key:\"render\",value:function(){var e=this.props.size;return o.a.createElement(\"div\",{className:\"accordion-title \".concat(e),onClick:this.onClickHandler},o.a.createElement(\"div\",null,this.props.id===this.props.activePane?o.a.createElement(ue.a,{name:\"icon-caret-down\"}):o.a.createElement(ue.a,{name:\"icon-caret-right\"})),o.a.createElement(\"div\",null,this.props.children))}}])&&nl(t.prototype,n),a&&nl(t,a),l}(r.PureComponent);function ul(e){return(ul=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function pl(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function dl(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ml(e,t){return(ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fl(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=bl(e);if(t){var r=bl(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return gl(this,n)}}function gl(e,t){return!t||\"object\"!==ul(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function bl(e){return(bl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cl(sl,\"displayName\",\"AccordionTitle\"),cl(sl,\"propTypes\",{id:_o.a.string.isRequired,onTabPaneClick:_o.a.func,activePane:_o.a.string,size:_o.a.oneOf([\"small\",\"medium\",\"large\"]),children:_o.a.node}),cl(sl,\"defaultProps\",{size:\"medium\"}),n(1982);var hl=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ml(e,t)}(l,e);var t,n,a,r=fl(l);function l(){return pl(this,l),r.apply(this,arguments)}return t=l,(n=[{key:\"render\",value:function(){return o.a.createElement(\"div\",{className:\"accordion-content \".concat(this.props.size)},this.props.children)}}])&&dl(t.prototype,n),a&&dl(t,a),l}(r.PureComponent);function El(e){return(El=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xl(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Sl(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ol(e,t){return(Ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tl(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Nl(e);if(t){var r=Nl(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Cl(this,n)}}function Cl(e,t){return!t||\"object\"!==El(t)&&\"function\"!=typeof t?wl(e):t}function wl(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Nl(e){return(Nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}vl(hl,\"propTypes\",{size:_o.a.oneOf([\"small\",\"medium\",\"large\"]),children:_o.a.node}),vl(hl,\"defaultProps\",{size:\"medium\"});var Rl=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ol(e,t)}(l,e);var t,n,a,r=Tl(l);function l(){var e;xl(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return jl(wl(e=r.call.apply(r,[this].concat(n))),\"state\",{activePane:e.props.active}),jl(wl(e),\"onTabPaneClick\",(function(t){e.state.activePane!==t?e.setState({activePane:t}):e.setState({activePane:null})})),e}return t=l,(n=[{key:\"render\",value:function(){var e=this;return o.a.createElement(\"div\",{className:\"accordion\"},o.a.Children.map(this.props.children,(function(t){return o.a.cloneElement(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(n),!0).forEach((function(t){jl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.props,{activePane:e.state.activePane,onTabPaneClick:e.onTabPaneClick,size:e.props.size,key:oo()()}))})))}}])&&Sl(t.prototype,n),a&&Sl(t,a),l}(r.PureComponent);jl(Rl,\"propTypes\",{size:_o.a.oneOf([\"small\",\"medium\",\"large\"]),active:_o.a.string.isRequired,children:_o.a.node});var Pl=n(1547),_l=n(121),Il=n.n(_l),kl=o.a.memo((function(e){var t=e.property,n=e.value,a=e.onChange;return o.a.createElement(\"div\",{className:\"profile-group-content\"},o.a.createElement(\"div\",null,o.a.createElement(D.b,{pluginProperty:{name:t.name,description:t.description,required:t.required},widgetProperty:t,value:n,onChange:a})))}),(function(e,t){return e.value===t.value&&e.property[\"widget-type\"]===t.property[\"widget-type\"]}));function Ll(e){return(Ll=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(n),!0).forEach((function(t){Hl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ml(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Ul(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Bl(e,t){return(Bl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fl(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Wl(e);if(t){var r=Wl(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return zl(this,n)}}function zl(e,t){return!t||\"object\"!==Ll(t)&&\"function\"!=typeof t?Gl(e):t}function Gl(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Wl(e){return(Wl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1984);var Vl=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bl(e,t)}(l,e);var t,n,a,r=Fl(l);function l(){var e;Ml(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Hl(Gl(e=r.call.apply(r,[this].concat(n))),\"state\",{loading:!0,provisionerSpec:null,filteredConfigurationGroup:[]}),Hl(Gl(e),\"customization\",Il()(e.props.customizations)),Hl(Gl(e),\"latestValues\",e.getDefaultValues()),Hl(Gl(e),\"onPropertyUpdate\",(function(t,n){if(e.customization[t]=n.toString(),e.latestValues[t]=n.toString(),e.isFilteredProperty(t)){var a=e.getFilteredConfigurationGroup(e.state.provisionerSpec);e.setState({filteredConfigurationGroup:a})}})),Hl(Gl(e),\"onSave\",(function(){e.props.onSave&&e.props.onSave(e.customization)})),Hl(Gl(e),\"onClose\",(function(){e.props.onClose&&e.props.onClose(!1)})),e}return t=l,(n=[{key:\"componentDidMount\",value:function(){var e=this;Io.a.getProvisionerDetailSpec({provisioner:this.props.provisioner.name}).subscribe((function(t){e.setState({provisionerSpec:t,filteredConfigurationGroup:e.getFilteredConfigurationGroup(t),loading:!1})}),(function(t){e.setState({loading:!1}),console.log(\"Failed to fetch provisioner spec \",t)}))}},{key:\"componentWillUnmount\",value:function(){this.customization={},this.latestValues={}}},{key:\"getDefaultValues\",value:function(){var e=this,t=this.props.editablePropertiesFromProfile,n={};return t.forEach((function(t){t.name in e.props.customizations?n[t.name]=e.props.customizations[t.name]:n[t.name]=t.value})),n}},{key:\"getFilteredConfigurationGroup\",value:function(e){var t=e[\"configuration-groups\"],n=e.filters;return n?Object(be.b)(t,{\"configuration-groups\":t,filters:n},{},this.latestValues):t}},{key:\"isFilteredProperty\",value:function(e){return(this.state.provisionerSpec.filters||[]).some((function(t){return Object(m.E)(t,\"condition\",\"property\")===e}))}},{key:\"render\",value:function(){var e=this,t=this.props.editablePropertiesFromProfile;if(this.state.loading)return o.a.createElement(\"div\",{className:\"profile-customize-content\"},o.a.createElement(U.a,null));var n=this.state.filteredConfigurationGroup,a={};this.props.provisioner.properties.forEach((function(e){a[e.name]=e}));var r=this.props.profileLabel||Object(Pl.e)(this.props.profileName);return o.a.createElement(\"div\",{className:\"profile-customize-content\"},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:\"profile-customize-metadata\"},o.a.createElement(\"div\",{className:\"profile-customize-name\"},o.a.createElement(\"strong\",{title:r},r),t.length?o.a.createElement(\"small\",null,\"Customize the values for the runs started by this schedule\"):null),o.a.createElement(ue.a,{name:\"icon-close\",onClick:this.onClose})),o.a.createElement(Rl,{size:\"small\",active:\"0\"},n.map((function(t,n){if(!1===t.show)return null;var r=t.properties.filter((function(e){return(!a[e.name]||!1!==a[e.name].isEditable)&&!1!==e.show})).map((function(t){return\"select\"===t[\"widget-type\"]?Dl({},t,Hl({value:e.latestValues[t.name]},\"widget-attributes\",Dl({},t[\"widget-attributes\"]||{},{MenuProps:{disablePortal:!0}}))):Dl({},t,{value:e.latestValues[t.name]})}));return o.a.createElement(Zo,{id:n,key:n},o.a.createElement(sl,null,o.a.createElement(\"strong\",null,t.label,\" (\",t.properties.length,\")\")),o.a.createElement(hl,null,r.map((function(t){return o.a.createElement(kl,{key:t.name,property:t,value:t.value,onChange:e.onPropertyUpdate.bind(e,t.name)})})),r.length?null:o.a.createElement(\"strong\",null,\" Properties cannot be customized\")))})))),this.props.disabled?null:o.a.createElement(\"div\",{className:\"profile-customize-footer\"},t.length?null:o.a.createElement(\"small\",{className:\"text-danger\"},\"Properties of this profile cannot be customized.\"),o.a.createElement(\"div\",{className:te()(\"btn btn-primary\",{disabled:0===t.length}),onClick:0===t.length?void 0:this.onSave},\"Done\")))}}])&&Ul(t.prototype,n),a&&Ul(t,a),l}(r.PureComponent);Hl(Vl,\"propTypes\",{editablePropertiesFromProfile:_o.a.array,profileName:_o.a.string,profileLabel:_o.a.string,customizations:_o.a.object,provisioner:_o.a.object,onSave:_o.a.func,disabled:_o.a.bool,onClose:_o.a.func}),Hl(Vl,\"defaultProps\",{customizations:{},disabled:!1});var Kl=n(20);function Ql(e){return(Ql=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Yl(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ql(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Jl(e,t){return(Jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $l(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ei(e);if(t){var r=ei(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Xl(this,n)}}function Xl(e,t){return!t||\"object\"!==Ql(t)&&\"function\"!=typeof t?Zl(e):t}function Zl(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function ei(e){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1986);var ni=Object(Kl.a)({paper:{padding:\"20px\"}})(ua.a),ai=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jl(e,t)}(l,e);var t,n,a,r=$l(l);function l(){var e;Yl(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ti(Zl(e=r.call.apply(r,[this].concat(n))),\"state\",{showPopover:!1}),ti(Zl(e),\"onTogglePopover\",(function(t){e.setState({showPopover:!e.state.showPopover,anchorEl:t.currentTarget})})),ti(Zl(e),\"onProfileSelect\",(function(t,n){e.props.onProfileSelect&&e.props.onProfileSelect(t,n),e.onTogglePopover(!1)})),e}return t=l,(n=[{key:\"render\",value:function(){var e=this.props.profile,t=e.name,n=e.provisioner,a=e.scope,r=e.label,l=Object(Pl.i)(t,a),i=n.properties.filter((function(e){return!1!==e.isEditable}));return o.a.createElement(\"div\",{id:\"profile-customize-popover\",className:\"profile-customize-popover\"},o.a.createElement(M.a,{disableFocusRipple:!0,disableRipple:!0,disableElevation:!0,disableTouchRipple:!0,variant:\"text\",disabled:0===i.length,component:Wo.a,style:{textDecorationColor:\"#007bff\"},onClick:this.onTogglePopover,className:te()(this.props.classes.buttonLink)},\"Customize\"),o.a.createElement(ni,{open:this.state.showPopover,anchorEl:this.state.anchorEl,onClose:this.onTogglePopover,style:{zIndex:1400},anchorOrigin:{vertical:\"center\",horizontal:\"left\"},transformOrigin:{vertical:\"center\",horizontal:\"right\"}},o.a.createElement(Vl,{profileName:l,profileLabel:r,customizations:this.props.customizations,provisioner:n,editablePropertiesFromProfile:i,onSave:this.onProfileSelect.bind(this,l),disabled:this.props.disabled,onClose:this.onTogglePopover})))}}])&&ql(t.prototype,n),a&&ql(t,a),l}(r.PureComponent);ti(ai,\"propTypes\",{profile:_o.a.object,onProfileSelect:_o.a.func,customizations:_o.a.object,disabled:_o.a.bool,classes:_o.a.object}),ti(ai,\"defaultProps\",{customizations:{}});var ri=Object(Kl.a)((function(){return{buttonLink:{\"&:hover\":{backgroundColor:\"inherit\",color:\"#007bff\"},fontWeight:400,\"& span\":{color:\"#007bff\"},\"&.Mui-disabled\":{color:\"inherit\",\"& span\":{color:\"rgba(0, 0, 0, 0.26)\"}},fontFamily:\"var(--font-family)\",textTransform:\"none\",fontSize:\"13px\",marginBottom:\"2px\",paddingLeft:0}}}))(ai),oi=n(1565),li=n(161),ii=n.n(li);n(1776),n(164),n(1988),n(106),n(158),n(91),n(1553),n(532),n(477);var ci=n(1566),si=n(1551),ui=n(24);function pi(e){return(pi=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mi(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function fi(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function gi(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function bi(e,t){return(bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vi(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=yi(e);if(t){var r=yi(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return hi(this,n)}}function hi(e,t){return!t||\"object\"!==pi(t)&&\"function\"!=typeof t?Ei(e):t}function Ei(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Si=\"features.PipelineDetails.ProfilesListView\";n(1989);var Oi=[\"enablePredefinedAutoScaling\",\"workerNumNodes\",\"secondaryWorkerNumNodes\",\"autoScalingPolicy\",\"masterNumNodes\",\"masterCPUs\",\"workerCPUs\"],Ti=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bi(e,t)}(l,e);var t,n,a,r=vi(l);function l(){var e;fi(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return xi(Ei(e=r.call.apply(r,[this].concat(n))),\"state\",{profiles:[],provisionersMap:{},loading:!0,selectedProfile:e.props.selectedProfile.name||\"\",defaultProfile:\"\",profileCustomizations:e.props.selectedProfile.profileCustomizations||{}}),xi(Ei(e),\"onProfileSelect\",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;e.props.disabled||(e.setState({selectedProfile:t}),e.props.onProfileSelect&&e.props.onProfileSelect(t,n,a))})),xi(Ei(e),\"onProfileSelectWithoutCustomization\",(function(t,n,a){n&&e.onProfileSelect(t,{},a)})),xi(Ei(e),\"renderGridHeader\",(function(){return o.a.createElement(\"div\",{className:\"grid-header\"},o.a.createElement(\"div\",{className:\"grid-row\"},o.a.createElement(\"div\",null),o.a.createElement(\"strong\",null,Re.a.translate(\"features.Cloud.Profiles.ListView.profileName\")),o.a.createElement(\"strong\",null,Re.a.translate(\"features.Cloud.Profiles.common.provisioner\")),o.a.createElement(\"strong\",null,Re.a.translate(\"features.Cloud.Profiles.common.totalWorkerCores\")),o.a.createElement(\"strong\",null,Re.a.translate(\"commons.scope\")),o.a.createElement(\"strong\",null,Re.a.translate(\"commons.status\")),o.a.createElement(\"strong\",null),o.a.createElement(\"strong\",null)))})),xi(Ei(e),\"renderProfileRow\",(function(t){var n=t.scope===wo.h.SYSTEM?wo.k:Object(d.d)(),a=\"\".concat(location.protocol,\"//\").concat(location.host,\"/cdap/ns/\").concat(n,\"/profiles/details/\").concat(t.name),r=Object(Pl.i)(t.name,t.scope),l=e.state.selectedProfile||\"\";l=Object(Pl.e)(l);var i=t.provisioner.name,c=e.state.provisionersMap[i]||i,s=si.b[t.status],u=\"enabled\"===s,p=e.onProfileSelectWithoutCustomization.bind(Ei(e),r,u),m=t.label||t.name,f=function(){return u?o.a.createElement(ri,{profile:t,onProfileSelect:e.onProfileSelect,disabled:e.props.disabled,customizations:t.name===l?e.state.profileCustomizations:{}}):o.a.createElement(\"div\",null,\"Customize\")},g=t.provisioner.totalProcessingCpusLabel||\"--\";t.name===l&&Lo()(Oi,Object.keys(e.state.profileCustomizations)).length>0&&(g=\"Custom\");var b=t.provisioner.properties;if(t.name===l)for(var v=function(){var e=di(E[h],2),t=e[0],n=e[1],a=b.findIndex((function(e){return e.name===t}));a>-1&&(b[a].value=n)},h=0,E=Object.entries(e.state.profileCustomizations);h<E.length;h++)v();return o.a.createElement(\"div\",{key:r,className:te()(\"grid-row grid-link \".concat(s),{active:e.state.selectedProfile===r})},o.a.createElement(\"div\",{onClick:p},e.state.selectedProfile===r?o.a.createElement(ue.a,{name:\"icon-check\",className:\"text-success\"}):null),o.a.createElement(\"div\",{className:\"profile-label\",title:m,onClick:p},function(t){return t!==e.state.defaultProfile?null:o.a.createElement(ue.a,{name:\"icon-star\"})}(r),m),o.a.createElement(\"div\",{onClick:p},c),o.a.createElement(\"div\",{onClick:p},g,o.a.createElement(oi.a,{properties:b})),o.a.createElement(\"div\",{onClick:p},t.scope),o.a.createElement(\"div\",{className:\"profile-status\",onClick:p},Re.a.translate(\"features.Cloud.Profiles.common.\".concat(s))),o.a.createElement(f,null),o.a.createElement(\"div\",null,o.a.createElement(\"a\",{href:a},\" View \")))})),xi(Ei(e),\"renderGridBody\",(function(){if(e.props.disabled){var t=Object(Pl.e)(e.state.selectedProfile),n=e.state.profiles.filter((function(e){return e.name===t}));if(n.length)return n.map(e.renderProfileRow)}return o.a.createElement(\"div\",{className:\"grid-body\"},e.state.profiles.map(e.renderProfileRow))})),xi(Ei(e),\"renderGrid\",(function(){return e.state.profiles.length?o.a.createElement(\"div\",{className:\"profiles-listview grid-wrapper\"},o.a.createElement(\"strong\",null,e.props.tableTitle),e.props.disabled||!e.props.showProfilesCount?null:o.a.createElement(\"div\",{className:\"profiles-count text-right\"},Re.a.translate(\"\".concat(Si,\".countProfiles\"),{context:e.state.profiles.length})),o.a.createElement(\"div\",{className:te()(\"grid grid-container\",{disabled:e.props.disabled})},e.renderGridHeader(),e.renderGridBody())):o.a.createElement(\"div\",null,o.a.createElement(\"strong\",null,Re.a.translate(\"\".concat(Si,\".noProfiles\"))),o.a.createElement(\"div\",null,o.a.createElement(\"a\",{href:\"/cdap/ns/\".concat(Object(d.d)(),\"/profiles/create\")},Re.a.translate(\"\".concat(Si,\".click\"))),o.a.createElement(\"span\",null,Re.a.translate(\"\".concat(Si,\".toCreate\")))))})),e}return t=l,(n=[{key:\"componentWillReceiveProps\",value:function(e){this.state.selectedProfile===e.selectedProfile.name&&ii()(e.selectedProfile.profileCustomizations,this.state.customizations)||this.setState({selectedProfile:e.selectedProfile.name,profileCustomizations:e.selectedProfile.profileCustomizations})}},{key:\"componentWillMount\",value:function(){var e=this,t=this.props.appName||Go.getState().name,n=Object(d.d)();Sa.Observable.forkJoin(Io.a.list({namespace:Object(d.d)()}),Io.a.getSystemProfiles(),Ao.a.getAppPreferencesResolved({namespace:n,appId:t}),Ao.a.getNamespacePreferencesResolved({namespace:n})).subscribe((function(t){var n=di(t,4),a=n[0],r=void 0===a?[]:a,o=n[1],l=void 0===o?[]:o,i=n[2],c=void 0===i?{}:i,s=n[3],u=void 0===s?{}:s,p=l;!1===ui.a.showNativeProfile&&(p=l.filter((function(e){return\"native\"!==e.name})));var d=Object(m.A)(e.state.profileCustomizations)?function(e){var t={};return Object.keys(e).forEach((function(n){if(-1!==n.indexOf(wo.a.PROFILE_PROPERTIES_PREFERENCE)){var a=n.replace(\"\".concat(wo.a.PROFILE_PROPERTIES_PREFERENCE,\".\"),\"\");t[a]=e[n]}})),t}(c):e.state.profileCustomizations,f=r.concat(p),g=u[wo.a.PROFILE_NAME_PREFERENCE_PROPERTY]||wo.a.DEFAULT_PROFILE_NAME,b=e.state.selectedProfile||c[wo.a.PROFILE_NAME_PREFERENCE_PROPERTY]||g,v=Object(Pl.e)(b),h=[];f.forEach((function(e){e.name===v?h.unshift(e):h.push(e)})),e.setState({loading:!1,profiles:h,selectedProfile:b,defaultProfile:g,profileCustomizations:d})}),(function(e){console.log(\"ERROR in fetching profiles from backend: \",e)}))}},{key:\"componentDidMount\",value:function(){var e=this;Object(ci.a)().subscribe((function(t){e.setState({provisionersMap:t.nameToLabelMap})}))}},{key:\"render\",value:function(){if(this.state.loading)return o.a.createElement(\"div\",null,o.a.createElement(U.a,null));if(this.props.disabled){var e=Object(Pl.e)(this.state.selectedProfile);if(!this.state.profiles.filter((function(t){return t.name===e})).length)return o.a.createElement(\"div\",{className:\"profiles-list-view-on-pipeline empty-container\"},o.a.createElement(\"h4\",null,\"No Profile selected\"))}return o.a.createElement(\"div\",{className:\"profiles-list-view-on-pipeline\"},this.renderGrid())}}])&&gi(t.prototype,n),a&&gi(t,a),l}(r.Component);xi(Ti,\"propTypes\",{onProfileSelect:_o.a.func,selectedProfile:_o.a.object,tableTitle:_o.a.string,showProfilesCount:_o.a.bool,disabled:_o.a.bool,provisionersMap:_o.a.object,appName:_o.a.string}),xi(Ti,\"defaultProps\",{selectedProfile:{},showProfilesCount:!0,disabled:!1});var Ci=n(1991),wi=n.n(Ci),Ni=n(1997),ji=n.n(Ni),Ri=function(){return(Ri=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Pi=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},_i=function(e){var t=e.onChange,n=e.value;return r.createElement(D.c,{widgetProperty:{label:\"Task memory\",name:\"taskMemory\",\"widget-type\":\"memory-textbox\"},pluginProperty:{required:!1,name:\"taskMemory\",description:\"The amount of memory for each tasks.\"},value:n.toString(),onChange:function(e){t(parseInt(e,10))}})},Ii=Os(u()((function(e){return{root:{position:\"absolute\",width:\"600px\",backgroundColor:e.palette.white[50],boxShadow:\"0 2px 4px rgba(0,0,0,.5)\",top:\"10px\",right:\"calc(-600px / 2 + 70px / 2)\",zIndex:6},header:{height:\"50px\",backgroundColor:e.palette.grey[600],display:\"flex\",alignItems:\"center\",paddingLeft:\"15px\"},taskMemory:{width:\"200px\",margin:\"15px 0 25px\"},body:{padding:\"10px 15px\"},content:{height:\"300px\",\"& .grid-row.active > div:first-child\":{textOverflow:\"unset\"}},footer:{padding:\"10px 15px\",\"& > *\":{marginRight:\"5px\"}}}}))((function(e){var t=e.classes,n=e.name,a=e.onToggle,o=Pi(r.useState({}),2),l=o[0],i=o[1],c=Pi(r.useState({}),2),s=c[0],u=c[1],p=Pi(r.useState(!1),2),m=p[0],f=p[1],g=Pi(r.useState(2048),2),b=g[0],v=g[1],h=Pi(r.useState(2048),2),E=h[0],y=h[1];return r.useEffect((function(){var e={namespace:Object(d.d)(),appId:n};Ao.a.getAppPreferencesResolved(e).subscribe((function(e){var t=e[\"system.profile.name\"],n=e[\"system.resources.memory\"];if(n&&(v(n),y(E)),t){var a=wi()(e,(function(e,t){return t.startsWith(\"system.profile.properties.\")})),r={name:t,profileCustomizations:ji()(a,(function(e,t){return t.slice(\"system.profile.properties.\".length)}))};i(r),u(r)}}))}),[]),r.createElement(jn.a,{onClickAway:a},r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.header},r.createElement(Q.b,{type:Q.a.h4,label:\"Configure\"})),r.createElement(\"div\",{className:t.body},r.createElement(Q.b,{type:Q.a.h5,label:\"Memory\"}),r.createElement(\"div\",{className:t.taskMemory},r.createElement(_i,{value:b,onChange:v})),r.createElement(Q.b,{type:Q.a.h5,label:\"Compute profile\"}),r.createElement(\"div\",{className:t.content},r.createElement(Ti,{appName:n,onProfileSelect:function(e,t){void 0===t&&(t={}),i({name:e,profileCustomizations:t})},selectedProfile:l,tableTitle:\"Select the compute profile you want to use to run this replication job\"}))),r.createElement(\"div\",{className:t.footer},r.createElement(M.a,{variant:\"contained\",color:\"primary\",onClick:function(){var e=ii()(l,s),t=b===E;if(e&&t)a();else{f(!0);var r={namespace:Object(d.d)(),appId:n};Ao.a.getAppPreferences(r).subscribe((function(n){var o,i=n;if(!e){var c=ji()(l.profileCustomizations,(function(e,t){return\"system.profile.properties.\"+t}));i=Ri(Ri(Ri({},i),c),((o={})[\"system.profile.name\"]=l.name,o))}t||(i[\"system.resources.memory\"]=b),Ao.a.setAppPreferences(r,i).subscribe((function(){y(b),u(l),f(!1),a()}),(function(e){f(!1),console.log(\"err\",e)}))}))}},disabled:m},\"Save\"),r.createElement(M.a,{color:\"primary\",onClick:a},\"Cancel\"))))}))),ki=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},Li=Os(u()((function(e){return{icon:{transform:\"rotate(90deg)\"},modelessContainer:{position:\"relative\"},actionButtonRootOverride:{width:\"70px\"}}}))((function(e){var t=e.classes,n=e.status,a=ki(r.useState(!1),2),o=a[0],l=a[1];function i(){l(!o)}return r.useEffect((function(){-1!==Ai.indexOf(n)&&l(!1)}),[n]),r.createElement(\"div\",{className:t.root},r.createElement(xo,{icon:r.createElement(ue.a,{name:\"icon-sliders\",className:t.icon}),text:\"Configure\",onClick:i,disabled:-1!==Ai.indexOf(n),classes:{root:t.actionButtonRootOverride}}),r.createElement(E.a,{condition:o},r.createElement(\"div\",{className:t.modelessContainer},r.createElement(Ii,{onToggle:i}))))}))),Ai=[wo.g.RUNNING,wo.g.STOPPING,wo.g.STARTING,wo.g.PENDING],Di=Os(u()((function(e){return{root:{display:\"flex\",justifyContent:\"flex-end\"},startBtn:{color:e.palette.green[100]},stopBtn:{color:e.palette.red[100]}}}))((function(e){var t=e.classes,n=e.start,a=e.stop,o=e.status,l=-1!==Ai.indexOf(o);return r.createElement(\"div\",{className:t.root},r.createElement(Li,null),r.createElement(xo,{icon:r.createElement(ue.a,{name:\"icon-stop\",className:t.stopBtn}),text:\"Stop\",onClick:a,disabled:o!==wo.g.RUNNING&&o!==wo.g.PENDING}),r.createElement(xo,{icon:r.createElement(ue.a,{name:\"icon-play\",className:t.startBtn}),text:\"Start\",onClick:n,disabled:l}),r.createElement(So,null),r.createElement(To,null),r.createElement(So,null),r.createElement(Co,null),r.createElement(Ro,null))}))),Mi=Os(u()((function(e){return{root:{height:\"70px\",backgroundColor:e.palette.grey[700],display:\"grid\",gridTemplateColumns:\"1fr 1fr 550px\",alignContent:\"center\",paddingLeft:\"40px\",paddingRight:\"40px\",\"& > div\":{display:\"flex\",alignItems:\"center\"}},caret:{marginRight:\"5px\"},divider:{marginLeft:\"5px\",marginRight:\"10px\"}}}))((function(e){var t=e.classes,n=e.name,a=e.description;return r.createElement(\"div\",{className:t.root},r.createElement(\"div\",{className:t.heading},r.createElement(l.Link,{to:\"/ns/\"+Object(d.d)()+\"/replication\"},r.createElement(\"span\",{className:t.caret},\"«\"),r.createElement(\"span\",null,\"All jobs\")),r.createElement(\"span\",{className:t.divider},\"|\"),r.createElement(Q.b,{type:Q.a.h2,label:n})),r.createElement(\"div\",null,a),r.createElement(Di,null))})));function Ui(e,t){return Math.floor(e/t)*t}var Bi={contextToTags:function(e){var t,n,a,r;if((t=e.length?e.split(\".\"):[]).length%2!=0)return null;for(n={},a=0;a<t.length;a+=2)r=t[a+1].replace(/~/g,\".\"),n[t[a]]=r;return n},constructQuery:function(e,t,n,a,r){var o,l;return o={start:n.startTime||\"now-60s\",end:n.endTime||\"now\"},n.resolution&&(o.resolution=n.resolution),(l={})[e]={tags:t,metrics:n.names},(r=r||[]).length&&(l[e].groupBy=r),(a=!1!==a)&&(l[e].timeRange=o),l},roundUpToNearest:function(e,t){return Math.ceil(e/t)*t},roundDownToNearest:Ui,aggregate:function(e,t){for(var n={},a=Object.keys(e),r=Ui(a.length,t),o=0;o<r;o+=t){for(var l=0,i=0;i<t;i++)l+=e[a[o+i]];n[a[o]]=l}if(r<a.length){var c=a[r];for(n[c]=0,o=r;o<a.length;o++)n[c]+=e[a[o]]}return n},tagToContext:function(e){return e.name.replace(/\\./g,\"~\")+\".\"+e.value.replace(/\\./g,\"~\")},tagsToParams:function(e){var t=Object.keys(e),n=[];return t.forEach((function(t){var a=e[t];n.push(\"tag=\"+t+\":\"+a)})),n.join(\"&\")}},Fi=n(495),zi=function(){return(zi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Gi={inserts:0,updates:0,deletes:0,errors:0,latency:0,eventsPerMin:0,totalEvents:0,dataReplicated:0},Wi={\"user.dml.inserts\":\"inserts\",\"user.dml.updates\":\"updates\",\"user.dml.deletes\":\"deletes\",\"user.dml.errors\":\"errors\",\"user.dml.latency.seconds\":\"latency\",\"user.dml.data.processed.bytes\":\"dataReplicated\"};var Hi=n(531),Vi=u()((function(e){return{columnGroups:{backgroundColor:e.palette.white[50],display:\"grid\"}}}))((function(e){var t=e.classes,n=e.children,a={gridTemplateColumns:e.columnTemplate};return o.a.createElement(\"div\",{className:t.columnGroups,style:a},n)})),Ki=u()((function(e){return{columnGroup:{position:\"relative\",height:\"30px\",\"& > *\":{position:\"absolute\",transform:\"translate(-50%, -50%)\",left:\"50%\",top:\"50%\"}},line:{margin:\"2px 0 0 0\",width:\"100%\",borderWidth:\"2px\",borderColor:e.palette.grey[400]},groupLabel:{backgroundColor:e.palette.white[50],paddingLeft:\"15px\",paddingRight:\"15px\",width:\"max-content\"}}}))((function(e){var t=e.classes,n=e.gridColumn,a=e.children,r={gridColumn:n};return o.a.createElement(\"div\",{className:t.columnGroup,style:r},o.a.createElement(\"hr\",{className:t.line}),o.a.createElement(\"div\",{className:t.groupLabel},a))})),Qi=n(718),Yi=n(491),qi=[{value:\"1h\",label:\"last 1 hour\"},{value:\"12h\",label:\"last 12 hours\"},{value:\"24h\",label:\"last 24 hours\"},{value:\"7d\",label:\"last 7 days\"}],Ji=u()((function(e){return{root:{color:e.palette.grey[100],fontSize:\"1rem\"},input:{\"&:focus\":{backgroundColor:\"transparent\"}}}}))(Yi.a),$i=u()((function(){return{select:{marginLeft:\"5px\"},selectRoot:{textDecoration:\"underline\",marginTop:\"2px\"},menu:{\"z-index\":\"1301 !important\"}}}))((function(e){var t=e.classes,n=Object(r.useContext)(xs),a=n.timeRange,l=n.setTimeRange;return o.a.createElement(Qi.a,{className:t.select,value:a,onChange:function(e){l(e.target.value)},input:o.a.createElement(Ji,null),MenuProps:{className:t.menu},classes:{root:t.selectRoot}},qi.map((function(e){return o.a.createElement(sa.a,{key:e.value,value:e.value,className:t.option},e.label)})))})),Xi=function(){return(Xi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Zi=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},ec=u()((function(e){return{root:{height:\"100%\"},grid:{height:\"calc(100% - 50px)\"},subtitle:{marginTop:\"10px\",marginBottom:\"10px\",display:\"grid\",gridTemplateColumns:\"50% 50%\",alignItems:\"center\",\"& > div:last-child\":{textAlign:\"right\"}},search:{width:\"250px\",\"& input\":{paddingTop:\"10px\",paddingBottom:\"10px\"}},SNAPSHOTTING:{color:e.palette.blue[100]},REPLICATING:{color:e.palette.blue[100]},FAILING:{color:e.palette.red[100]},IDLE:{color:e.palette.grey[200]}}}))((function(e){var t=e.classes,n=Object(r.useContext)(xs),a=n.name,l=n.tables,i=n.columns,c=n.offsetBasePath,s=n.timeRange,u=Zi(Object(r.useState)(Object(Oe.Map)()),2),f=u[0],g=u[1],b=Zi(Object(r.useState)(w(l.toList())),2),v=b[0],h=b[1],E=Zi(Object(r.useState)(\"\"),2),y=E[0],x=E[1],S=Zi(Object(r.useState)({}),2),T=S[0],C=S[1];function w(e){return e.sort((function(e,t){return Object(Hi.a)()(e.get(\"table\"),t.get(\"table\"))})).toList()}var j=Ue()((function(){if(y&&0!==y.length){var e=l.filter((function(e){var t=Object(O.i)(e).toLowerCase(),n=y.toLowerCase();return-1!==t.indexOf(n)})).toList();h(w(e))}else h(w(l.toList()))}),300);return Object(r.useEffect)(j,[y,l]),Object(r.useEffect)((function(){var e={namespace:Object(d.d)()},t={name:a};c&&c.length>0&&(t.offsetBasePath=c);var n=p.a.pollTableStatus(e,t).subscribe((function(e){var t=e.tables,n=Object(Oe.Map)();t.forEach((function(e){var t=Object(O.g)(e);n=n.set(t,e.state)})),g(n)}));return function(){n.unsubscribe()}}),[c]),Object(r.useEffect)((function(){if(0!==l.size){var e={namespace:Object(d.d)(),app:a,worker:N.a.programId,run:\"*\",instance:\"*\"},t=Bi.tagsToParams(e),n=[\"inserts\",\"updates\",\"deletes\",\"errors\",\"latency.seconds\",\"data.processed.bytes\"].map((function(e){return\"metric=user.dml.\"+e})).join(\"&\"),r=[\"start=now-\"+s,\"end=now\",\"aggregate=false\",\"groupBy=ent\",t,n].join(\"&\"),o=Fi.a.pollQueryTags({params:r}).subscribe((function(e){C(function(e,t){var n={};t.forEach((function(e){var t=Object(O.h)(e);n[t]=zi({tableName:t},Gi)})),e.series.forEach((function(e){var t=Wi[e.metricName],a=Object.values(e.grouping)[0];if(n[a]){var r=e.data.reduce((function(e,t){return e+t.value}),0);\"latency\"===t?n[a][t]=r/e.data.length/m.d:n[a][t]+=r}}));var a=(e.endTime-e.startTime)/m.d;return t.forEach((function(e){var t=Object(O.h)(e);if(n[t]){var r=n[t],o=r.inserts+r.updates+r.deletes;n[t].eventsPerMin=Object(m.M)(o/a,2),n[t].totalEvents=Object(m.M)(o),n[t].latency=Object(m.M)(n[t].latency,2),n[t].dataReplicated=Object(m.j)(n[t].dataReplicated)}})),n}(e,l.toList().toJS()))}),(function(e){console.log(\"err\",e)}));return function(){o&&\"function\"==typeof o.unsubscribe&&o.unsubscribe()}}}),[s,l]),o.a.createElement(\"div\",{className:t.root},o.a.createElement(\"div\",{className:t.subtitle},o.a.createElement(\"div\",null,\"Replicating \",o.a.createElement(\"strong\",null,l.size),\" tables\"),o.a.createElement(\"div\",null,o.a.createElement(le.a,{className:t.search,value:y,onChange:function(e){x(e.target.value)},variant:\"outlined\",placeholder:\"Search by table name\",InputProps:{startAdornment:o.a.createElement(ie.a,{position:\"start\"},o.a.createElement(se.a,null))}}))),o.a.createElement(ir.a,{columnTemplate:\"30px 2fr 100px 1fr 1fr 1fr 1fr 100px 1fr 1fr 1fr\",classes:{grid:t.grid}},o.a.createElement(cr.a,null,o.a.createElement(Vi,null,o.a.createElement(Ki,{gridColumn:\"4 / span 8\"},\"Activities in the \",o.a.createElement($i,null))),o.a.createElement(sr.a,null,o.a.createElement(ur.a,null,o.a.createElement(ue.a,{name:\"icon-circle\",className:t.IDLE})),o.a.createElement(ur.a,null,\"Table name\"),o.a.createElement(ur.a,{textAlign:\"right\"},o.a.createElement(\"div\",null,\"No. columns\"),o.a.createElement(\"div\",null,\"replicated\")),o.a.createElement(ur.a,{textAlign:\"right\"},o.a.createElement(\"div\",null,\"Data\"),o.a.createElement(\"div\",null,\"replicated\")),o.a.createElement(ur.a,{textAlign:\"right\"},o.a.createElement(\"div\",null,\"No. events\"),o.a.createElement(\"div\",null,\"replicated\")),o.a.createElement(ur.a,{textAlign:\"right\"},o.a.createElement(\"div\",null,\"Throughput\"),o.a.createElement(\"div\",null,\"(events/min)\")),o.a.createElement(ur.a,{textAlign:\"right\"},o.a.createElement(\"div\",null,\"Latency\"),o.a.createElement(\"div\",null,\"(min)\")),o.a.createElement(ur.a,null),o.a.createElement(ur.a,{textAlign:\"right\"},\"Inserts\"),o.a.createElement(ur.a,{textAlign:\"right\"},\"Updates\"),o.a.createElement(ur.a,{textAlign:\"right\"},\"Deletes\"))),o.a.createElement(pr.a,null,v.toList().map((function(e){var n=Object(O.g)(e),a=i.get(n),r=a?a.size:0,l=f.get(n)||\"IDLE\",c=\"SNAPSHOTTING\"===l?\"icon-circle-o\":\"icon-circle\",s=Object(O.i)(e),u=Object(O.h)(e),p=T[u]||Xi({},Gi);return o.a.createElement(sr.a,{key:n.toString()},o.a.createElement(ur.a,null,o.a.createElement(\"span\",{title:In()(l)},o.a.createElement(ue.a,{name:c,className:t[l]}))),o.a.createElement(ur.a,null,s),o.a.createElement(ur.a,{textAlign:\"right\"},0===r?\"All\":r),o.a.createElement(ur.a,{textAlign:\"right\"},p.dataReplicated),o.a.createElement(ur.a,{textAlign:\"right\"},p.totalEvents),o.a.createElement(ur.a,{textAlign:\"right\"},p.eventsPerMin),o.a.createElement(ur.a,{textAlign:\"right\"},p.latency),o.a.createElement(ur.a,null),o.a.createElement(ur.a,{textAlign:\"right\"},Object(m.M)(p.inserts)),o.a.createElement(ur.a,{textAlign:\"right\"},Object(m.M)(p.updates)),o.a.createElement(ur.a,{textAlign:\"right\"},Object(m.M)(p.deletes)))})))))})),tc=u()((function(){return{root:{marginTop:\"25px\",height:\"calc(100% - 150px)\"}}}))((function(e){var t=e.classes;return o.a.createElement(\"div\",{className:t.root},o.a.createElement(ec,null))})),nc=function(){return(nc=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ac={\"user.dml.inserts\":\"inserts\",\"user.dml.updates\":\"updates\",\"user.dml.deletes\":\"deletes\",\"user.dml.errors\":\"errors\",\"user.dml.latency.seconds\":\"latency\",\"user.dml.data.processed.bytes\":\"dataReplicated\"},rc={dataReplicated:0,eventsPerMin:0,latency:0,errors:0,totalEvents:0,inserts:0,updates:0,deletes:0};var oc=function(){return(oc=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},lc=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};var ic=u()((function(e){return{root:{marginBottom:\"30px\"},grid:{display:\"grid\",gridTemplateColumns:\"repeat(8, 1fr)\",margin:\"0 -40px\",padding:\"0 25px\",\"& > div\":{padding:\"0 15px\"}},unit:{color:e.palette.grey[200],\"& > div\":{padding:\"0 15px\"}},header:{fontSize:\"14px\",fontWeight:600,backgroundColor:e.palette.grey[700],alignItems:\"end\",\"& > div\":{padding:\"5px 15px\"}},metricContent:{fontSize:\"26px\"},error:{color:e.palette.red[100]},latencyLabel:{fontWeight:400,fontSize:\"16px\",color:e.palette.grey[100]},marginRight:{marginRight:\"5px\"}}}))((function(e){var t=e.classes,n=Object(r.useContext)(xs),a=n.name,l=n.timeRange,i=n.tables,c=lc(Object(r.useState)(oc({},rc)),2),s=c[0],u=c[1];Object(r.useEffect)((function(){var e={namespace:Object(d.d)(),app:a,worker:N.a.programId,run:\"*\",instance:\"*\"},t=Bi.tagsToParams(e),n=[\"inserts\",\"updates\",\"deletes\",\"errors\",\"latency.seconds\",\"data.processed.bytes\"].map((function(e){return\"metric=user.dml.\"+e})).join(\"&\"),r=[\"start=now-\"+l,\"end=now\",\"aggregate=false\",\"resolution=auto\",t,n].join(\"&\"),o=Fi.a.pollQueryTags({params:r}).subscribe((function(e){u(function(e,t){var n=nc({},rc);e.series.forEach((function(e){var t=ac[e.metricName],a=e.data.reduce((function(e,t){return e+t.value}),0);n[t]+=\"latency\"===t?a/e.data.length:a}));var a=(e.endTime-e.startTime)/m.d,r=n.inserts+n.updates+n.deletes;return n.totalEvents=r,n.eventsPerMin=Object(m.M)(r/a,2),n.latency=Math.round(n.latency/t),n.dataReplicated=Object(m.j)(n.dataReplicated),n}(e,i.size))}),(function(e){console.log(\"err\",e)}));return function(){o&&\"function\"==typeof o.unsubscribe&&o.unsubscribe()}}),[l,i]);var p,f,g,b=(p=s.latency,f=Math.floor(p/m.d),g=p%m.d,{minutes:f,seconds:g});return o.a.createElement(\"div\",{className:t.root},o.a.createElement(\"div\",{className:t.grid+\" \"+t.header},o.a.createElement(\"div\",null,\"Data replicated\"),o.a.createElement(\"div\",null,\"Throughput\"),o.a.createElement(\"div\",null,\"Avg latency\"),o.a.createElement(\"div\",null,\"Errors\"),o.a.createElement(\"div\",null,\"Total events\"),o.a.createElement(\"div\",null,\"Inserts\"),o.a.createElement(\"div\",null,\"Updates\"),o.a.createElement(\"div\",null,\"Deletes\")),o.a.createElement(\"div\",{className:t.grid+\" \"+t.metricContent},o.a.createElement(\"div\",null,s.dataReplicated),o.a.createElement(\"div\",null,Object(m.M)(s.eventsPerMin,2)),o.a.createElement(\"div\",null,o.a.createElement(\"span\",null,b.minutes),o.a.createElement(\"span\",{className:t.latencyLabel+\" \"+t.marginRight},\"min\"),o.a.createElement(\"span\",null,b.seconds),o.a.createElement(\"span\",{className:t.latencyLabel},\"sec\")),o.a.createElement(\"div\",{className:t.error},s.errors),o.a.createElement(\"div\",null,Object(O.f)(s.totalEvents,999999)),o.a.createElement(\"div\",null,Object(O.f)(s.inserts,999999)),o.a.createElement(\"div\",null,Object(O.f)(s.updates,999999)),o.a.createElement(\"div\",null,Object(O.f)(s.deletes,999999))),o.a.createElement(\"div\",{className:t.grid+\" \"+t.unit},o.a.createElement(\"div\",null),o.a.createElement(\"div\",null,\"events/min\"),o.a.createElement(\"div\",null),o.a.createElement(\"div\",null),o.a.createElement(\"div\",null),o.a.createElement(\"div\",null),o.a.createElement(\"div\",null),o.a.createElement(\"div\",null)))})),cc=u()((function(){return{applyFont:{fontSize:\"22px\"}}}))((function(e){var t=e.classes;return o.a.createElement(\"div\",null,o.a.createElement(\"span\",{className:t.applyFont},\"Replication job activities - View\"),o.a.createElement($i,{classes:{selectRoot:t.applyFont}}))})),sc=n(1571),uc=n(263),pc=n.n(uc),dc=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},mc=u()((function(){return{root:{posisition:\"absolute\"}}}))((function(e){var t=e.containerId,n=e.data,a=e.chartRenderer,l=e.width,i=e.height,c=e.watchHeight,s=e.watchWidth,u=e.className,p=e.classes,d=e.renderTooltip,m=e.onHover,f=e.onClick,g=e.additionalWatchProperty,b=dc(Object(r.useState)(0),2),v=b[0],h=b[1],E=dc(Object(r.useState)(0),2),y=E[0],x=E[1],S=dc(Object(r.useState)({top:0,left:0,isOpen:!1,activeData:null}),2),O=S[0],T=S[1];function C(e,t,n,a){T({top:e,left:t,isOpen:n,activeData:a||{}}),\"function\"==typeof m&&m(a)}function w(e,t,n,a){T({top:e,left:t,isOpen:n,activeData:a||{}}),\"function\"==typeof f&&f(a)}function N(){var e=document.getElementById(t).getBoundingClientRect();c&&x(e.height),s&&h(e.width)}Object(r.useEffect)((function(){if(!l||!i){N();var e=Sa.Observable.fromEvent(window,\"resize\").debounceTime(500).subscribe(N);return function(){e.unsubscribe()}}}),[]);var j=[n,i,l,v,y];return Array.isArray(g)&&(j=j.concat(g)),Object(r.useEffect)((function(){a(t,n,l||v,i||y,C,w)}),j),o.a.createElement(o.a.Fragment,null,o.a.createElement(\"div\",{className:u+\" \"+p.root,id:t},o.a.createElement(\"svg\",null)),\"function\"==typeof d?d(O):null)})),fc=Object(sc.timeFormat)(\"%m/%d\"),gc=Object(sc.timeFormat)(\"%I:%M %p\"),bc=u()((function(e){return{tooltip:{position:\"absolute\",backgroundColor:e.palette.white[50],boxShadow:e.shadows[3],padding:\"15px\",width:\"250px\"},square:{height:\"15px\",width:\"15px\",display:\"inline-block\"},heading:{marginBottom:\"10px\"},metricContent:{marginBottom:\"5px\",\"& > *\":{marginRight:\"10px\"}},inserts:{backgroundColor:vc.inserts},updates:{backgroundColor:vc.updates},deletes:{backgroundColor:vc.deletes},errors:{backgroundColor:vc.error}}}))((function(e){var t=e.classes,n=e.tooltip,a=n&&n.activeData?n.activeData:{};return o.a.createElement(\"div\",{className:t.tooltip,style:{top:n.top,left:n.left,opacity:n.isOpen?1:0}},o.a.createElement(\"div\",{className:t.heading},o.a.createElement(\"strong\",null,a.formattedTimeRange)),o.a.createElement(\"div\",{className:t.metricContent},o.a.createElement(\"div\",{className:t.square}),o.a.createElement(\"span\",null,\"Data replicated:\"),o.a.createElement(\"span\",null,Object(m.j)(a.dataReplicated,null,!0))),o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.metricContent},o.a.createElement(\"div\",{className:t.square+\" \"+t.deletes}),o.a.createElement(\"span\",null,\"Deletes:\"),o.a.createElement(\"span\",null,a.deletes)),o.a.createElement(\"div\",{className:t.metricContent},o.a.createElement(\"div\",{className:t.square+\" \"+t.updates}),o.a.createElement(\"span\",null,\"Updates:\"),o.a.createElement(\"span\",null,a.updates)),o.a.createElement(\"div\",{className:t.metricContent},o.a.createElement(\"div\",{className:t.square+\" \"+t.inserts}),o.a.createElement(\"span\",null,\"Inserts:\"),o.a.createElement(\"span\",null,a.inserts)),o.a.createElement(\"div\",{className:t.metricContent},o.a.createElement(\"div\",{className:t.square+\" \"+t.errors}),o.a.createElement(\"span\",null,\"Errors:\"),o.a.createElement(\"span\",null,a.errors))))})),vc={inserts:\"#185ABC\",updates:\"#669DF6\",deletes:\"#AECBFA\",error:\"#D40001\",horizontalLine:\"#DDDDDD\",verticalLine:\"#979797\",legend:\"#999999\",tick:\"#333333\"};function hc(e,t,n,a,r){var o=10,l=40,i=60,c=n-i-35,s=300-o-l,u=sc.select(\"#\"+e+\" > svg\").attr(\"height\",300).attr(\"width\",n),p=\"replication-throughput-graph-container\";sc.select(\"#\"+e+\" > svg > #\"+p).remove(),sc.select(\"#\"+e+\" > .graph-tooltip\").remove();var d=u.append(\"g\").attr(\"id\",p).attr(\"transform\",\"translate(\"+i+\", \"+o+\")\"),m=sc.scaleBand().domain(t.map((function(e){return e.time}))).range([0,c]).padding(.1),f=Math.max(1,sc.max(t.map((function(e){return e.inserts+e.updates+e.deletes})))),g=sc.scaleLinear().domain([0,1.25*f]).rangeRound([s,0]).nice(),b=sc.axisLeft(g).ticks(null,\"s\").tickSizeInner(-c).tickFormat((function(e){if(parseInt(e,10)===e)return e<1e3?e:pc()(e).format(\"0.0a\")})),v=d.append(\"g\").attr(\"class\",\"axis axis-y\");v.call(b),v.select(\".domain\").remove(),v.selectAll(\"line\").attr(\"stroke\",vc.horizontalLine),v.selectAll(\".tick text\").style(\"font-size\",\"12px\").style(\"fill\",vc.tick);var h=sc.axisBottom(m).tickSizeOuter(0).tickFormat(fc),E=d.append(\"g\").attr(\"class\",\"axis axis-x\").attr(\"transform\",\"translate(0, \"+s+\")\");E.call(h),E.select(\".domain\").attr(\"stroke\",vc.horizontalLine),E.selectAll(\"line\").attr(\"stroke\",vc.verticalLine),E.selectAll(\".tick\").filter((function(e,n){return n%Math.floor(t.length/4)!=0})).remove(),E.selectAll(\".tick\").append(\"text\").text(gc).attr(\"dy\",30),E.selectAll(\".tick text\").style(\"font-size\",\"12px\").style(\"fill\",vc.tick);var y=m.bandwidth(),x=d.append(\"g\").attr(\"class\",\"bar-container\").selectAll(\"rect\").data(t).enter(),S=function(e){return m(e.time)},O=function(e){return s-g(e.inserts)},T=function(e){return s-g(e.updates)},C=function(e){return s-g(e.inserts+e.updates+e.deletes)+y+5};x.append(\"rect\").attr(\"class\",\"inserts\").attr(\"fill\",vc.inserts).attr(\"width\",y).attr(\"height\",O).attr(\"x\",S).attr(\"y\",(function(e){return g(e.inserts)})),x.append(\"rect\").attr(\"class\",\"updates\").attr(\"fill\",vc.updates).attr(\"width\",y).attr(\"height\",T).attr(\"x\",S).attr(\"y\",(function(e){return g(e.updates)-O(e)})),x.append(\"rect\").attr(\"class\",\"deletes\").attr(\"fill\",vc.deletes).attr(\"width\",y).attr(\"height\",(function(e){return s-g(e.deletes)})).attr(\"x\",S).attr(\"y\",(function(e){return g(e.deletes)-O(e)-T(e)}));var w=d.append(\"g\").attr(\"class\",\"error-container\").selectAll(\"circle\").data(t).enter(),N=function(e){return S(e)+y/2},j=function(e){return s-C(e)+y/2};w.filter((function(e){return e.errors>0})).append(\"circle\").attr(\"cx\",N).attr(\"cy\",j).attr(\"r\",y/2).attr(\"fill\",vc.error);var R=.8*y;w.filter((function(e){return e.errors>0})).append(\"text\").text(\"!\").attr(\"fill\",\"white\").attr(\"x\",N).attr(\"y\",(function(e){return j(e)+R/2-(y-R)/2})).attr(\"text-anchor\",\"middle\").style(\"font-size\",R),d.append(\"g\").attr(\"class\",\"hover-group-container\").selectAll(\"rect\").data(t).enter().append(\"rect\").attr(\"class\",\"hover-container\").attr(\"opacity\",0).attr(\"width\",y).attr(\"height\",C).attr(\"x\",S).attr(\"y\",(function(e){return s-C(e)})).on(\"mouseover\",(function(e){var t=s-C(e)-40-2*(l+o)+\"px\",n=S(e)+i+15;n+250>=c&&(n-=n+250-c),r(t,n+=\"px\",!0,e)})).on(\"mouseout\",(function(e){r(0,0,!1,e)})),d.append(\"g\").attr(\"class\",\"legend axis-y-left-legend\").append(\"text\").attr(\"transform\",\"translate(-45, \"+s/2+\") rotate(-90)\").text(\"No. of events\").attr(\"text-anchor\",\"middle\").style(\"font-size\",\"12px\").style(\"fill\",vc.legend)}var Ec=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},yc=u()((function(){return{separator:{marginLeft:\"5px\",marginRight:\"5px\"},active:{fontWeight:\"bold\",textDecoration:\"underline\"},switcher:{cursor:\"pointer\"},switcherContainer:{position:\"absolute\",left:0,right:0},switcherPosition:{position:\"absolute\",right:\"15px\",top:\"-25px\"}}}))((function(e){var t,n,a=e.classes,l=e.chart,i=e.table,c=Ec(Object(r.useState)(!1),2),s=c[0],u=c[1];function p(e){return function(){u(e)}}return o.a.createElement(\"div\",{className:a.root},o.a.createElement(\"div\",{className:a.switcherContainer},o.a.createElement(\"div\",{className:a.switcherPosition},o.a.createElement(\"span\",{onClick:p(!1),className:te()(a.switcher,(t={},t[a.active]=!s,t))},\"Chart\"),o.a.createElement(\"span\",{className:a.separator},\"|\"),o.a.createElement(\"span\",{onClick:p(!0),className:te()(a.switcher,(n={},n[a.active]=s,n))},\"Table\"))),o.a.createElement(\"div\",null,s?i:l))})),xc=u()((function(){return{grid:{\"&.grid-wrapper\":{height:\"100%\",\"& .grid.grid-container.grid-compact\":{maxHeight:\"345px\",\"& .grid-row\":{gridTemplateColumns:\"3fr 2fr 1fr 1fr 1fr 1fr\",\"& > div:not(:first-child)\":{textAlign:\"right\"}}}}}}}))((function(e){var t=e.classes,n=e.data;return o.a.createElement(\"div\",{className:\"grid-wrapper \"+t.grid},o.a.createElement(\"div\",{className:\"grid grid-container grid-compact\"},o.a.createElement(\"div\",{className:\"grid-header\"},o.a.createElement(\"div\",{className:\"grid-row\"},o.a.createElement(\"div\",null,\"Date and time\"),o.a.createElement(\"div\",null,\"Data replicated\"),o.a.createElement(\"div\",null,\"Inserts\"),o.a.createElement(\"div\",null,\"Updates\"),o.a.createElement(\"div\",null,\"Deletes\"),o.a.createElement(\"div\",null,\"Errors\"))),o.a.createElement(\"div\",{className:\"grid-body\"},n.map((function(e){return o.a.createElement(\"div\",{className:\"grid-row\",key:e.time},o.a.createElement(\"div\",null,e.formattedTimeRange),o.a.createElement(\"div\",null,Object(m.j)(e.dataReplicated,null,!0)),o.a.createElement(\"div\",null,Object(O.f)(e.inserts)),o.a.createElement(\"div\",null,Object(O.f)(e.updates)),o.a.createElement(\"div\",null,Object(O.f)(e.deletes)),o.a.createElement(\"div\",null,Object(O.f)(e.errors)))})))))})),Sc=u()((function(e){return{root:{position:\"relative\"},heading:{marginBottom:\"10px\"},square:{display:\"inline-block\",height:\"15px\",width:\"15px\",marginRight:\"7px\"},inserts:{backgroundColor:vc.inserts},updates:{backgroundColor:vc.updates},deletes:{backgroundColor:vc.deletes},errors:{backgroundColor:vc.error,height:\"15px\",width:\"15px\",display:\"inline-block\",borderRadius:\"50%\",color:e.palette.white[50],textAlign:\"center\",lineHeight:\"15px\",marginRight:\"7px\"},errorContainer:{marginLeft:\"auto\"},bottomLegend:{marginTop:\"25px\",padding:\"0 50px\",display:\"flex\",\"& > div\":{marginRight:\"15px\"}}}}))((function(e){var t=e.classes,n=e.data;var a=o.a.createElement(o.a.Fragment,null,o.a.createElement(mc,{containerId:\"replication-throughput-graph\",data:n,chartRenderer:hc,watchWidth:!0,renderTooltip:function(e){return o.a.createElement(bc,{tooltip:e})}}),o.a.createElement(\"div\",{className:t.bottomLegend},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.square+\" \"+t.inserts}),o.a.createElement(\"span\",null,\"Inserts\")),o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.square+\" \"+t.updates}),o.a.createElement(\"span\",null,\"Updates\")),o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.square+\" \"+t.deletes}),o.a.createElement(\"span\",null,\"Deletes\")),o.a.createElement(\"div\",{className:t.errorContainer},o.a.createElement(\"div\",{className:t.errors},\"!\"),o.a.createElement(\"span\",null,\"Errors\")))),r=o.a.createElement(xc,{data:n});return o.a.createElement(\"div\",{className:t.root},o.a.createElement(Q.b,{type:Q.a.h4,label:\"Throughput\",className:t.heading}),o.a.createElement(yc,{chart:a,table:r}))}));function Oc(e){var t=Math.floor(e/60);return t+\" min - \"+Math.round(e-60*t)+\" sec\"}var Tc=u()((function(){return{grid:{\"&.grid-wrapper\":{height:\"100%\",\"& .grid.grid-container.grid-compact\":{maxHeight:\"345px\",\"& .grid-row\":{gridTemplateColumns:\"3fr 2fr\",\"& > div:not(:first-child)\":{textAlign:\"right\"}}}}}}}))((function(e){var t=e.classes,n=e.data;return o.a.createElement(\"div\",{className:\"grid-wrapper \"+t.grid},o.a.createElement(\"div\",{className:\"grid grid-container grid-compact\"},o.a.createElement(\"div\",{className:\"grid-header\"},o.a.createElement(\"div\",{className:\"grid-row\"},o.a.createElement(\"div\",null,\"Date and time\"),o.a.createElement(\"div\",null,\"Average latency\"))),o.a.createElement(\"div\",{className:\"grid-body\"},n.map((function(e){return o.a.createElement(\"div\",{className:\"grid-row\",key:e.time},o.a.createElement(\"div\",null,e.formattedTimeRange),o.a.createElement(\"div\",null,Oc(e.latency)))})))))})),Cc=u()((function(e){return{tooltip:{position:\"absolute\",backgroundColor:e.palette.white[50],boxShadow:e.shadows[3],padding:\"15px\",width:\"250px\"},heading:{marginBottom:\"10px\"}}}))((function(e){var t=e.classes,n=e.tooltip,a=n&&n.activeData?n.activeData:{};return o.a.createElement(\"div\",{className:t.tooltip,style:{top:n.top,left:n.left,opacity:n.isOpen?1:0}},o.a.createElement(\"div\",{className:t.heading},o.a.createElement(\"strong\",null,a.formattedTimeRange)),o.a.createElement(\"div\",null,o.a.createElement(\"div\",null,\"Average latency\"),o.a.createElement(\"div\",null,Oc(a.latency||0))))})),wc=\"#13B5CC\",Nc=\"rgba(161, 228, 242, 0.6)\",jc=\"#DDDDDD\",Rc=\"#979797\",Pc=\"#999999\",_c=\"#333333\";function Ic(e,t,n,a,r){if(!(n<0)){var o=10,l=60,i=n-l-35,c=300-o-40,s=sc.select(\"#\"+e+\" > svg\").attr(\"height\",300).attr(\"width\",n),u=\"replication-latency-graph-con13tainer\";sc.select(\"#\"+e+\" > svg > #\"+u).remove(),sc.select(\"#\"+e+\" > .graph-tooltip\").remove();var p=s.append(\"g\").attr(\"id\",u).attr(\"transform\",\"translate(\"+l+\", \"+o+\")\"),d=sc.scaleBand().domain(t.map((function(e){return e.time}))).range([0,i]).padding(.1),m=Math.max(1,sc.max(t.map((function(e){return e.latency})))),f=sc.scaleLinear().domain([0,1.25*m]).rangeRound([c,0]).nice(),g=sc.axisLeft(f).ticks(null,\"s\").tickSizeInner(-i).tickFormat(kc),b=p.append(\"g\").attr(\"class\",\"axis axis-y\");b.call(g),b.select(\".domain\").remove(),b.selectAll(\"line\").attr(\"stroke\",jc);var v=b.selectAll(\".tick\"),h=new Set;v.filter((function(e){var t=kc(e);return!!h.has(t)||(h.add(t),!1)})).remove(),b.selectAll(\".tick text\").style(\"font-size\",\"12px\").style(\"fill\",_c);var E=sc.axisBottom(d).tickSizeOuter(0).tickFormat(fc),y=p.append(\"g\").attr(\"class\",\"axis axis-x\").attr(\"transform\",\"translate(0, \"+c+\")\");y.call(E),y.select(\".domain\").attr(\"stroke\",jc),y.selectAll(\"line\").attr(\"stroke\",Rc),y.selectAll(\".tick\").filter((function(e,n){return n%Math.floor(t.length/4)!=0})).remove(),y.selectAll(\".tick\").append(\"text\").text(gc).attr(\"dy\",30),y.selectAll(\".tick text\").style(\"font-size\",\"12px\").style(\"fill\",_c);var x=sc.area().x((function(e){return d(e.time)})).y1((function(e){return f(e.latency)})).y0(f(0)),S=sc.line().x((function(e){return d(e.time)})).y((function(e){return f(e.latency)}));p.append(\"g\").attr(\"class\",\"area-graph\").attr(\"transform\",\"translate(\"+d.bandwidth()/2+\", 0)\").append(\"path\").datum(t).attr(\"class\",\"latency-path\").attr(\"d\",x).style(\"fill\",Nc),p.append(\"g\").attr(\"class\",\"line-graph\").attr(\"transform\",\"translate(\"+d.bandwidth()/2+\", 0)\").append(\"path\").datum(t).attr(\"class\",\"latency-path\").attr(\"d\",S).style(\"fill\",\"none\").style(\"stroke\",wc).style(\"stroke-width\",\"4px\"),p.append(\"g\").attr(\"class\",\"legend axis-y-left-legend\").append(\"text\").attr(\"transform\",\"translate(-\"+l/2+\", \"+c/2+\") rotate(-90)\").text(\"Minutes\").attr(\"text-anchor\",\"middle\").style(\"font-size\",\"12px\").style(\"fill\",Pc);var O=p.append(\"g\").attr(\"class\",\"hover-container\").selectAll(\"rect\").data(t).enter(),T=p.append(\"g\").attr(\"class\",\"hover-indicator-container\"),C=d.bandwidth();O.append(\"rect\").attr(\"height\",c).attr(\"width\",C).attr(\"opacity\",0).attr(\"x\",(function(e){return d(e.time)})).on(\"mouseover\",(function(e){var t=f(e.latency)-75+\"px\",n=d(e.time)+100;n+250>=i&&(n-=n+250-i),r(t,n+=\"px\",!0,e);var a=d(e.time)+C/2;T.append(\"line\").attr(\"stroke\",_c).attr(\"stroke-width\",1).attr(\"x1\",a).attr(\"x2\",a).attr(\"y1\",0).attr(\"y2\",c)})).on(\"mouseout\",(function(e){r(0,0,!1,e),T.selectAll(\"line\").remove()}))}}function kc(e){if(parseInt(e,10)===e)return pc()(Math.floor(e/60)).format(\"0a\")}var Lc=u()((function(){return{root:{position:\"relative\"},heading:{marginBottom:\"10px\"},latency:{height:\"4px\",width:\"30px\",display:\"inline-block\",marginRight:\"7px\",backgroundColor:wc},bottomLegend:{marginTop:\"25px\",padding:\"0 50px\"}}}))((function(e){var t=e.classes,n=e.data;var a=o.a.createElement(o.a.Fragment,null,o.a.createElement(mc,{containerId:\"replication-latency-graph\",data:n,chartRenderer:Ic,watchWidth:!0,renderTooltip:function(e){return o.a.createElement(Cc,{tooltip:e})}}),o.a.createElement(\"div\",{className:t.bottomLegend},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.latency}),o.a.createElement(\"span\",null,\"Average Latency\")))),r=o.a.createElement(Tc,{data:n});return o.a.createElement(\"div\",{className:t.root},o.a.createElement(Q.b,{type:Q.a.h4,label:\"Latency\",className:t.heading}),o.a.createElement(yc,{chart:a,table:r}))})),Ac=n(81),Dc=n.n(Ac),Mc=function(){return(Mc=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Uc={\"user.dml.inserts\":\"inserts\",\"user.dml.updates\":\"updates\",\"user.dml.deletes\":\"deletes\",\"user.dml.errors\":\"errors\",\"user.dml.latency.seconds\":\"latency\",\"user.dml.data.processed.bytes\":\"dataReplicated\"},Bc={inserts:0,updates:0,deletes:0,errors:0,latency:0,formattedTimeRange:\"\",dataReplicated:0};var Fc=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},zc=u()((function(){return{root:{display:\"grid\",gridTemplateColumns:\"50% 50%\",paddingBottom:\"25px\",\"& > div\":{padding:\"0 15px\"}}}}))((function(e){var t=e.classes,n=Fc(Object(r.useState)([]),2),a=n[0],l=n[1],i=Object(r.useContext)(xs),c=i.name,s=i.tables,u=i.activeTable,p=i.timeRange;return Object(r.useEffect)((function(){if(0!==s.size){var e={namespace:Object(d.d)(),app:c,worker:N.a.programId,run:\"*\",instance:\"*\"};u&&(e.ent=Object(O.h)(u));var t=Bi.tagsToParams(e),n=[\"inserts\",\"updates\",\"deletes\",\"errors\",\"latency.seconds\",\"data.processed.bytes\"].map((function(e){return\"metric=user.dml.\"+e})).join(\"&\"),r=[\"start=now-\"+p,\"end=now\",\"aggregate=false\",\"resolution=auto\",t,n].join(\"&\"),o=Fi.a.pollQueryTags({params:r}).subscribe((function(e){var t=function(e,t,n){var a={};e.series.forEach((function(e){var r=Uc[e.metricName];e.data.forEach((function(e){var o=e.time;a[o]||(a[o]=Mc({time:o},Bc)),a[o][r]=\"latency\"!==r||n?e.value:e.value/t}))}));for(var r=parseInt(e.resolution,10),o=e.startTime-e.startTime%r;o<e.endTime;)a[o]||(a[o]=Mc({time:o},Bc)),o+=r;return Object.values(a).map((function(e){var t=1e3*e.time,n=Dc()(t).format(\"MM/DD - hh:mmA\"),a=Dc()(t).add(r,\"s\").format(\"hh:mmA\");return Mc(Mc({},e),{time:t,formattedTimeRange:n+\" - \"+a})}))}(e,s.size,u);ii()(t,a)||l(t)}),(function(e){console.log(\"err\",e)}));return function(){o&&\"function\"==typeof o.unsubscribe&&o.unsubscribe()}}}),[s,u,p]),o.a.createElement(\"div\",{className:t.root},o.a.createElement(Sc,{data:a}),o.a.createElement(Lc,{data:a}))})),Gc=function(){return(Gc=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Wc={errors:0,eventsPerMin:0,totalEvents:0,latency:0,dataReplicated:0},Hc={\"user.dml.inserts\":\"totalEvents\",\"user.dml.updates\":\"totalEvents\",\"user.dml.deletes\":\"totalEvents\",\"user.dml.errors\":\"errors\",\"user.dml.latency.seconds\":\"latency\",\"user.dml.data.processed.bytes\":\"dataReplicated\"};var Vc=u()((function(e){return{tooltip:{position:\"absolute\",backgroundColor:e.palette.white[50],boxShadow:e.shadows[3],padding:\"15px 0\",width:\"350px\"},tooltipHeading:{marginBottom:\"15px\",padding:\"0 15px\"},tooltipMetrics:{display:\"grid\",gridTemplateColumns:\"50% 50%\"},metricContent:{padding:\"0 15px\",\"&:first-child\":{borderRight:\"1px solid \"+e.palette.grey[300]},\"& > div\":{display:\"grid\",gridTemplateColumns:\"50% 50%\"}},metric:{textAlign:\"right\"},dataReplicated:{display:\"flex\",width:\"250px\",marginLeft:\"15px\"},dataMetric:{marginLeft:\"10px\"}}}))((function(e){var t=e.classes,n=e.tooltip,a=n&&n.activeData?n.activeData:{},r=Object(m.E)(n,\"activeData\",\"tableInfo\")||{},l=Object(O.i)(r);return o.a.createElement(\"div\",{className:t.tooltip,style:{top:n.top,left:n.left,opacity:n.isOpen?1:0}},o.a.createElement(\"div\",{className:t.tooltipHeading},o.a.createElement(\"strong\",null,l)),o.a.createElement(\"div\",{className:t.dataReplicated},o.a.createElement(\"strong\",null,\"Data replicated\"),o.a.createElement(\"span\",{className:t.dataMetric},Object(m.j)(a.dataReplicated,null,!0))),o.a.createElement(\"div\",{className:t.tooltipMetrics},o.a.createElement(\"div\",{className:t.metricContent},o.a.createElement(\"div\",null,o.a.createElement(\"strong\",null,\"Throughput\"),o.a.createElement(\"div\",{className:t.metric},Object(m.M)(a.eventsPerMin,2))),o.a.createElement(\"div\",null,o.a.createElement(\"strong\",null,\"Latency\"),o.a.createElement(\"div\",{className:t.metric},Object(m.M)(a.latency,2)))),o.a.createElement(\"div\",{className:t.metricContent},o.a.createElement(\"div\",null,o.a.createElement(\"strong\",null,\"Events\"),o.a.createElement(\"div\",{className:t.metric},a.totalEvents)),o.a.createElement(\"div\",null,o.a.createElement(\"strong\",null,\"Errors\"),o.a.createElement(\"div\",{className:t.metric},a.errors)))))})),Kc=\"#0076DC\",Qc=\"#9FC0FB\",Yc=\"#999999\",qc=\"#686868\",Jc=\"#D40001\",$c=\"#A40403\",Xc=\"#DDDDDD\",Zc=\"#999999\",es=\"#333333\";function ts(e,t,n,a,r,o,l){var i=10,c=50,s=60,u=a-s-35;if(!(u<0)){var p=350-i-c,d=e?Object(O.h)(e):null,m=!!d,f=sc.select(\"#\"+t+\" > svg\").attr(\"height\",350).attr(\"width\",a),g=\"replication-latency-graph-con13tainer\";sc.select(\"#\"+t+\" > svg > #\"+g).remove();var b=f.append(\"g\").attr(\"id\",g).attr(\"transform\",\"translate(\"+s+\", \"+i+\")\"),v=Math.max(1,sc.max(n,(function(e){return e.eventsPerMin}))),h=sc.scaleLinear().domain([0,1.25*v]).rangeRound([0,u]).nice(),E=Math.max(1,sc.max(n,(function(e){return e.latency}))),y=sc.scaleLinear().domain([0,1.25*E]).rangeRound([p,0]).nice(),x=sc.axisLeft(y).ticks(null,\"s\").tickFormat(os),S=b.append(\"g\").attr(\"class\",\"axis axis-y\");S.call(x),S.selectAll(\"line\").attr(\"stroke\",Xc);var T=S.selectAll(\".tick\"),C=new Set;T.filter((function(e){var t=os(e);return!!C.has(t)||(C.add(t),!1)})).remove(),S.selectAll(\".tick text\").style(\"font-size\",\"12px\").style(\"fill\",es).attr(\"transform\",\"translate(-5, 0)\");var w=sc.axisBottom(h).ticks(null,\"s\").tickSizeInner(-p).tickSizeOuter(3).tickFormat(os),N=b.append(\"g\").attr(\"class\",\"axis axis-x\").attr(\"transform\",\"translate(0, \"+p+\")\");N.call(w),N.select(\".domain\").attr(\"stroke\",Xc),N.selectAll(\"line\").attr(\"stroke\",Xc),N.selectAll(\".tick text\").style(\"font-size\",\"12px\").style(\"fill\",es).attr(\"transform\",\"translate(0, 10)\"),b.append(\"g\").attr(\"class\",\"scatter-plot-container\").selectAll(\"circle\").data(n).enter().append(\"circle\").style(\"cursor\",\"pointer\").attr(\"cx\",(function(e){return h(e.eventsPerMin)})).attr(\"cy\",(function(e){return y(e.latency)})).attr(\"r\",10).attr(\"fill\",as).attr(\"stroke-width\",1).attr(\"stroke\",rs).on(\"mouseover\",(function(e){var t=P(e),n=t.top,a=t.left;o(n,a,!0,e)})).on(\"mouseout\",(function(e){m||o(0,0,!1,e)})).on(\"click\",(function(e){_(e)})),b.append(\"g\").attr(\"class\",\"legend axis-y-left-legend\").append(\"text\").attr(\"transform\",\"translate(-\"+(s/2+10)+\", \"+p/2+\") rotate(-90)\").attr(\"text-anchor\",\"middle\").text(\"Latency (min)\").style(\"font-size\",\"12px\").style(\"fill\",Zc),b.append(\"g\").attr(\"class\",\"legend axis-x-legend\").append(\"text\").attr(\"transform\",\"translate(\"+u/2+\", \"+(p+40)+\")\").attr(\"text-anchor\",\"middle\").text(\"Throughput (events/min)\").style(\"font-size\",\"12px\").style(\"fill\",Zc);var j=b.append(\"g\").attr(\"class\",\"overlay\");if(d){var R=n.find((function(e){return e.tableName===d}));R&&_(R)}else I()}function P(e){var t=y(e.latency)-(i+c)-10+\"px\",n=h(e.eventsPerMin)+s;return n+350>=u&&(n-=n+350-u),{top:t,left:n+=\"px\"}}function _(e){m=!0;var t=P(e),n=t.top,a=t.left;l(n,a,!0,e);var r=j.append(\"g\").attr(\"class\",\"overlay-content\");r.append(\"rect\").attr(\"fill\",\"white\").attr(\"opacity\",.8).attr(\"width\",u).attr(\"height\",p).on(\"click\",I),r.append(\"line\").attr(\"stroke\",qc).attr(\"stroke-width\",1).attr(\"x1\",0).attr(\"x2\",u).attr(\"y1\",y(e.latency)).attr(\"y2\",y(e.latency)),r.append(\"line\").attr(\"stroke\",qc).attr(\"stroke-width\",1).attr(\"x1\",h(e.eventsPerMin)).attr(\"x2\",h(e.eventsPerMin)).attr(\"y1\",0).attr(\"y2\",p),r.append(\"circle\").attr(\"cx\",h(e.eventsPerMin)).attr(\"cy\",y(e.latency)).attr(\"r\",10).attr(\"fill\",as(e)).attr(\"stroke-width\",1).attr(\"stroke\",rs(e))}function I(){m=!1,j.select(\".overlay-content\").remove(),l(0,0,!1,null)}}function ns(e){return 0===e.latency&&0===e.eventsPerMin}function as(e){return e.errors>0?Jc:ns(e)?Yc:Kc}function rs(e){return e.errors>0?$c:ns(e)?qc:Qc}function os(e){if(parseInt(e,10)===e)return pc()(e).format(\"0a\")}var ls=u()((function(){return{grid:{\"&.grid-wrapper\":{height:\"100%\",\"& .grid.grid-container.grid-compact\":{maxHeight:\"415px\",\"& .grid-header > .grid-row\":{alignItems:\"end\"},\"& .grid-row\":{gridTemplateColumns:\"3fr 2fr 2fr 2fr 2fr 2fr\",\"& > div:not(:first-child)\":{textAlign:\"right\"}}}}}}}))((function(e){var t=e.classes,n=e.data;return o.a.createElement(\"div\",{className:\"grid-wrapper \"+t.grid},o.a.createElement(\"div\",{className:\"grid grid-container grid-compact\"},o.a.createElement(\"div\",{className:\"grid-header\"},o.a.createElement(\"div\",{className:\"grid-row\"},o.a.createElement(\"div\",null,\"Table name\"),o.a.createElement(\"div\",null,\"Data replicated\"),o.a.createElement(\"div\",null,o.a.createElement(\"div\",null,\"Throughput\"),o.a.createElement(\"div\",null,\"(events/min)\")),o.a.createElement(\"div\",null,o.a.createElement(\"div\",null,\"Avg. latency\"),o.a.createElement(\"div\",null,\"(min)\")),o.a.createElement(\"div\",null,o.a.createElement(\"div\",null,\"Events\"),o.a.createElement(\"div\",null,\"processed\")),o.a.createElement(\"div\",null,\"Errors\"))),o.a.createElement(\"div\",{className:\"grid-body\"},n.map((function(e){var t=Object(m.M)(e.eventsPerMin,2),n=Object(m.M)(e.latency,2),a=Object(m.j)(e.dataReplicated,null,!0),r=Object(O.i)(e.tableInfo);return o.a.createElement(\"div\",{className:\"grid-row\",key:r},o.a.createElement(\"div\",null,r),o.a.createElement(\"div\",null,a),o.a.createElement(\"div\",null,t),o.a.createElement(\"div\",null,n),o.a.createElement(\"div\",null,Object(O.f)(e.totalEvents)),o.a.createElement(\"div\",null,e.errors))})))))})),is=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},cs=u()((function(){return{root:{marginBottom:\"25px\",position:\"relative\"},headingSection:{marginBottom:\"10px\"},bottomLegend:{display:\"flex\",paddingLeft:\"30px\",\"& > div\":{marginRight:\"15px\",width:\"65px\",textAlign:\"center\"}},circle:{display:\"inline-block\",height:\"20px\",width:\"20px\",border:\"1px solid\",borderRadius:\"50%\"},activeTable:{backgroundColor:Kc,borderColor:Qc},inactiveTable:{backgroundColor:Yc,borderColor:qc},errorTable:{backgroundColor:Jc,borderColor:$c}}}))((function(e){var t=e.classes,n=is(Object(r.useState)([]),2),a=n[0],l=n[1],i=Object(r.useContext)(xs),c=i.name,s=i.tables,u=i.activeTable,p=i.setActiveTable,m=i.timeRange;Object(r.useEffect)((function(){if(0!==s.size){var e={namespace:Object(d.d)(),app:c,worker:N.a.programId,run:\"*\",instance:\"*\"},t=Bi.tagsToParams(e),n=[\"inserts\",\"updates\",\"deletes\",\"errors\",\"latency.seconds\",\"data.processed.bytes\"].map((function(e){return\"metric=user.dml.\"+e})).join(\"&\"),r=[\"start=now-\"+m,\"end=now\",\"aggregate=false\",\"groupBy=ent\",t,n].join(\"&\"),o=Fi.a.pollQueryTags({params:r}).subscribe((function(e){var t=function(e,t){var n={};t.forEach((function(e){var t=Object(O.h)(e);n[t]=Gc({tableName:t,tableInfo:e},Wc)})),e.series.forEach((function(e){var t=Hc[e.metricName],a=Object.values(e.grouping)[0];if(n[a]){var r=e.data.reduce((function(e,t){return e+t.value}),0);\"latency\"===t?n[a][t]=r/e.data.length/60:n[a][t]+=r}}));var a=(e.endTime-e.startTime)/60;return t.forEach((function(e){var t=Object(O.h)(e);n[t]&&(n[t].eventsPerMin=n[t].totalEvents/a)})),Object(Hi.b)(Object.values(n),[function(e){return e.tableName}],[\"asc\"])}(e,s.toList().toJS());ii()(t,a)||l(t)}),(function(e){console.log(\"err\",e)}));return function(){o&&\"function\"==typeof o.unsubscribe&&o.unsubscribe()}}}),[s,m]);var f=o.a.createElement(o.a.Fragment,null,o.a.createElement(mc,{containerId:\"replication-scatter-plot\",data:a,chartRenderer:ts.bind(void 0,u),watchWidth:!0,renderTooltip:function(e){return o.a.createElement(Vc,{tooltip:e})},onClick:function(e){var t=e?e.tableInfo:null;p(t)},additionalWatchProperty:[u]}),o.a.createElement(\"div\",{className:t.bottomLegend},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.circle+\" \"+t.activeTable}),o.a.createElement(\"div\",null,\"Active table\")),o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.circle+\" \"+t.inactiveTable}),o.a.createElement(\"div\",null,\"Inactive table\")),o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.circle+\" \"+t.errorTable}),o.a.createElement(\"div\",null,\"Table with errors\")))),g=o.a.createElement(ls,{data:a});return o.a.createElement(\"div\",{className:t.root},o.a.createElement(\"div\",{className:t.headingSection},o.a.createElement(\"div\",null,o.a.createElement(Q.b,{type:Q.a.h4,label:\"Tables performance\"})),o.a.createElement(\"div\",null,\"Latency and throughput by table - select one to view details below\")),o.a.createElement(yc,{chart:f,table:g}))})),ss=u()((function(e){return{root:{padding:\"0 15px\",marginBottom:\"25px\",display:\"flex\",alignItems:\"center\"},reset:{color:e.palette.blue[100],cursor:\"pointer\",marginLeft:\"5px\",\"&:hover\":{textDecoration:\"underline\"}},activeTableText:{marginLeft:\"10px\"},heading:{marginBottom:0}}}))((function(e){var t=e.classes,n=Object(r.useContext)(xs),a=n.activeTable,l=n.setActiveTable;var i=Object(O.i)(a),c=a?'\"'+i+'\"':\"All tables replicated\";return o.a.createElement(\"div\",{className:t.root},o.a.createElement(Q.b,{type:Q.a.h3,label:c,className:t.heading}),o.a.createElement(E.a,{condition:!!a},o.a.createElement(\"div\",{className:t.activeTableText},o.a.createElement(\"span\",null,\"selected -\"),o.a.createElement(\"span\",{onClick:function(){l(null)},className:t.reset},\"Reset selection\"))))})),us=u()((function(e){return{root:{marginTop:\"25px\",\"& > hr\":{borderWidth:\"2px\",borderColor:e.palette.grey[200]}}}}))((function(e){var t=e.classes;return o.a.createElement(\"div\",{className:t.root},o.a.createElement(cc,null),o.a.createElement(ic,null),o.a.createElement(\"hr\",null),o.a.createElement(cs,null),o.a.createElement(\"hr\",null),o.a.createElement(ss,null),o.a.createElement(zc,null))})),ps=u()((function(e){return{root:{display:\"grid\",gridTemplateColumns:\"350px 1fr\",alignItems:\"end\"},link:{color:e.palette.grey[50],\"&:hover $heading\":{textDecoration:\"none\",color:e.palette.grey[50]}},separator:{fontSize:\"25px\",marginLeft:\"10px\",marginRight:\"10px\"},activeLink:{\"& $heading\":{fontWeight:600,borderBottom:\"3px solid \"+e.palette.grey[200]}},updatedTime:{textAlign:\"right\"},time:{marginLeft:\"5px\"},heading:{display:\"inline-block\",marginBottom:0}}}))((function(e){var t=e.classes,n=Object(r.useContext)(xs),a=n.name,i=n.lastUpdated,c=Object(O.c)(a),s=Cs+\"/detail/:replicatorId\";return o.a.createElement(o.a.Fragment,null,o.a.createElement(\"div\",{className:t.root},o.a.createElement(\"div\",null,o.a.createElement(l.NavLink,{exact:!0,to:c,activeClassName:t.activeLink,className:t.link},o.a.createElement(Q.b,{type:Q.a.h2,label:\"Overview\",className:t.heading})),o.a.createElement(\"span\",{className:t.separator},\"|\"),o.a.createElement(l.NavLink,{exact:!0,to:c+\"/monitor\",activeClassName:t.activeLink,className:t.link},o.a.createElement(Q.b,{type:Q.a.h2,label:\"Monitoring\",className:t.heading}))),o.a.createElement(\"div\",{className:t.updatedTime},o.a.createElement(\"span\",null,\"Last updated on\"),o.a.createElement(\"span\",{className:t.time},Object(m.s)(i,!0)))),o.a.createElement(l.Switch,null,o.a.createElement(l.Route,{exact:!0,path:s,component:tc}),o.a.createElement(l.Route,{exact:!0,path:s+\"/monitor\",component:us})))})),ds=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},ms=[wo.g.RUNNING,wo.g.STOPPING,wo.g.STARTING,wo.g.PENDING],fs=u()((function(e){return{root:{display:\"grid\",gridTemplateColumns:\"50% 50%\",padding:\"0 15px\",fontSize:\"16px\"},title:{fontWeight:500,color:e.palette.grey[200]}}}))((function(e){var t=e.classes,n=Object(r.useContext)(xs),a=n.startTime,l=n.endTime,i=n.status,c=ds(Object(r.useState)(p()),2),s=c[0],u=c[1];function p(){return(l||Math.floor(Date.now()/1e3))-a}return Object(r.useEffect)((function(){var e;return-1!==ms.indexOf(i)?e=setInterval((function(){u(p())}),1e3):u(p()),function(){clearTimeout(e)}}),[i,a,l]),o.a.createElement(\"div\",{className:t.root},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.title},\"Start time\"),o.a.createElement(\"div\",null,Object(m.s)(a))),o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.title},\"Duration\"),o.a.createElement(\"div\",null,Object(m.t)(s)||\"--\")))})),gs=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l};function bs(e,t){return Object(m.E)(e,\"display-name\")||Object(m.E)(t,\"name\")}var vs=u()((function(e){return{root:{\"& > hr\":{borderWidth:\"4px\",borderColor:e.palette.grey[500],marginLeft:\"-40px\",marginRight:\"-40px\"}},contentHeading:{display:\"grid\",gridTemplateColumns:\"1fr 550px\",marginTop:\"15px\",alignItems:\"center\"},text:{display:\"inline-block\",marginBottom:0},expandBtn:{color:e.palette.blue[100],cursor:\"pointer\",marginLeft:\"15px\",userSelect:\"none\",\"&:hover\":{textDecoration:\"underline\"}},noMargin:{marginTop:0,marginBottom:0},heading:{display:\"flex\",alignItems:\"center\"},sourceTargetInfo:{display:\"flex\",fontSize:\"16px\",\"& > div\":{marginRight:\"50px\",\"&:last-child\":{marginRight:\"15px\"}}},pluginType:{fontWeight:500,color:e.palette.grey[200]}}}))((function(e){var t=e.classes,n=Object(r.useContext)(xs),a=n.sourcePluginInfo,l=n.sourcePluginWidget,i=n.sourceConfig,c=n.targetPluginInfo,s=n.targetPluginWidget,u=n.targetConfig,p=n.numInstances,d=gs(Object(r.useState)(!1),2),m=d[0],f=d[1],g=bs(l,a),b=bs(s,c);return o.a.createElement(\"div\",{className:t.root},o.a.createElement(\"hr\",{className:t.noMargin}),o.a.createElement(\"div\",{className:t.contentHeading},o.a.createElement(\"div\",{className:t.heading},o.a.createElement(\"div\",{className:t.sourceTargetInfo},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.pluginType},\"Source\"),o.a.createElement(\"div\",null,g)),o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:t.pluginType},\"Target\"),o.a.createElement(\"div\",null,b))),o.a.createElement(\"span\",{className:t.expandBtn,onClick:function(){return f(!m)}},m?\"Hide details\":\"View details\")),o.a.createElement(fs,null)),o.a.createElement(\"hr\",null),o.a.createElement(E.a,{condition:m},o.a.createElement(Wr,{sourcePluginInfo:a,targetPluginInfo:c,sourcePluginWidget:l,targetPluginWidget:s,sourceConfig:i,targetConfig:u,numInstances:p}),o.a.createElement(\"hr\",null)))})),hs=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Es=function(){return(Es=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ys=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l},xs=r.createContext({}),Ss=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.statusPoll$=null,t.start=function(){var e=Es(Es({},t.getBaseParams()),{action:\"start\"});p.a.action(e).subscribe((function(){t.setState({status:wo.g.STARTING,startTime:null,endTime:null})}),(function(e){t.handleError(e)}))},t.stop=function(){var e=t.state.status;t.setState({status:wo.g.STOPPING});var n=Es(Es({},t.getBaseParams()),{action:\"stop\"});p.a.action(n).subscribe((function(){t.setState({status:wo.g.STOPPING})}),(function(n){t.handleError(n),t.setState({status:e})}))},t.deleteReplicator=function(){p.a.delete(t.getBaseParams()).subscribe((function(){var e=\"/ns/\"+Object(d.d)()+\"/replication\";t.setState({redirect:e})}),(function(e){t.handleError(e)}))},t.setActiveTable=function(e){t.setState({activeTable:e})},t.setTimeRange=function(e){t.setState({timeRange:e,lastUpdated:Date.now()})},t.getPipelineConfig=function(){var e=t.state.rawAppConfig.toJS();return{name:t.state.name,artifact:t.state.parentArtifact,config:e}},t.duplicatePipeline=function(){var e=t.getPipelineConfig(),n=e.name;e.name=\"\",window.localStorage.setItem(n,JSON.stringify(e));var a=\"/ns/\"+Object(d.d)()+\"/replication/create?cloneId=\"+n;t.setState({redirect:a})},t.exportPipeline=function(){var e=t.getPipelineConfig();Object(S.a)(e)},t.state={name:Object(m.E)(t.props,\"match\",\"params\",\"replicatorId\"),parentArtifact:null,description:null,status:null,runId:null,redirect:null,rawAppConfig:null,sourcePluginInfo:null,sourcePluginWidget:null,targetPluginInfo:null,targetPluginWidget:null,sourceConfig:{},targetConfig:{},tables:Object(Oe.Map)(),columns:Object(Oe.Map)(),offsetBasePath:\"\",activeTable:null,timeRange:\"24h\",loading:!0,lastUpdated:Date.now(),startTime:null,end:null,error:null,numInstances:null,start:t.start,stop:t.stop,deleteReplicator:t.deleteReplicator,setActiveTable:t.setActiveTable,setTimeRange:t.setTimeRange,exportPipeline:t.exportPipeline,duplicatePipeline:t.duplicatePipeline},t.init=function(){p.a.getReplicator(t.getBaseParams()).subscribe((function(e){var n,a,r,o,l,i,c,s=Es({},e.artifact);try{n=JSON.parse(e.configuration)}catch(e){t.handleError(\"error parsing app config \"+e)}n.stages.forEach((function(e){var t=e.plugin.artifact.name,n=e.plugin.artifact.version,u=e.plugin.artifact.scope,p=e.plugin.name,d=e.plugin.type,m=e.plugin.properties;d===N.b.source?(a=Object(O.d)(s,t,u,p,d),o=Object(X.b)(t,n,u,p,d),i=m):(r=Object(O.d)(s,t,u,p,d),l=Object(X.b)(t,n,u,p,d),c=m)})),Sa.Observable.combineLatest(a,o,r,l).subscribe((function(e){var n=ys(e,4),a=n[0],r=n[1],o=n[2],l=n[3];t.setState({sourcePluginInfo:a,sourcePluginWidget:r,sourceConfig:i,targetPluginInfo:o,targetPluginWidget:l,targetConfig:c})}),(function(e){t.handleError(\"error fetching plugins \"+e)}));var u=Object(Oe.Map)(),p=Object(m.E)(n,\"tables\")||[],d=Object(Oe.Map)();p.forEach((function(e){var t=Object(O.g)(e),n={database:e.database,table:e.table};e.schema&&(n.schema=e.schema),u=u.set(t,Object(Oe.fromJS)(n));var a=Object(m.E)(e,\"columns\")||[],r=Object(Oe.fromJS)(a);d=d.set(t,r)})),t.setState({parentArtifact:s,rawAppConfig:Object(Oe.fromJS)(n),name:Object(m.E)(t.props,\"match\",\"params\",\"replicatorId\"),description:e.description,tables:u,columns:d,offsetBasePath:n.offsetBasePath,loading:!1,lastUpdated:Date.now(),numInstances:Object(m.E)(n,\"parallelism\",\"numInstances\")||1})})),t.getStatus()},t.getStatus=function(){t.statusPoll$=p.a.pollStatus(t.getBaseParams()).subscribe((function(e){if(0!==e.length){var n=e[0];t.setState({status:n.status,runId:n.runid,startTime:n.starting,endTime:n.end})}else t.setState({status:wo.g.DEPLOYED})}))},t.getBaseParams=function(){return{namespace:Object(d.d)(),appName:t.props.match.params.replicatorId}},t.redirect=function(){return r.createElement(l.Redirect,{to:t.state.redirect})},t.handleError=function(e){t.setState({error:e})},t}return hs(t,e),t.prototype.componentDidMount=function(){this.init()},t.prototype.componentWillUnmount=function(){this.statusPoll$&&this.statusPoll$.unsubscribe()},t.prototype.render=function(){var e=this;if(this.state.redirect)return this.redirect();if(this.state.loading)return r.createElement(Ne.a,null);var t=this.props.classes;return r.createElement(xs.Provider,{value:this.state},r.createElement(\"div\",{className:t.root},r.createElement(Mi,null),r.createElement(\"div\",{className:t.body},r.createElement(vs,null),r.createElement(ps,null)),!!this.state.error&&r.createElement(lo.a,{error:this.state.error,canEditPageWhileOpen:!0,onClose:function(){return e.handleError(null)}})))},t}(r.PureComponent);function Os(e){return function(t){return r.createElement(xs.Consumer,null,(function(n){var a=Es(Es({},n),t);return r.createElement(e,Es({},a))}))}}var Ts=u()((function(e){return{root:{height:\"100%\"},buttonContainer:{\"& > *\":{marginRight:\"15px\"}},config:{border:\"1px solid \"+e.palette.grey[300],borderRadius:\"4px\",wordBreak:\"break-word\",whiteSpace:\"pre-wrap\",padding:\"15px\"},body:{padding:\"0 40px 15px 40px\",height:\"calc(100% - 70px)\"}}}))(Ss);n.d(t,\"basepath\",(function(){return Cs}));var Cs=\"/ns/:namespace/replication\";t.default=function(){var e=ui.a.productName+\" | Replication\";return r.createElement(r.Fragment,null,r.createElement(c.a,{title:e}),r.createElement(l.Switch,null,r.createElement(l.Route,{exact:!0,path:Cs+\"/create\",component:yo}),r.createElement(l.Route,{exact:!0,path:Cs+\"/drafts/:draftId\",component:yo}),r.createElement(l.Route,{path:Cs+\"/detail/:replicatorId\",component:Ts}),r.createElement(l.Route,{path:Cs,component:L}),r.createElement(l.Route,{render:function(){return r.createElement(l.Redirect,{to:\"/ns/\"+Object(d.d)()+\"/replication\"})}})))}}}]);","extractedComments":[]}