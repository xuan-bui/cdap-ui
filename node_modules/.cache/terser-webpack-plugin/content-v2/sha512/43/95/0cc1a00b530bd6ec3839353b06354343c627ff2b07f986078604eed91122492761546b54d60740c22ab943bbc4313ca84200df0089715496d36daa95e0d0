{"code":"(window.webpackJsonpCaskCommon=window.webpackJsonpCaskCommon||[]).push([[4],{2648:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return R}));var a=n(1),r=n.n(a),o=n(0),s=n.n(o),c=n(2),l=n.n(c),i=n(253),u=n(393),f=n(283),p=n(566),m=n(144),d=n(25),b=n.n(d),y=n(358),g=n(82),h=n(80),v=n.n(h),E=n(32);function C(e){return(C=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=P(e);if(t){var r=P(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||\"object\"!==C(t)&&\"function\"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=\"features.DataPrep.TopPanel.UpgradeModal\",R=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(o,e);var t,n,a,r=w(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,o),(t=r.call(this,e)).state={loading:!1,error:null,extendedMessage:null},t.eventEmitter=b()(b.a),t.attemptClose=t.attemptClose.bind(x(t)),t.upgradeClick=t.upgradeClick.bind(x(t)),t}return t=o,(n=[{key:\"attemptClose\",value:function(){this.state.loading||this.props.toggle()}},{key:\"upgradeClick\",value:function(){var e=this;this.setState({loading:!0});var t=E.Theme.featureNames.dataPrep;Object(p.a)({shouldStopService:!0,artifactName:y.b,api:g.a,i18nPrefix:y.d,MIN_VERSION:y.a,featureName:t}).subscribe((function(){e.eventEmitter.emit(\"REFRESH_DATAPREP\")}),(function(t){var n=v()(t.extendedMessage)?t.extendedMessage.response||t.extendedMessage.message:t.extendedMessage;e.setState({loading:!1,error:t.error,extendedMessage:n})}))}},{key:\"renderError\",value:function(){return this.state.error?s.a.createElement(m.b,{type:\"DANGER\",message:this.state.error,extendedMessage:this.state.extendedMessage}):null}},{key:\"render\",value:function(){var e;return e=this.state.loading?s.a.createElement(\"div\",{className:\"loading-container\"},s.a.createElement(\"h3\",{className:\"text-center\"},s.a.createElement(\"span\",{className:\"fa fa-spin fa-spinner\"}))):s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"message\"},l.a.translate(\"\".concat(S,\".confirmation\"))),s.a.createElement(\"div\",{className:\"action-buttons\"},s.a.createElement(\"button\",{className:\"btn btn-secondary\",onClick:this.upgradeClick},l.a.translate(\"commons.yesLabel\")),s.a.createElement(\"button\",{className:\"btn btn-secondary\",onClick:this.attemptClose},l.a.translate(\"commons.noLabel\")))),s.a.createElement(i.a,{isOpen:!0,toggle:this.attemptClose,className:\"dataprep-upgrade-modal cdap-modal\",zIndex:\"1061\"},s.a.createElement(u.a,null,s.a.createElement(\"span\",null,l.a.translate(\"\".concat(S,\".modalHeader\"))),this.state.loading?null:s.a.createElement(\"div\",{className:\"close-section float-right\"},s.a.createElement(\"span\",{className:\"fa fa-times\",onClick:this.attemptClose}))),s.a.createElement(f.a,null,e,this.renderError()))}}])&&k(t.prototype,n),a&&k(t,a),o}(o.Component);R.propTypes={toggle:r.a.func}}}]);","extractedComments":[]}