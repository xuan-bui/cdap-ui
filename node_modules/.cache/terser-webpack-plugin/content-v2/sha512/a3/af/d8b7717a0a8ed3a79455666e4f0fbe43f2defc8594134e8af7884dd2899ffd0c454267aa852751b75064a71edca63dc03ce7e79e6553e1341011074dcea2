{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{2376:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return M}));var a=n(1),r=n.n(a),o=n(0),s=n.n(o),c=n(2),l=n.n(c),i=n(4),u=n(320),f=n(119),p=n(15),d=n.n(p),m=n(235),y=n(60),b=n(86),g=n.n(b),h=n(24);function v(e){return(v=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=O(e);if(t){var r=O(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||\"object\"!==v(t)&&\"function\"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=\"features.DataPrep.TopPanel.UpgradeModal\",M=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(o,e);var t,n,a,r=C(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,o),(t=r.call(this,e)).state={loading:!1,error:null,extendedMessage:null},t.eventEmitter=d()(d.a),t.attemptClose=t.attemptClose.bind(w(t)),t.upgradeClick=t.upgradeClick.bind(w(t)),t}return t=o,(n=[{key:\"attemptClose\",value:function(){this.state.loading||this.props.toggle()}},{key:\"upgradeClick\",value:function(){var e=this;this.setState({loading:!0});var t=h.a.featureNames.dataPrep;Object(u.a)({shouldStopService:!0,artifactName:m.b,api:y.a,i18nPrefix:m.d,MIN_VERSION:m.a,featureName:t}).subscribe((function(){e.eventEmitter.emit(\"REFRESH_DATAPREP\")}),(function(t){var n=g()(t.extendedMessage)?t.extendedMessage.response||t.extendedMessage.message:t.extendedMessage;e.setState({loading:!1,error:t.error,extendedMessage:n})}))}},{key:\"renderError\",value:function(){return this.state.error?s.a.createElement(f.b,{type:\"DANGER\",message:this.state.error,extendedMessage:this.state.extendedMessage}):null}},{key:\"render\",value:function(){var e;return e=this.state.loading?s.a.createElement(\"div\",{className:\"loading-container\"},s.a.createElement(\"h3\",{className:\"text-center\"},s.a.createElement(\"span\",{className:\"fa fa-spin fa-spinner\"}))):s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"message\"},l.a.translate(\"\".concat(x,\".confirmation\"))),s.a.createElement(\"div\",{className:\"action-buttons\"},s.a.createElement(\"button\",{className:\"btn btn-secondary\",onClick:this.upgradeClick},l.a.translate(\"commons.yesLabel\")),s.a.createElement(\"button\",{className:\"btn btn-secondary\",onClick:this.attemptClose},l.a.translate(\"commons.noLabel\")))),s.a.createElement(i.Modal,{isOpen:!0,toggle:this.attemptClose,className:\"dataprep-upgrade-modal cdap-modal\",zIndex:\"1061\"},s.a.createElement(i.ModalHeader,null,s.a.createElement(\"span\",null,l.a.translate(\"\".concat(x,\".modalHeader\"))),this.state.loading?null:s.a.createElement(\"div\",{className:\"close-section float-right\"},s.a.createElement(\"span\",{className:\"fa fa-times\",onClick:this.attemptClose}))),s.a.createElement(i.ModalBody,null,e,this.renderError()))}}])&&E(t.prototype,n),a&&E(t,a),o}(o.Component);M.propTypes={toggle:r.a.func}}}]);","extractedComments":[]}