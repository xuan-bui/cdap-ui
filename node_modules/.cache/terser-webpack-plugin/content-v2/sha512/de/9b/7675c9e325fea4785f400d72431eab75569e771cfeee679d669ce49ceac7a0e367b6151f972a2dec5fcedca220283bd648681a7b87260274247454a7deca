{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1554:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return l}));var n=a(7),r=a(56).a.getInstance(),i=\"/namespaces/:namespace/:entityType/:entityId/metadata\",o=\"/namespaces/:namespace/datasets/:entityId/lineage/fields\",l={getMetadata:Object(n.a)(r,\"GET\",\"REQUEST\",i),getProperties:Object(n.a)(r,\"GET\",\"REQUEST\",\"\".concat(i,\"/properties?responseFormat=v6\")),addProperties:Object(n.a)(r,\"POST\",\"REQUEST\",\"\".concat(i,\"/properties\")),deleteProperty:Object(n.a)(r,\"DELETE\",\"REQUEST\",\"\".concat(i,\"/properties/:key\")),getTags:Object(n.a)(r,\"GET\",\"REQUEST\",\"\".concat(i,\"/tags?responseFormat=v6\")),addTags:Object(n.a)(r,\"POST\",\"REQUEST\",\"\".concat(i,\"/tags\")),deleteTags:Object(n.a)(r,\"DELETE\",\"REQUEST\",\"\".concat(i,\"/tags/:key\")),getArtifactProperties:Object(n.a)(r,\"GET\",\"REQUEST\",\"/namespaces/:namespace/artifacts/:artifactName/versions/:artifactVersion/metadata/properties\"),getFields:Object(n.a)(r,\"GET\",\"REQUEST\",o),getFieldLineage:Object(n.a)(r,\"GET\",\"REQUEST\",\"\".concat(o,\"/:fieldName\")),getFieldOperations:Object(n.a)(r,\"GET\",\"REQUEST\",\"\".concat(o,\"/:fieldName/operations\")),getAllFieldLineage:Object(n.a)(r,\"GET\",\"REQUEST\",\"/namespaces/:namespace/datasets/:entityId/lineage/allfieldlineage\")}},1564:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return k}));var n=a(0),r=a.n(n),i=a(6),o=a.n(i),l=a(1),s=a.n(l),c=a(22),d=a.n(c),u=a(14),p=a(222),g=a.n(p),m=a(3),f=a(162),v=a.n(f);function y(e){return(y=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S(e);if(t){var r=S(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return O(this,a)}}function O(e,t){return!t||\"object\"!==y(t)&&\"function\"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1580);var L=\"asc\",x=\"desc\",k=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,e);var t,a,n,i=E(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,l),F(w(t=i.call(this,e)),\"handleSort\",(function(e){var a,n;t.state.sortProperty===e?(a=t.state.sortProperty,n=t.state.sortOrder===L?x:L):(a=e,n=L),t.setState({sortProperty:a,sortOrder:n,entities:g()(t.state.entities,[a],[n])})}));var a=e.defaultSortProperty||Object(m.E)(e.gridHeaders,0,\"property\"),n=L;return t.state={entities:g()(e.entities,[a],[n]),sortProperty:a,sortOrder:n},t}return t=l,(a=[{key:\"componentWillReceiveProps\",value:function(e){v()(this.props.entities,e.entities)||this.setState({entities:g()(e.entities,[this.state.sortProperty],[this.state.sortOrder])})}},{key:\"componentDidUpdate\",value:function(){var e=document.getElementsByClassName(\"highlighted\");e.length&&e[0].scrollIntoView()}},{key:\"renderSortIcon\",value:function(e){return e!==this.state.sortProperty?null:this.state.sortOrder===L?r.a.createElement(u.a,{name:\"icon-caret-down\"}):r.a.createElement(u.a,{name:\"icon-caret-up\"})}},{key:\"renderGridHeader\",value:function(){var e=this;return this.props.renderGridHeader?this.props.renderGridHeader():r.a.createElement(\"div\",{className:\"grid-header\"},r.a.createElement(\"div\",{className:\"grid-row\"},this.props.gridHeaders.map((function(t){return t.property?r.a.createElement(\"strong\",{className:o()(\"sortable-header\",{active:e.state.sortProperty===t.property}),key:d()(),onClick:e.handleSort.bind(e,t.property)},r.a.createElement(\"span\",null,t.label),e.renderSortIcon(t.property)):r.a.createElement(\"strong\",{key:d()()},t.label)}))))}},{key:\"renderGridBody\",value:function(){var e=this;return this.props.renderGridBody?this.props.renderGridBody(this.state.entities):r.a.createElement(\"div\",{className:\"grid-body\"},this.state.entities.map((function(t){return r.a.createElement(\"div\",{className:o()(\"grid-row\",{\"grid-link\":e.props.cellIsClickable,highlighted:t.highlighted}),key:d()()},e.props.gridHeaders.map((function(e){return r.a.createElement(\"div\",{key:d()()},t[e.property])})))})))}},{key:\"render\",value:function(){var e=o()(\"grid-wrapper sortable-sticky-grid\",this.props.className);return r.a.createElement(\"div\",{className:e},r.a.createElement(\"div\",{className:o()(\"grid grid-container\",{\"grid-sm\":\"small\"===this.props.size})},this.renderGridHeader(),this.renderGridBody()))}}])&&h(t.prototype,a),n&&h(t,n),l}(n.Component);F(k,\"propTypes\",{entities:s.a.arrayOf(s.a.object).isRequired,gridHeaders:s.a.arrayOf(s.a.shape({label:s.a.string,property:s.a.oneOfType([s.a.string,s.a.func])})),renderGridHeader:s.a.func,renderGridBody:s.a.func,className:s.a.string,cellIsClickable:s.a.bool,defaultSortProperty:s.a.string,size:s.a.string}),F(k,\"defaultProps\",{cellIsClickable:!1})},1571:function(e,t,a){e.exports=a(70)(1535)},1580:function(e,t,a){var n=a(19),r=a(1581);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var i={insert:\"head\",singleton:!1},o=(n(e.i,r,i),r.locals?r.locals:{});e.exports=o},1581:function(e,t,a){(t=a(18)(!1)).push([e.i,\".sortable-sticky-grid .grid.grid-container .grid-header .sortable-header{cursor:pointer}.sortable-sticky-grid .grid.grid-container .grid-header .sortable-header.active{text-decoration:underline}\",\"\"]),t.locals={white01:\"#fff\",green01:\"#01b133\",green02:\"#3cc801\",green03:\"#8af302\",green04:\"#0f9d58\",green05:\"#0b8043\",green06:\"#4ab63c\",blue01:\"#045599\",blue02:\"#0076dc\",blue03:\"#09f\",blue04:\"#58b7f6\",blue05:\"#7cd2eb\",blue06:\"#cae7ef\",blue07:\"#3c4355\",bluegrey01:\"#454a57\",bluegrey02:\"#4e5568\",bluegrey03:\"#5d6789\",bluegrey04:\"#979fbb\",bluegrey05:\"#bac1d8\",bluegrey06:\"#dce0ea\",orange01:\"#f60\",orange02:\"#fa8a00\",orange03:\"#ffa727\",orange04:\"#ffcc80\",orange05:\"#ffe0b2\",grey01:\"#333\",grey02:\"#666\",grey03:\"#999\",grey04:\"#bbb\",grey05:\"#ccc\",grey06:\"#dbdbdb\",grey07:\"#eee\",grey071:\"#e0e0e0\",grey08:\"#f5f5f5\",grey09:\"#e8e8e8\",grey10:\"#ebebeb\",grey11:\"#dfe2e9\",red01:\"#a40403\",red02:\"#d40001\",red03:\"#d15668\",yellow01:\"#ffba01\",yellow02:\"#ffd500\",yellow02lighter:\"rgba(255,213,0,.3)\",primary:\"#1a73e8\"},e.exports=t},1968:function(e,t,a){\"use strict\";var n=a(72),r=a(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var i=r(a(0)),o=(0,n(a(74)).default)(i.createElement(\"path\",{d:\"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z\"}),\"KeyboardArrowUp\");t.default=o},1969:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){return(0,n.createStyles)(e)};var n=a(168)},1970:function(e,t,a){var n=a(19),r=a(1971);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var i={insert:\"head\",singleton:!1},o=(n(e.i,r,i),r.locals?r.locals:{});e.exports=o},1971:function(e,t,a){(t=a(18)(!1)).push([e.i,\".modal .field-level-lineage-modal.modal-dialog{max-width:85vw;max-height:80vh}.modal .field-level-lineage-modal.modal-dialog .modal-header,.modal .field-level-lineage-modal.modal-dialog .modal-body{padding-left:30px;padding-right:30px}.modal .field-level-lineage-modal.modal-dialog .modal-body{padding-top:0}.modal .field-level-lineage-modal.modal-dialog .error-container{padding:10px 0}.modal .field-level-lineage-modal.modal-dialog .operations-container .navigation{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:27px}.modal .field-level-lineage-modal.modal-dialog .operations-container .navigation .nav-icon{cursor:pointer;font-size:20px}.modal .field-level-lineage-modal.modal-dialog .operations-container .navigation .nav-icon.disabled{color:#bbb;cursor:not-allowed}.modal .field-level-lineage-modal.modal-dialog .operations-container .navigation .separator{margin-left:5px;margin-right:5px}.modal .field-level-lineage-modal.modal-dialog .operations-container .summary-text,.modal .field-level-lineage-modal.modal-dialog .operations-container .last-executed{color:#666}.modal .field-level-lineage-modal.modal-dialog .operations-container .summary-text{margin-top:30px}.modal .field-level-lineage-modal.modal-dialog .operations-container .last-executed{line-height:27px;vertical-align:bottom;margin-bottom:0}.modal .field-level-lineage-modal.modal-dialog .operations-container .grid-wrapper{max-height:60vh;overflow:auto;margin-top:30px}.modal .field-level-lineage-modal.modal-dialog .operations-container .grid.grid-container{max-height:55vh}.modal .field-level-lineage-modal.modal-dialog .operations-container .grid.grid-container .grid-header .grid-row,.modal .field-level-lineage-modal.modal-dialog .operations-container .grid.grid-container .grid-body .grid-row{grid-template-columns:1fr 2fr 2fr 2fr 40% 2fr 2fr}.modal .field-level-lineage-modal.modal-dialog .operations-container .grid.grid-container .grid-body .grid-row>div:first-child{padding-left:15px}.modal .field-level-lineage-modal.modal-dialog .operations-container .grid.grid-container .active{background-color:rgba(255,213,0,.3)}.modal .field-level-lineage-modal.modal-dialog .operations-container .grid.grid-container .input-field{cursor:pointer;color:#09f}.modal .field-level-lineage-modal.modal-dialog .operations-container .grid.grid-container .input-field:hover{text-decoration:underline}.modal .field-level-lineage-modal.modal-dialog .operations-container .grid.grid-container .input-field.selected{color:#ffba01;font-style:italic}\",\"\"]),t.locals={white01:\"#fff\",green01:\"#01b133\",green02:\"#3cc801\",green03:\"#8af302\",green04:\"#0f9d58\",green05:\"#0b8043\",green06:\"#4ab63c\",blue01:\"#045599\",blue02:\"#0076dc\",blue03:\"#09f\",blue04:\"#58b7f6\",blue05:\"#7cd2eb\",blue06:\"#cae7ef\",blue07:\"#3c4355\",bluegrey01:\"#454a57\",bluegrey02:\"#4e5568\",bluegrey03:\"#5d6789\",bluegrey04:\"#979fbb\",bluegrey05:\"#bac1d8\",bluegrey06:\"#dce0ea\",orange01:\"#f60\",orange02:\"#fa8a00\",orange03:\"#ffa727\",orange04:\"#ffcc80\",orange05:\"#ffe0b2\",grey01:\"#333\",grey02:\"#666\",grey03:\"#999\",grey04:\"#bbb\",grey05:\"#ccc\",grey06:\"#dbdbdb\",grey07:\"#eee\",grey071:\"#e0e0e0\",grey08:\"#f5f5f5\",grey09:\"#e8e8e8\",grey10:\"#ebebeb\",grey11:\"#dfe2e9\",red01:\"#a40403\",red02:\"#d40001\",red03:\"#d15668\",yellow01:\"#ffba01\",yellow02:\"#ffd500\",yellow02lighter:\"rgba(255,213,0,.3)\",primary:\"#1a73e8\"},e.exports=t},2387:function(e,t,a){\"use strict\";a.r(t);var n=a(0),r=a.n(n),i=a(54),o=a.n(i),l=a(2),s=a.n(l),c=a(6),d=a.n(c),u=a(12),p=a.n(u),g=a(3),m=a(8),f=a(33);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var b,E=[\"CUSTOM\",\"last7d\",\"last14d\",\"lastMonth\",\"last6M\",\"lastYear\"],O=\"FLL_SET_FIELDS\",w=\"FLL_SET_LINEAGE_SUMMARY\",S=\"FLL_CLOSE_SUMMARY\",F=\"FLL_SET_SEARCH\",L=\"FLL_SET_OPERATIONS\",x=\"FLL_CLOSE_OPERATIONS\",k=\"FLL_OPERATIONS_LOADING\",T=\"FLL_NEXT_OPERATION\",I=\"FLL_PREV_OPERATION\",j=\"FLL_SET_TIME_SELECTION\",C=\"FLL_SET_CUSTOM_TIME\",N=\"FLL_RESET\",_={datasetId:\"\",fields:[],incoming:[],outgoing:[],activeField:null,search:\"\",timeSelection:E[1]},R={start:null,end:null},P={operations:[],showOperations:!1,activeIndex:0,direction:null,loading:!1},M=Object(f.createStore)(Object(f.combineReducers)({lineage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.m;switch(t.type){case O:return y({},e,{datasetId:t.payload.datasetId,fields:t.payload.fields,incoming:0===e.search.length?[]:e.incoming,outgoing:0===e.search.length?[]:e.outgoing,activeField:null});case w:return y({},e,{incoming:t.payload.incoming,outgoing:t.payload.outgoing,activeField:t.payload.activeField});case S:return y({},e,{activeField:null});case F:return y({},e,{search:t.payload.search});case j:return y({},e,{timeSelection:t.payload.timeSelection});case N:return _;default:return e}},operations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.m;switch(t.type){case k:return y({},e,{loading:!0,showOperations:!0,direction:t.payload.direction});case L:return y({},e,{operations:t.payload.operations,direction:t.payload.direction,activeIndex:0,showOperations:!0,loading:!1});case w:case x:return y({},e,{operations:[],direction:null,showOperations:!1});case T:return y({},e,{activeIndex:e.activeIndex+1});case I:return y({},e,{activeIndex:e.activeIndex-1});case N:return _;default:return e}},customTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.m;switch(t.type){case C:return y({},e,{start:t.payload.start,end:t.payload.end});case N:return R;default:return e}}}),{lineage:_,operations:P,customTime:R},Object(g.h)(\"FieldLevelLineageStore\")()),A=a(1554),H=a(134),B=a.n(H),G=a(24);function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var U=(z(b={},E[1],{start:\"now-7d\",end:\"now\"}),z(b,E[2],{start:\"now-14d\",end:\"now\"}),z(b,E[3],{start:\"now-30d\",end:\"now\"}),z(b,E[4],{start:\"now-180d\",end:\"now\"}),z(b,E[5],{start:\"now-365d\",end:\"now\"}),b);function W(){var e=M.getState(),t=e.lineage.timeSelection;return t===E[0]?{start:e.customTime.start||\"now-7d\",end:e.customTime.end||\"now\"}:U[t]}function D(e){for(var t,a=0;a<e.length;a++)if(e[a].lineage){t=e[a].name;break}t?V(t):J()}function Q(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"now-7d\",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"now\";M.dispatch({type:S});var r=Object(m.d)(),i={namespace:r,entityId:e,start:a,end:n,includeCurrent:!0};t&&t.length>0&&(i.prefix=t),A.a.getFields(i).subscribe((function(t){M.dispatch({type:O,payload:{datasetId:e,fields:t}}),D(t)}))}function V(e){var t=Object(m.d)(),a=M.getState().lineage.datasetId,n=W(),r=n.start,i=n.end,o={namespace:t,entityId:a,fieldName:e,direction:\"both\",start:r,end:i};A.a.getFieldLineage(o).subscribe((function(t){M.dispatch({type:w,payload:{incoming:t.incoming,outgoing:t.outgoing,activeField:e}}),J()}))}B()(Q,500);function J(){var e=function(){var e=M.getState(),t=location.pathname;t+=\"?\".concat(function(){var e=M.getState(),t=\"time=\".concat(e.lineage.timeSelection);return e.lineage.timeSelection===E[0]&&(t+=\"&start=\".concat(e.customTime.start,\"&end=\").concat(e.customTime.end)),t}()),e.lineage.activeField&&(t+=\"&field=\".concat(e.lineage.activeField));return t}();if(e!==location.pathname+location.search){var t={title:G.a.productName,url:e};setTimeout((function(){history.replaceState(t,t.title,t.url)}))}}function Y(e,t,a,n){void 0===n&&(n=!0);var r={},i=[],o=new Set;return a.forEach((function(a){if(a.hasOwnProperty(\"entityId\")){var l=n?\"cause\":\"impact\",s=K(a.entityId.dataset,a.entityId.namespace,l);r[s]={fieldCount:a.fieldCount,fields:[],dataset:a.entityId.dataset,namespace:a.entityId.namespace};var c=new Map;a.relations.map((function(d){var u=n?d.source:d.destination,p=c.get(u),g={id:p,type:l,name:u,dataset:a.entityId.dataset,namespace:a.entityId.namespace};c.has(u)||(p=q(u,a.entityId.dataset,a.entityId.namespace,l),g.id=p,c.set(u,p),r[s].fields.push(g));var m=n?d.destination:d.source;o.add(m);var f={id:q(m,t,e,\"target\"),type:\"target\",dataset:t,namespace:e,name:n?d.destination:d.source},v={source:n?g:f,destination:n?f:g};i.push(v)}))}else a.relations.map((function(e){var t=n?e.destination:e.source;o.add(t)}))})),{tables:r,links:i,targetFieldsWithOps:o}}function X(e,t,a){var n=e.namespace,r=e.dataset;return{fields:t.map((function(e){var t=\"target_ns-\"+n+\"_ds-\"+r+\"_fd-\"+e,i=a.incoming.has(e),o=a.outgoing.has(e);return{id:t,type:\"target\",name:e,dataset:r,namespace:n,hasIncomingOps:i,hasOutgoingOps:o}}))}}function q(e,t,a,n){return n+\"_ns-\"+a+\"_ds-\"+t+\"_fd-\"+e}function K(e,t,a){return a+\"_ns-\"+t+\"_ds-\"+e}function Z(e,t,a,n){var r,i;a&&a.field?(r=a.field,i={name:r,id:q(r,t,e,\"target\")}):(r=null,i={id:null,name:null});var o=n.range.start,l=n.range.end,c={namespace:e,entityId:t,direction:\"both\",start:o,end:l};return A.a.getAllFieldLineage(c).map((function(e){if(t=e,JSON.stringify(t).length>5e4)throw new Error(s.a.translate(\"features.FieldLevelLineage.Error.lineageTooLarge\").toString());var t,a,r,c,d,u,p,g=(r=Y((a=e).entityId.namespace,a.entityId.dataset,a.incoming),c=Y(a.entityId.namespace,a.entityId.dataset,a.outgoing,!1),d=r.tables,u=c.tables,p={incoming:r.targetFieldsWithOps,outgoing:c.targetFieldsWithOps},{causeTables:d,impactTables:u,links:{incoming:r.links,outgoing:c.links},targetFieldsWithOps:p});return{target:e.entityId.dataset,targetFields:X(e.entityId,e.fields,g.targetFieldsWithOps),links:g.links,causeSets:g.causeTables,impactSets:g.impactTables,selection:n.selection,start:o,end:l,activeField:i,showingOneField:!1,showOperations:!1,activeOpsIndex:0,loadingOps:!1}}))}function $(e,t,a,n){var r=\"\"+location.pathname+function(e,t,a){var n=\"?time=\"+e;e===E[0]&&(n=n+\"&start=\"+t+\"&end=\"+a);return n}(e,a,n);return t.id&&(r=r+\"&field=\"+t.name),r}function ee(e){var t;if(-1!==E.indexOf(e)){var a=null,n=null;return e!==E[0]&&(a=(t=U[e]).start,n=t.end),{start:a,end:n}}}function te(e,t,a,n){var r=$(e,t,a,n);if(r!==location.pathname+location.search){var i={title:G.a.productName,url:r};history.replaceState(i,i.title,i.url)}}function ae(e,t,a){var n=\"?time=\"+(e||E[1]);return t&&e===E[0]&&(n=n+\"&start=\"+t+\"&end=\"+a),n}function ne(e,t,a,n,r,i){var o={namespace:Object(m.d)(),entityId:e,fieldName:a,start:t.start,end:t.end,direction:n};A.a.getFieldOperations(o).subscribe((function(e){var t=e[n];r(t)}),i)}function re(e,t,a,n,r,i){var o={namespace:e,entityId:t,start:r,end:i};return A.a.getFields(o).map((function(r){return r.filter((function(r){return function(n,r){var i=q(n,t,e,a);return 0===r.filter((function(e){return e.id===i})).length}(r,n)})).map((function(n){return function(n){return{type:a,namespace:e,name:n,dataset:t,id:q(n,t,e,a)}}(n)}))}))}var ie=a(1571);function oe(e){return(oe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var le,se=(le=function(e,t){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}le(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),ce=function(){return(ce=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},de=function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,a=t&&e[t],n=0;if(a)return a.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},ue={target:\"\",targetFields:{},links:{incoming:[],outgoing:[]},causeSets:{},impactSets:{},showingOneField:!1,start:null,end:null,selection:E[1],showOperations:!1,activeOpsIndex:0,loadingOps:!1,loadingLineage:!0,error:null},pe=r.a.createContext(ue),ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleFieldClick=function(e){var a=e.target.id;if(a){t.state.activeField.id&&ie.select(\"#\"+t.state.activeField.id).classed(\"selected\",!1);var n={id:a,name:e.target.dataset.fieldname},r=t.getActiveLinks(a),i=t.getActiveSets(r);t.setState({activeField:n,activeLinks:r,activeCauseSets:i.activeCauseSets,activeImpactSets:i.activeImpactSets},(function(){ie.select(\"#\"+a).classed(\"selected\",!0),te(t.state.selection,t.state.activeField,t.state.start,t.state.end)}))}},t.getActiveLinks=function(e,a){var n=e||t.state.activeField.id,r={incoming:[],outgoing:[]};return(a?a.incoming.concat(a.outgoing):t.state.links.incoming.concat(t.state.links.outgoing)).forEach((function(e){e.destination.id===n&&r.incoming.push(e),e.source.id===n&&r.outgoing.push(e)})),r},t.getActiveSets=function(e){var a,n;void 0===e&&(e=t.state.activeLinks);var r={},i={};e||(e=t.getActiveLinks());try{for(var o=de(Object.values(e)),l=o.next();!l.done;l=o.next()){l.value.forEach((function(e){var t=\"target\"!==e.source.type?e.source:e.destination,a=K(t.dataset,t.namespace,t.type);\"cause\"===t.type?(a in r||(r[a]={fields:[]}),r[a].fields.push(t)):(a in i||(i[a]={fields:[]}),i[a].fields.push(t))}))}}catch(e){a={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return{activeCauseSets:r,activeImpactSets:i}},t.handleViewCauseImpact=function(){t.setState({showingOneField:!0})},t.handleReset=function(){t.setState({showingOneField:!1})},t.setCustomTimeRange=function(e){var a=e.start,n=e.end;t.updateLineageFromRange(E[0],a,n)},t.setTimeRange=function(e){if(-1!==E.indexOf(e)){var a=ee(e),n=a.start,r=a.end;e!==E[0]?t.updateLineageFromRange(e,n,r):t.setState({selection:e,start:null,end:null})}},t.toggleOperations=function(e){t.setState({showOperations:!t.state.showOperations,loadingOps:!0,direction:e,errorOps:null},(function(){if(t.state.showOperations&&e){var a={start:t.state.start,end:t.state.end};ne(t.state.target,a,t.state.activeField.name,e,(function(e){t.setState({operations:e,loadingOps:!1,activeOpsIndex:0})}),(function(e){var a={loadingOps:!1,errorOps:null};\"string\"==typeof e&&(a.errorOps=e),\"object\"===oe(e)&&null!==e&&(\"string\"==typeof e.response?a.errorOps=e.response:a.errorOps=JSON.stringify(e)),t.setState(a)}))}}))},t.nextOperation=function(){t.setState({activeOpsIndex:t.state.activeOpsIndex+1})},t.prevOperation=function(){t.setState({activeOpsIndex:t.state.activeOpsIndex-1})},t.handleExpandFields=function(e,a,n){var r=K(a,e,n),i=\"cause\"===n?t.state.causeSets[r].fields:t.state.impactSets[r].fields,o=\"cause\"===n?t.state.causeSets:t.state.impactSets,l=ce({},o);if(o[r].hasOwnProperty(\"unrelatedFields\"))return l[r].isExpanded=!l[r].isExpanded,void t.setState(l);re(e,a,n,i,t.state.start,t.state.end).subscribe((function(e){l[r].unrelatedFields=e,l[r].isExpanded=!0,t.setState(l)}),(function(e){console.error(\"Error getting unrelated fields\",e)}))},t.state={target:\"\",targetFields:{},links:{incoming:[],outgoing:[]},causeSets:{},impactSets:{},activeField:{id:null,name:null},showingOneField:!1,start:null,end:null,selection:E[1],activeCauseSets:{},activeImpactSets:{},activeLinks:null,loadingOps:!1,loadingLineage:!0,direction:null,numTables:4,firstCause:1,firstImpact:1,firstField:1,showOperations:!1,activeOpsIndex:0,error:null,handleFieldClick:t.handleFieldClick,handleViewCauseImpact:t.handleViewCauseImpact,handleReset:t.handleReset,handleExpandFields:t.handleExpandFields,setTimeRange:t.setTimeRange,setCustomTimeRange:t.setCustomTimeRange,toggleOperations:t.toggleOperations,nextOperation:t.nextOperation,prevOperation:t.prevOperation},t}return se(t,e),t.prototype.fetchFieldLineage=function(e,t,a){var n=this;void 0===a&&(a=this.state.target),this.setState({loadingLineage:!0});var r,i=Object(m.d)(),o=!1,l=Z(i,a,e,t).subscribe((function(e){o=!0,clearTimeout(r),!e.activeField.id&&e.targetFields.fields.length>0&&(e.activeField={id:e.targetFields.fields[0].id,name:e.targetFields.fields[0].name});var t=n.getActiveLinks(e.activeField.id,e.links),a=n.getActiveSets(t);e.activeLinks=t,e.activeCauseSets=a.activeCauseSets,e.activeImpactSets=a.activeImpactSets,e.loadingLineage=!1,e.error=null,n.setState(e)}),(function(e){o=!0,clearTimeout(r);var t=e instanceof Error?e.message:JSON.stringify(Object(g.o)(e));n.setState({error:t,target:a,loadingLineage:!1})}));r=setTimeout((function(){o||(l.unsubscribe(),n.setState({error:s.a.translate(\"features.FieldLevelLineage.Error.lineageTooLarge\").toString(),target:a,loadingLineage:!1}))}),2e4)},t.prototype.updateLineageFromRange=function(e,t,a){var n=this,r={selection:e,start:null,end:null,loadingLineage:!0};e===E[0]&&(r.start=t,r.end=a),this.setState(r,(function(){var r=Object(g.F)(),i={selection:e,range:{start:t,end:a}};n.fetchFieldLineage(r,i),te(n.state.selection,n.state.activeField,n.state.start,n.state.end)}))},t.prototype.initialize=function(){var e,t,a=Object(g.E)(this.props,\"match\",\"params\",\"datasetId\"),n=Object(g.F)(),r=(e=Object(g.F)(),(t=e?e.time:E[1])===E[0]?{selection:t,range:{start:e.start||\"now-7d\",end:e.end||\"now\"}}:{selection:t,range:U[t]});this.fetchFieldLineage(n,r,a)},t.prototype.componentDidUpdate=function(e){Object(g.E)(e,\"match\",\"params\",\"datasetId\")!==Object(g.E)(this.props,\"match\",\"params\",\"datasetId\")&&this.initialize()},t.prototype.componentDidMount=function(){this.initialize()},t.prototype.render=function(){return r.a.createElement(pe.Provider,{value:this.state},this.props.children)},t}(r.a.Component);function me(e){var t=e.children;return r.a.createElement(pe.Consumer,null,t)}var fe=p()((function(e){return{root:{color:\"\"+e.palette.grey[50],height:70,\"& .target\":{fontSize:\"14px\",fontWeight:\"bold\"}},header:{overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"nowrap\"},subHeader:{borderBottom:\"2px solid \"+e.palette.grey[200]}}}))((function(e){var t,a,i,o=e.type,l=e.total,c=e.classes,u=Object(n.useContext)(pe),p=u.firstCause,g=u.firstImpact,m=(u.firstField,u.target),f=u.numTables,v=\"target\"===o;\"impact\"===o?(a=g,i=s.a.translate(\"features.FieldLevelLineage.v2.FllHeader.OutputHeader\",{target:m})):(a=p,i=v?s.a.translate(\"features.FieldLevelLineage.v2.FllHeader.TargetHeader\"):s.a.translate(\"features.FieldLevelLineage.v2.FllHeader.InputHeader\",{target:m})),t=a+f-1<=l?a+f-1:l,v&&(t=l);var y,h={first:a,last:t,total:l,context:l};return y=0===l?s.a.translate(\"features.FieldLevelLineage.v2.FllHeader.NoRelatedSubheader\"):v&&l>0?s.a.translate(\"features.FieldLevelLineage.v2.FllHeader.TargetSubheader\",h):s.a.translate(\"features.FieldLevelLineage.v2.FllHeader.RelatedSubheader\",h),r.a.createElement(\"div\",{className:c.root},r.a.createElement(\"div\",{className:d()(c.header,{target:v})},i),r.a.createElement(\"div\",{className:c.subHeader},y))})),ve=a(1564),ye=a(1969),he=a.n(ye),be=a(13),Ee=a(25),Oe=a(712),we=a(708),Se=a(504),Fe=a.n(Se),Le=a(1522),xe=a(198),ke=function(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,i=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return o},Te=\"features.FieldLevelLineage.v2.FllTable\";var Ie=p()((function(e){return{root:{paddingLeft:\"47px\"},targetView:{padding:0,color:e.palette.blue[200],minWidth:\"60px\",textAlign:\"right\",textTransform:\"none\",fontSize:\"inherit\"},menu:{border:\"1px solid \"+e.palette.grey[200],borderRadius:\"1px\",color:e.palette.blue[200],\"& .MuiListItem-root\":{minHeight:0},\"& .Mui-disabled\":{color:e.palette.grey[200]}}}}))((function(e){var t=e.hasIncomingOps,a=e.hasOutgoingOps,i=e.classes,o=ke(Object(n.useState)(null),2),l=o[0],c=o[1],d=Object(n.useContext)(pe),u=d.handleViewCauseImpact,p=d.toggleOperations;function g(){c(null)}function m(e){p(e),g()}return r.a.createElement(\"span\",{className:i.root},r.a.createElement(xe.a,{onClick:function(e){c(e.currentTarget)},className:i.targetView,\"data-cy\":\"fll-view-dropdown\"},s.a.translate(Te+\".FllField.viewDropdown\"),r.a.createElement(Fe.a,null)),r.a.createElement(we.a,{classes:{paper:i.menu},anchorEl:l,open:Boolean(l),onClose:g,getContentAnchorEl:null,anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"center\"},\"data-cy\":\"fll-field-menu\"},r.a.createElement(Oe.a,{onClick:u,\"data-cy\":\"fll-cause-impact\"},s.a.translate(Te+\".FllMenu.causeImpact\")),r.a.createElement(Le.a,{variant:\"middle\"}),r.a.createElement(Oe.a,{onClick:t?m.bind(this,\"incoming\"):void 0,disabled:!t,\"data-cy\":\"fll-view-incoming\"},s.a.translate(Te+\".FllMenu.viewIncoming\")),r.a.createElement(Oe.a,{onClick:a?m.bind(this,\"outgoing\"):void 0,disabled:!a,\"data-cy\":\"fll-view-outgoing\"},s.a.translate(Te+\".FllMenu.viewOutgoing\"))))})),je=function(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,i=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return o};var Ce=p()((function(e){return{root:{\"&.grid-row.activeField\":{backgroundColor:e.palette.yellow[200]}},hoverText:{color:e.palette.blue[200],paddingLeft:\"28px\"},targetView:{paddingLeft:\"55px\",color:e.palette.blue[200],cursor:\"pointer\",height:\"20px\"},fieldname:{pointerEvents:\"none\",overflow:\"hidden\",textOverflow:\"ellipsis\"}}}))((function(e){var t=e.field,a=e.isActive,i=e.classes,o=je(Object(n.useState)(!1),2),l=o[0],c=o[1],u=Object(n.useContext)(pe),p=u.activeField,g=u.showingOneField,m=u.handleFieldClick,f=u.handleReset,v=ae(u.selection,u.start,u.end),y=\"/ns/\"+t.namespace+\"/datasets/\"+t.dataset+\"/fields\"+v+\"&field=\"+t.name,h=function(e){c(e)},b=\"target\"===t.type;return r.a.createElement(\"div\",{onClick:b&&!g?m:void 0,onMouseEnter:h.bind(this,!0),onMouseLeave:h.bind(this,!1),className:d()(\"grid-row\",\"grid-link\",i.root,{activeField:a}),id:t.id,\"data-fieldname\":t.name,\"data-hovering\":l,\"data-target\":b,\"data-cy\":t.type+\"-\"+t.name},r.a.createElement(\"span\",{className:i.fieldname},t.name),r.a.createElement(be.a,{condition:l&&!b},r.a.createElement(\"span\",{\"data-cy\":\"view-lineage\"},r.a.createElement(Ee.Link,{to:y,className:i.hoverText,title:t.name},s.a.translate(\"features.FieldLevelLineage.v2.FllTable.FllField.viewLineage\")))),r.a.createElement(be.a,{condition:p.id&&t.id===p.id&&b&&!g},r.a.createElement(Ie,{hasIncomingOps:t.hasIncomingOps,hasOutgoingOps:t.hasOutgoingOps})),r.a.createElement(be.a,{condition:p.id&&t.id===p.id&&b&&g},r.a.createElement(\"span\",{className:i.targetView,onClick:f,\"data-cy\":\"reset-lineage\"},s.a.translate(\"features.FieldLevelLineage.v2.FllTable.FllField.resetLineage\"))))})),Ne=a(1968),_e=a.n(Ne),Re=\"features.FieldLevelLineage.v2.FllTable.FllExpandableField\";var Pe=p()((function(e){return{root:{color:e.palette.blue[200],fontSize:\"0.92em\",cursor:\"pointer\"}}}))((function(e){var t=e.isExpanded,a=e.handleClick,n=e.tablename,i=e.classes,o=t?s.a.translate(Re+\".hideFields\"):s.a.translate(Re+\".showFields\"),l=t?r.a.createElement(_e.a,null):r.a.createElement(Fe.a,null);return r.a.createElement(\"div\",{className:d()(\"grid-row\",\"grid-link\",i.root),\"data-cy\":(t?\"hide\":\"show\")+\"-fields-panel-\"+n,onClick:a},o,l)})),Me=function(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,i=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return o};var Ae=p()((function(e){return{tableHeader:{borderBottom:\"2px solid \"+e.palette.grey[300],height:\"40px\",paddingLeft:\"10px\",fontWeight:\"bold\",fontSize:\"1rem\",overflow:\"hidden\",\" & .table-name\":{overflow:\"hidden\",whiteSpace:\"nowrap\",textOverflow:\"ellipsis\"},\" &.hovering\":{backgroundColor:e.palette.grey[700]}},tableSubheader:{color:e.palette.grey[100],fontWeight:\"normal\"}}}))((function(e){var t=e.tableInfo,a=e.fields,i=e.isTarget,o=e.isExpanded,l=void 0!==o&&o,c=e.classes,u=Me(Object(n.useState)(!1),2),p=u[0],g=u[1],m=Object(n.useContext)(pe),f=ae(m.selection,m.start,m.end),v=function(e){g(e)},y=a.length,h=a[0].dataset,b={context:y},E=\"/ns/\"+t.namespace+\"/datasets/\"+t.dataset+\"/fields\"+f;return r.a.createElement(\"div\",{className:d()(c.tableHeader,{hovering:p&&!i}),onMouseEnter:v.bind(this,!0),onMouseLeave:v.bind(this,!1)},r.a.createElement(\"div\",{className:\"table-name\"},h),r.a.createElement(be.a,{condition:!p||i},r.a.createElement(\"div\",{className:c.tableSubheader},i||l?s.a.translate(\"features.FieldLevelLineage.v2.FllTable.fieldsCount\",b):s.a.translate(\"features.FieldLevelLineage.v2.FllTable.relatedFieldsCount\",b))),r.a.createElement(be.a,{condition:p},r.a.createElement(\"span\",{\"data-cy\":\"view-lineage\",className:c.tableSubheader},r.a.createElement(Ee.Link,{to:E,className:c.hoverText,title:h},s.a.translate(\"features.FieldLevelLineage.v2.FllTable.FllTableHeader.viewLineage\")))))}));function He(e,t,a,n){return void 0===n&&(n=!1),r.a.createElement(Ae,{tableInfo:e,fields:t,isTarget:a,isExpanded:n})}function Be(e,t,a,n,i,o,l){void 0===a&&(a=new Set),void 0===n&&(n=!1),void 0===i&&(i=!1);var s=e[0].namespace;return r.a.createElement(\"div\",{className:l.gridBody,id:t,\"data-tablename\":t,\"data-namespace\":s},e.map((function(e){var t=a.has(e.id);return r.a.createElement(Ce,{key:e.id,field:e,isActive:t})})),r.a.createElement(be.a,{condition:n},r.a.createElement(Pe,{isExpanded:i,handleClick:o,tablename:e[0].dataset})))}var Ge=p()((function(e){return he()({table:{width:\"225px\",border:\"1px solid \"+e.palette.grey[300],fontSize:\"0.92rem\",marginBottom:\"10px\",\"& .grid.grid-container\":{maxHeight:\"none\",background:e.palette.white[50]}},targetTable:{border:\"2px solid \"+e.palette.green[100]},activeTable:{border:\"2px solid \"+e.palette.grey[100]},gridBody:{\"& .grid-row\":{paddingLeft:\"10px\",paddingRight:\"10px\",borderTop:\"1px solid \"+e.palette.grey[500],height:\"21px\",alignItems:\"center\",padding:\"0\",gridTemplateColumns:\"1fr auto !important\"},\" & .grid-row:hover\":{backgroundColor:e.palette.grey[700]},\" & .grid-row.selected\":{backgroundColor:e.palette.yellow[200],color:e.palette.orange[50],fontWeight:\"bold\",cursor:\"unset\"}},viewLineage:{visibility:\"hidden\",color:e.palette.blue[300]}})}))((function(e){var t,a,i=e.tableId,o=e.tableInfo,l=e.type,c=e.isActive,u=e.classes,p=[{property:\"name\",label:i}],g=Object(n.useContext)(pe),m=g.target,f=g.activeCauseSets,v=g.activeImpactSets,y=g.handleExpandFields,h=o?o.fields:[];if(!h||0===h.length)return r.a.createElement(\"div\",null,s.a.translate(\"features.FieldLevelLineage.v2.FllTable.noRelatedTables\",{type:l,target:m}));var b=o.unrelatedFields,E=o.fieldCount,O=o.isExpanded||!1,w=\"target\"===l,S=h.length<E;b&&O&&(h=h.concat(b));var F,L=new Set((F=[],c&&!w&&(\"cause\"===l&&Object.keys(f).length>0?F=f[i].fields:\"impact\"===l&&Object.keys(v).length>0&&(F=v[i].fields)),F).map((function(e){return e.id})));return r.a.createElement(ve.a,{key:\"cause \"+i,entities:h,gridHeaders:p,className:d()(u.table,(t={},t[u.targetTable]=w,t),(a={},a[u.activeTable]=c,a)),renderGridHeader:He.bind(null,o,h,w,O,u),renderGridBody:Be.bind(this,h,i,L,S,O,(function(){var e=h[0].namespace,t=h[0].dataset;y(e,t,l)}),u)})})),ze=a(4),Ue=a(62),We=a(14),De=function(){var e=Object(n.useContext)(pe),t=e.activeOpsIndex,a=e.operations,i=e.prevOperation,o=e.nextOperation,l=a.length,s=0===t,c=t===l-1;return r.a.createElement(\"div\",{className:\"navigation\"},r.a.createElement(\"span\",{className:d()(\"nav-icon\",{disabled:s}),onClick:s?void 0:i},r.a.createElement(We.a,{name:\"icon-caret-left\"})),r.a.createElement(\"span\",null,t+1),r.a.createElement(\"span\",{className:\"separator\"},\"of\"),r.a.createElement(\"span\",null,l),r.a.createElement(\"span\",{className:d()(\"nav-icon\",{disabled:c}),onClick:c?void 0:o},r.a.createElement(We.a,{name:\"icon-caret-right\"})))},Qe=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),Ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeOrigin:null,activeField:{operation:null,name:null}},t}return Qe(t,e),t.prototype.componentWillReceiveProps=function(){this.setState({activeOrigin:null,activeField:{operation:null,name:null}})},t.prototype.handleInputClick=function(e,t){this.setState({activeOrigin:e.origin,activeField:{operation:t.name,name:e.name}})},t.prototype.joinEndpoints=function(e){return e&&e.endPoint?e.endPoint.name:\"--\"},t.prototype.renderInput=function(e){return this.joinEndpoints(e.inputs)},t.prototype.renderOutput=function(e){return this.joinEndpoints(e.outputs)},t.prototype.renderInputFields=function(e){var t=this,a=e.inputs.fields;return a?a.map((function(n,i){var o=t.state.activeField,l=o.operation===e.name&&o.name===n.name&&t.state.activeOrigin===n.origin;return r.a.createElement(\"span\",{key:n.name+\"-\"+i},r.a.createElement(\"span\",{className:d()(\"input-field\",{selected:l}),onClick:t.handleInputClick.bind(t,n,e)},\"[\",n.name,\"]\"),i!==a.length-1?\", \":null)})):\"--\"},t.prototype.renderOutputFields=function(e){return e.outputs.fields?e.outputs.fields.join(\", \"):\"--\"},t.prototype.renderHeader=function(){return r.a.createElement(\"div\",{className:\"grid-header\"},r.a.createElement(\"div\",{className:\"grid-row\"},r.a.createElement(\"div\",null),[\"input\",\"inputFields\",\"pluginName\",\"description\",\"outputFields\",\"output\"].map((function(e){return r.a.createElement(\"div\",{key:e},s.a.translate(\"features.FieldLevelLineage.OperationsModal.Table.\"+e))}))))},t.prototype.renderBody=function(e){var t=this;return r.a.createElement(\"div\",{className:\"grid-body\"},e.map((function(e,a){var n=null,i=e.name.split(\".\")[0];if(e.description){var o=e.description.split(\"\\n\");n=o.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(\"span\",null,e),o.length-1!==t?r.a.createElement(\"br\",null):null)}))}return r.a.createElement(\"div\",{key:e.name+\"-\"+a,className:d()(\"grid-row\",{active:e.name===t.state.activeOrigin})},r.a.createElement(\"div\",null,a+1),r.a.createElement(\"div\",null,t.renderInput(e)),r.a.createElement(\"div\",null,t.renderInputFields(e)),r.a.createElement(\"div\",{title:i},i),r.a.createElement(\"div\",{title:e.description},n),r.a.createElement(\"div\",null,t.renderOutputFields(e)),r.a.createElement(\"div\",null,t.renderOutput(e)))})))},t.prototype.render=function(){var e=this.context,t=e.operations,a=e.activeOpsIndex;return r.a.createElement(\"div\",{className:\"grid-wrapper\"},r.a.createElement(\"div\",{className:\"grid grid-container grid-compact\"},this.renderHeader(),this.renderBody(t[a].operations)))},t}(n.Component),Je=Ve;Ve.contextType=pe;var Ye=a(45);function Xe(e){switch(e.length){case 0:return\"\";case 1:return\"'\"+e[0]+\"'\";case 2:return\"'\"+e[0]+\"' and \"+e[1];default:var t=e[-1];return e.slice(0,-1).map((function(e){return\"'\"+e+\"'\"})).join(\", \")+\", and '\"+t+\"'\"}}var qe=function(){var e=Object(n.useContext)(pe),t=e.operations,a=void 0===t?[]:t,i=e.activeOpsIndex,o=e.errorOps,l=a[i],c=Object(g.E)(l,\"programs\",0),d=Object(g.E)(c,\"program\",\"application\"),u=Object(g.E)(c,\"lastExecutedTimeInSeconds\"),p=function(e){var t=new Set,a=new Set;return e?(e.forEach((function(e){var n=Object(g.E)(e,\"inputs\",\"endPoint\",\"name\"),r=Object(g.E)(e,\"outputs\",\"endPoint\",\"name\");n&&t.add(n),r&&a.add(r)})),{sources:Xe(Array.from(t)),targets:Xe(Array.from(a))}):{}}(Object(g.E)(l,\"operations\")),m=p.sources,f=p.targets;return Object(g.B)(o)?r.a.createElement(\"div\",{className:\"operations-container\"},r.a.createElement(Ye.b,{type:Ye.a.h5,label:s.a.translate(\"features.FieldLevelLineage.OperationsModal.summaryText\",{sources:m,targets:f}),className:\"summary-text\"}),r.a.createElement(De,null),r.a.createElement(Ye.b,{type:Ye.a.h6,label:s.a.translate(\"features.FieldLevelLineage.OperationsModal.lastExecution\",{app:d,time:Object(g.s)(u)}),className:\"last-executed\"}),r.a.createElement(Je,null)):r.a.createElement(\"div\",{className:\"error-container text-danger\"},o)};a(1970);var Ke=p()((function(){return{root:{maxWidth:\"85vw\",maxHeight:\"80vh\"}}}))((function(){var e=Object(n.useContext)(pe),t=e.showOperations,a=e.toggleOperations,i=e.activeField,o=e.direction,l=e.loadingOps;if(!t)return null;var c=r.a.createElement(\"div\",{className:\"loading-container text-center\"},r.a.createElement(Ue.a,null));return r.a.createElement(ze.Modal,{isOpen:!0,toggle:a,size:\"lg\",backdrop:\"static\",zIndex:\"1061\",className:\"field-level-lineage-modal cdap-modal\"},r.a.createElement(ze.ModalHeader,null,r.a.createElement(\"span\",null,s.a.translate(\"features.FieldLevelLineage.OperationsModal.Title.\"+o,{fieldName:i.name})),r.a.createElement(\"div\",{className:\"close-section float-right\",onClick:function(e){a()}},r.a.createElement(We.a,{name:\"icon-close\"}))),r.a.createElement(ze.ModalBody,null,l?c:r.a.createElement(qe,null)))})),Ze=a(175),$e=a(718),et=a(360);var tt=p()((function(){return{view:{padding:10},timeRangeContainer:{display:\"inline-block\",position:\"relative\",marginLeft:10,width:400,\"& .expandable-time-range-picker\":{width:\"330px\"}}}}))((function(e){var t=e.classes,a=Object(n.useContext)(pe),i=a.start,o=a.end,l=a.selection,c=a.setTimeRange,d=a.setCustomTimeRange;return r.a.createElement(\"div\",{\"data-cy\":\"fll-time-picker\"},r.a.createElement(\"span\",{className:t.view},s.a.translate(\"features.FieldLevelLineage.v2.TimeRangePicker.view\")),r.a.createElement($e.a,{value:l,onChange:function(e){var t=e.target.value;c(t)},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},getContentAnchorEl:null},\"data-cy\":\"time-picker-dropdown\"},E.map((function(e){return r.a.createElement(Oe.a,{value:e,key:e,\"data-cy\":e},s.a.translate(\"features.FieldLevelLineage.v2.TimeRangePicker.TimeRangeOptions.\"+e))}))),l!==E[0]?null:r.a.createElement(\"div\",{className:t.timeRangeContainer,\"data-cy\":\"time-range-selector\"},r.a.createElement(et.a,{onDone:d,inSeconds:!0,start:i,end:o})))})),at=a(415),nt=p()((function(e){return{root:{height:60,background:e.palette.white[50],display:\"grid\",gridTemplateColumns:\"auto 342px\"},picker:{marginTop:\"2px\"}}}))((function(e){var t=e.datasetId,a=e.classes;return n.createElement(\"div\",{className:a.root},n.createElement(\"div\",null,n.createElement(at.a,{breadCrumbAnchorLabel:\"Back\",title:t,entityType:s.a.translate(\"commons.entity.dataset.singular\").toString(),entityIcon:\"icon-datasets\",historyBack:!0,inheritBackground:!0})),n.createElement(\"span\",{className:a.picker},n.createElement(tt,null)))})),rt=a(42),it=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),ot=function(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,i=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return o},lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawLinks=function(){if(!t.context.loadingLineage){var e=t.context.links,a=t.context.activeField,n=a?a.id:void 0,r=e.incoming.concat(e.outgoing);0!==r.length&&(t.clearCanvas(),r.forEach((function(e){var a=e.source.id===n||e.destination.id===n;t.drawLineFromLink(e,a)})))}},t.debounceRedrawLinks=B()(t.drawLinks,200),t}return it(t,e),t.prototype.drawLineFromLink=function(e,t){var a=e.source,n=e.destination;void 0===t&&(t=!1);var r=a.id.replace(/\\./g,\"\\\\.\"),i=n.id.replace(/\\./g,\"\\\\.\"),o=ie.select(\"#\"+r),l=ie.select(\"#\"+i),s=-this.myRef.getBoundingClientRect().top-65+this.myRef.scrollTop,c=o.node().getBoundingClientRect(),d=l.node().getBoundingClientRect(),u=c.right+-100,p=c.top+.5*c.height+s,g=d.left+-100,m=d.top+.5*c.height+s,f=t?ie.select(\"#selected-links\"):ie.select(\"#\"+r+\"_\"+i),v=(g-u)/3,y=ie.line().curve(ie.curveMonotoneX),h=[[u,p],[u+v,p],[g-v,m],[g,m]],b=t?Ze.e[50]:Ze.d[300];f.append(\"path\").style(\"stroke\",b).style(\"stroke-width\",\"1\").style(\"fill\",\"none\").attr(\"d\",y(h));f.append(\"rect\").attr(\"x\",u-4).attr(\"y\",p-4).attr(\"width\",8).attr(\"height\",8).attr(\"rx\",1.8).attr(\"pointer-events\",\"fill\").style(\"fill\",b),f.append(\"rect\").attr(\"x\",g-4).attr(\"y\",m-4).attr(\"width\",8).attr(\"height\",8).attr(\"rx\",1.8).attr(\"pointer-events\",\"fill\").style(\"fill\",b)},t.prototype.clearCanvas=function(){ie.select(\"#links-container\").selectAll(\"path,rect\").remove()},t.prototype.drawActiveLinks=function(e){var t=this;this.clearCanvas(),e.incoming.concat(e.outgoing).forEach((function(e){t.drawLineFromLink(e,!0)}))},t.prototype.componentDidUpdate=function(){var e=this.context,t=e.showingOneField,a=e.activeLinks,n=e.activeField;if(t)return this.clearCanvas(),void this.drawActiveLinks(a);n&&ie.select(\"#\"+n.id).classed(\"selected\",!0),this.clearCanvas(),this.drawLinks()},t.prototype.componentWillUnmount=function(){window.removeEventListener(\"resize\",this.debounceRedrawLinks)},t.prototype.componentDidMount=function(){this.drawLinks(),this.myRef=o.a.findDOMNode(this),window.addEventListener(\"resize\",this.debounceRedrawLinks)},t.prototype.render=function(){var e=this;return r.a.createElement(me,null,(function(t){var a=t.causeSets,n=t.target,i=t.targetFields,o=t.impactSets,l=t.links,c=t.activeLinks,d=t.activeCauseSets,u=t.activeImpactSets,p=t.showingOneField,g=t.loadingLineage,m=t.error,f=l,v=a,y=o;p&&(f=c,v=d,y=u);var h=f.incoming.concat(f.outgoing),b=r.a.createElement(\"div\",{className:\"loading-container text-center\"},r.a.createElement(rt.a,null));return g?r.a.createElement(\"div\",{className:e.props.classes.wrapper},r.a.createElement(nt,{datasetId:n}),b):m?r.a.createElement(\"div\",{className:e.props.classes.wrapper},r.a.createElement(nt,{datasetId:n}),r.a.createElement(\"div\",{className:e.props.classes.root},r.a.createElement(\"div\",{className:e.props.classes.errorContainer},r.a.createElement(Ye.b,{type:Ye.a.h4,label:m,className:e.props.classes.errorMessage}),r.a.createElement(\"hr\",{className:e.props.classes.errorSeparator}),r.a.createElement(\"div\",{className:e.props.classes.errorMessageSuggestion},r.a.createElement(\"span\",null,s.a.translate(\"features.FieldLevelLineage.Error.suggestionHeading\")),r.a.createElement(\"br\",null),r.a.createElement(\"span\",null,s.a.translate(\"features.FieldLevelLineage.Error.suggestionMessage\")))))):r.a.createElement(\"div\",{className:e.props.classes.wrapper},r.a.createElement(nt,{datasetId:n}),r.a.createElement(be.a,{condition:!g&&!m},r.a.createElement(\"div\",{className:e.props.classes.root,id:\"fll-container\"},r.a.createElement(\"svg\",{id:\"links-container\",className:e.props.classes.container},r.a.createElement(\"g\",null,h.map((function(e){var t=e.source.id+\"_\"+e.destination.id;return r.a.createElement(\"svg\",{id:t,key:t,className:\"fll-link\"})}))),r.a.createElement(\"g\",{id:\"selected-links\"})),r.a.createElement(\"div\",{\"data-cy\":\"cause-fields\",className:e.props.classes.summaryCol},r.a.createElement(fe,{type:\"cause\",total:Object.keys(v).length}),r.a.createElement(be.a,{condition:0===Object.keys(v).length},r.a.createElement(Ge,{type:\"cause\"})),Object.entries(v).map((function(e){var t=ot(e,2),a=t[0],n=t[1],i=a in d;return r.a.createElement(Ge,{key:a,tableId:a,tableInfo:n,type:\"cause\",isActive:i})}))),r.a.createElement(\"div\",{\"data-cy\":\"target-fields\",className:e.props.classes.summaryCol},r.a.createElement(fe,{type:\"target\",total:i.fields.length}),r.a.createElement(Ge,{tableId:n,tableInfo:i,type:\"target\"})),r.a.createElement(\"div\",{\"data-cy\":\"impact-fields\",className:e.props.classes.summaryCol},r.a.createElement(fe,{type:\"impact\",total:Object.keys(y).length}),r.a.createElement(be.a,{condition:0===Object.keys(y).length},r.a.createElement(Ge,{type:\"impact\"})),Object.entries(y).map((function(e){var t=ot(e,2),a=t[0],n=t[1],i=a in u;return r.a.createElement(Ge,{key:a,tableId:a,tableInfo:n,type:\"impact\",isActive:i})}))),r.a.createElement(Ke,null))))}))},t}(r.a.Component);lt.contextType=pe;var st=p()((function(e){return{wrapper:{overflowY:\"scroll\",background:e.palette.grey[700],height:\"100%\",minHeight:\"480px\",width:\"100%\",overflowX:\"hidden\"},root:{paddingLeft:\"100px\",paddingRight:\"100px\",paddingTop:\"5px\",display:\"flex\",justifyContent:\"space-between\",position:\"relative\",overflow:\"hidden\"},container:{position:\"absolute\",height:\"100%\",width:\"100%\",pointerEvents:\"none\",overflow:\"visible\"},summaryCol:{maxWidth:\"30%\"},errorContainer:{margin:\"25vh auto 0\",maxWidth:\"50vw\"},errorMessage:{fontWeight:500},errorSeparator:{backgroundColor:e.palette.grey[200]},errorMessageSuggestion:{fontSize:\"14px\"}}}))(lt);a.d(t,\"default\",(function(){return dt}));var ct=function(){return(ct=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function dt(e){return r.a.createElement(ge,ct({},e),r.a.createElement(st,null))}}}]);","extractedComments":[]}