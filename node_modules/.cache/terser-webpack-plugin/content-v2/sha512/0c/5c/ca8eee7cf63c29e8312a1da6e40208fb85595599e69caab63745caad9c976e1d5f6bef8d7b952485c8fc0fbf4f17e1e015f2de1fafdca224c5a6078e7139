{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1591:function(e,t,a){\"use strict\";var r=a(72),n=a(73);Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var c=n(a(0)),l=(0,r(a(74)).default)(c.createElement(\"path\",{d:\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"}),\"MoreVert\");t.default=l},2392:function(e,t,a){\"use strict\";a.r(t);var r=a(0),n=a.n(r),c=a(161),l=a(12),o=a.n(l),i=a(125),u=a(13),s=a(42),d=a(512),p=a(163),y=a(8),m=function(e){var t=e.state,a=e.open,r=e.handleClose,c=e.alertSuccess,l=t.secureKeys,o=t.activeKeyIndex;return n.a.createElement(p.a,{headerTitle:\"Delete secure key\",confirmationElem:\"Are you sure you want to delete your secure key from your CDAP Account?\",confirmButtonText:\"Delete\",confirmFn:function(){var e=l.get(o).get(\"name\"),t={namespace:Object(y.d)(),key:e};d.a.delete(t).subscribe((function(){r(),c()}))},cancelFn:r,isOpen:a})},E=a(198),f=a(1531),v=a(1534),S=a(1533),g=a(1532),h=a(1483),C=a(311),K=a(29),b=a.n(K),k=function(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l},T=o()((function(e){return{secureKeyInput:{margin:e.Spacing(3)+\"px \"+e.spacing(1)+\"px\"}}}))((function(e){var t=e.classes,a=e.state,r=e.open,l=e.alertSuccess,o=e.handleClose,i=a.secureKeys,u=a.activeKeyIndex,s=i.get(u),p=s?s.get(\"name\"):\"\",m=k(n.a.useState(s?s.get(\"description\"):\"\"),2),K=m[0],T=m[1],w=k(n.a.useState(\"\"),2),x=w[0],_=w[1],I=s?s.get(\"properties\"):\"\",D=k(n.a.useState(\"\"),2),N=D[0],M=D[1],O=k(n.a.useState(!1),2),A=O[0],P=O[1];n.a.useEffect((function(){b()(I)||M(I.entrySeq().map((function(e){return e.join(\";\")})).join(\",\"))}),[I]);return n.a.createElement(f.a,{open:r,onClose:o},n.a.createElement(g.a,null,\"Edit \",p),n.a.createElement(S.a,null,n.a.createElement(\"div\",{className:t.secureKeyInput},n.a.createElement(h.a,{required:!0,variant:\"outlined\",label:\"Description\",defaultValue:K,onChange:function(e){T(e.target.value),P(!0)},fullWidth:!0,InputProps:{className:t.textField},\"data-cy\":\"secure-key-description\"})),n.a.createElement(\"div\",{className:t.secureKeyInput},n.a.createElement(h.a,{required:!0,variant:\"outlined\",label:\"Data\",type:\"password\",value:x,onChange:function(e){_(e.target.value),P(!0)},fullWidth:!0,InputProps:{className:t.textField},\"data-cy\":\"secure-key-data\"})),n.a.createElement(\"div\",{className:t.secureKeyInput},n.a.createElement(C.c,{widgetProperty:{label:\"Properties\",name:\"Properties\",\"widget-type\":\"keyvalue\",\"widget-attributes\":{delimiter:\",\",\"kv-delimiter\":\";\",\"key-placeholder\":\"key\",\"value-placeholder\":\"value\"}},pluginProperty:{required:!1,name:\"Properties\"},value:N,onChange:function(e){return function(e){M(e),P(!0)}(e)},\"data-cy\":\"secure-key-properties\"}))),n.a.createElement(v.a,null,n.a.createElement(E.a,{onClick:o,color:\"primary\",\"data-cy\":\"close-edit-dialog\"},\"Cancel\"),n.a.createElement(E.a,{onClick:function(){var e,t,a={namespace:Object(y.d)(),key:p},r={description:K,properties:(e=N,t=Object(c.Map)({}),e.split(\",\").forEach((function(e){var a=k(e.split(\";\"),2),r=a[0],n=a[1];t=t.set(r,n)})),t),data:x};d.a.put(a,r).subscribe((function(){T(\"\"),_(\"\"),M(\"\"),l(),o()}))},color:\"primary\",disabled:!A||!K||!x,\"data-cy\":\"save-secure-key\"},\"Save\")))})),w=a(309),x=a(1521),_=a(278),I=a(708),D=a(712),N=a(1591),M=a.n(N),O=a(3),A=function(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l},P=o()((function(e){return{secureKeyActionButtons:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"}}}))((function(e){var t=e.classes,a=e.openDeleteDialog,n=e.keyIndex,c=A(r.useState(null),2),l=c[0],o=c[1],i=function(e){Object(O.G)(e),o(null)};return r.createElement(\"div\",{className:t.secureKeyActionButtons},r.createElement(\"div\",null,r.createElement(_.a,{onClick:function(e){Object(O.G)(e),o(e.currentTarget)}},r.createElement(M.a,{\"data-cy\":\"menu-icon\"})),r.createElement(x.a,{onClickAway:i},r.createElement(I.a,{anchorEl:l,open:Boolean(l),onClose:i},r.createElement(D.a,{onClick:function(e){return t=e,a(n),void i(t);var t},\"data-cy\":\"delete-secure-key\"},\"Delete\")))))})),F=function(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l},j=o()((function(e){return{secureKeyInput:{margin:e.Spacing(3)+\"px \"+e.spacing(1)+\"px\"}}}))((function(e){var t=e.classes,a=e.state,r=e.open,l=e.handleClose,o=e.alertSuccess,i=e.alertFailure,u=a.secureKeys,s=F(n.a.useState(\"\"),2),p=s[0],m=s[1],K=F(n.a.useState(\"\"),2),b=K[0],k=K[1],T=F(n.a.useState(\"\"),2),w=T[0],x=T[1],_=F(n.a.useState(\"\"),2),I=_[0],D=_[1],N=function(){var e,t,a={namespace:Object(y.d)(),key:p},r={description:b,data:w,properties:(e=I,t=Object(c.Map)({}),e.split(\",\").forEach((function(e){var a=F(e.split(\";\"),2),r=a[0],n=a[1];t=t.set(r,n)})),t)};d.a.put(a,r).subscribe((function(){m(\"\"),k(\"\"),x(\"\"),D(\"\"),o(),l()}))};return n.a.createElement(f.a,{open:r,onClose:l},n.a.createElement(g.a,null,\"Create secure key\"),n.a.createElement(S.a,null,n.a.createElement(\"div\",{className:t.secureKeyInput},n.a.createElement(h.a,{required:!0,variant:\"outlined\",label:\"Name\",defaultValue:p,onChange:function(e){m(e.target.value)},fullWidth:!0,InputProps:{className:t.textField},\"data-cy\":\"secure-key-name\"})),n.a.createElement(\"div\",{className:t.secureKeyInput},n.a.createElement(h.a,{required:!0,variant:\"outlined\",label:\"Description\",defaultValue:b,onChange:function(e){k(e.target.value)},fullWidth:!0,InputProps:{className:t.textField},\"data-cy\":\"secure-key-description\"})),n.a.createElement(\"div\",{className:t.secureKeyInput},n.a.createElement(h.a,{required:!0,variant:\"outlined\",label:\"Data\",type:\"password\",value:w,onChange:function(e){x(e.target.value)},fullWidth:!0,InputProps:{className:t.textField},\"data-cy\":\"secure-key-data\"})),n.a.createElement(\"div\",{className:t.secureKeyInput},n.a.createElement(C.c,{widgetProperty:{label:\"Properties\",name:\"Properties\",\"widget-type\":\"keyvalue\",\"widget-attributes\":{delimiter:\",\",\"kv-delimiter\":\";\",\"key-placeholder\":\"key\",\"value-placeholder\":\"value\"}},pluginProperty:{required:!1,name:\"Properties\"},value:I,onChange:function(e){return function(e){D(e)}(e)},\"data-cy\":\"secure-key-properties\"}))),n.a.createElement(v.a,null,n.a.createElement(E.a,{onClick:l,color:\"primary\",\"data-cy\":\"cancel\"},\"Cancel\"),n.a.createElement(E.a,{onClick:function(){u.map((function(e){return e.get(\"name\")})).includes(p)?i():N()},color:\"primary\",disabled:!p||!b||!w,\"data-cy\":\"save-secure-key\"},\"Save\")))})),L=a(283),R=a.n(L),U=a(1524),Y=a(1526),q=a(313),B=a.n(q),z=a(6),V=a.n(z),G=o()((function(e){return{margin:{margin:e.spacing(1)},textField:{width:\"30ch\"}}}))((function(e){var t=e.classes,a=e.searchText,r=e.setSearchText;return n.a.createElement(U.a,{className:V()(t.margin,t.textField),variant:\"outlined\"},n.a.createElement(h.a,{className:t.margin,value:a,onChange:function(e){return r(e.target.value)},placeholder:\"Search secure keys\",InputProps:{startAdornment:n.a.createElement(Y.a,{position:\"start\"},n.a.createElement(_.a,null,n.a.createElement(B.a,null))),endAdornment:n.a.createElement(Y.a,{position:\"end\"},n.a.createElement(_.a,{onClick:function(){return r(\"\")}},n.a.createElement(R.a,null)))},\"data-cy\":\"search-secure-key\"}))})),W=a(1474),J=a(1476),X=a(279),H=a(1475),Q=a(714),Z=function(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l},$=o()((function(e){return{head:{backgroundColor:e.palette.grey[300],color:e.palette.common.white,padding:\"5px 10px\",fontSize:13,\"&:first-of-type\":{borderRight:\"1px solid \"+e.palette.grey[500]}},body:{padding:\"5px 10px\",fontSize:13,\"&:first-of-type\":{borderRight:\"1px solid \"+e.palette.grey[500]}}}}))(X.a),ee=o()((function(e){return{secureKeysTitle:{fontSize:\"20px\",paddingTop:e.spacing(1)},secureKeyManager:{display:\"grid\",alignItems:\"center\",gridTemplateColumns:\"repeat(7, 1fr)\"},addSecureKeyButton:{gridRow:\"1\",gridColumnStart:\"1\",textTransform:\"none\",padding:\"7px\",fontSize:\"13px\"},secureKeySearch:{gridRow:\"1\",gridColumnStart:\"7\"},root:{width:\"100%\",display:\"inline-block\",height:\"auto\",marginTop:e.spacing(1)},row:{height:40,\"&:nth-of-type(odd)\":{backgroundColor:e.palette.grey[600]},cursor:\"pointer\",hover:{cursor:\"pointer\"}},nameCell:{width:\"30%\"},descriptionCell:{width:\"60%\"},actionButtonsCell:{width:\"10%\"}}}))((function(e){var t=e.classes,a=e.state,n=e.alertSuccess,c=e.alertFailure,l=e.openEditDialog,o=e.openDeleteDialog,i=a.secureKeys,u=Z(r.useState(\"\"),2),s=u[0],d=u[1],p=Z(r.useState(!1),2),y=p[0],m=p[1],f=i.filter((function(e){return e.get(\"name\").toLowerCase().includes(s.toLowerCase())||e.get(\"description\").toLowerCase().includes(s.toLowerCase())}));return r.createElement(\"div\",null,r.createElement(\"div\",{className:t.secureKeysTitle},\"Secure keys\"),r.createElement(\"div\",{className:t.secureKeyManager},r.createElement(E.a,{className:t.addSecureKeyButton,color:\"primary\",variant:\"contained\",onClick:function(){return m(!0)},\"data-cy\":\"create-secure-key\"},\"Add secure key\"),r.createElement(\"div\",{className:t.secureKeySearch},r.createElement(G,{searchText:s,setSearchText:d}))),r.createElement(w.a,{className:t.root},r.createElement(W.a,null,r.createElement(H.a,null,r.createElement(Q.a,{className:t.row},r.createElement($,null,\"Key\"),r.createElement($,null,\"Description\"),r.createElement($,null))),r.createElement(J.a,{\"data-cy\":\"secure-key-list\"},f.map((function(e,a){var n=e.get(\"name\");return r.createElement(Q.a,{key:e.get(\"name\"),hover:!0,selected:!0,className:t.row,onClick:function(){return l(a)},\"data-cy\":\"secure-key-row-\"+e.get(\"name\")},r.createElement($,{className:t.nameCell},n),r.createElement($,{className:t.descriptionCell},e.get(\"description\")),r.createElement($,{className:t.actionButtonsCell},r.createElement(P,{openDeleteDialog:o,keyIndex:a})))}))))),r.createElement(j,{state:a,open:y,handleClose:function(){return m(!1)},alertSuccess:n,alertFailure:c}))}));a.d(t,\"SecureKeyStatus\",(function(){return te})),a.d(t,\"initialState\",(function(){return ne})),a.d(t,\"reducer\",(function(){return ce}));var te,ae=function(){return(ae=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},re=function(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l};!function(e){e.Normal=\"Normal\",e.Success=\"SUCCESS\",e.Failure=\"FAILURE\"}(te||(te={}));var ne={secureKeys:Object(c.List)([]),secureKeyStatus:te.Normal,editMode:!1,deleteMode:!1,activeKeyIndex:null,loading:!0};function ce(e,t){switch(t.type){case\"SET_SECURE_KEYS\":return ae(ae({},e),{secureKeys:t.secureKeys});case\"SET_SECURE_KEY_STATUS\":return ae(ae({},e),{secureKeyStatus:t.secureKeyStatus});case\"SET_EDIT_MODE\":return ae(ae({},e),{editMode:t.editMode});case\"SET_DELETE_MODE\":return ae(ae({},e),{deleteMode:t.deleteMode});case\"SET_ACTIVE_KEY_INDEX\":return ae(ae({},e),{activeKeyIndex:t.activeKeyIndex});case\"SET_LOADING\":return ae(ae({},e),{loading:t.loading});default:return e}}var le=o()((function(){return{content:{padding:\"50px\"}}}))((function(e){var t=e.classes,a=re(r.useReducer(ce,ne),2),n=a[0],l=a[1],o=n.secureKeyStatus,p=n.editMode,E=n.deleteMode,f=n.loading,v=Object(y.d)();r.useEffect((function(){S()}),[]);var S=function(){d.a.list({namespace:v}).subscribe((function(e){l({type:\"SET_LOADING\",loading:!0}),e&&(l({type:\"SET_SECURE_KEYS\",secureKeys:Object(c.fromJS)(e)}),l({type:\"SET_LOADING\",loading:!1}))}))},g=function(){l({type:\"SET_SECURE_KEY_STATUS\",secureKeyStatus:te.Normal})},h=function(){l({type:\"SET_SECURE_KEY_STATUS\",secureKeyStatus:te.Success}),S()};return r.createElement(\"div\",{className:\"container\"},r.createElement(i.a,{message:\"saved successfully\",showAlert:o===te.Success,type:\"success\",onClose:g}),r.createElement(i.a,{message:\"Error: Duplicate key name\",showAlert:o===te.Failure,type:\"error\",onClose:g}),r.createElement(u.a,{condition:f},r.createElement(s.a,{showFullPage:!0})),r.createElement(u.a,{condition:!f},r.createElement(\"div\",{className:t.content},r.createElement(ee,{state:n,alertSuccess:h,alertFailure:function(){l({type:\"SET_SECURE_KEY_STATUS\",secureKeyStatus:te.Failure})},openDeleteDialog:function(e){l({type:\"SET_DELETE_MODE\",deleteMode:!0}),l({type:\"SET_ACTIVE_KEY_INDEX\",activeKeyIndex:e})},openEditDialog:function(e){l({type:\"SET_EDIT_MODE\",editMode:!0}),l({type:\"SET_ACTIVE_KEY_INDEX\",activeKeyIndex:e})}}))),r.createElement(u.a,{condition:p},r.createElement(T,{state:n,open:p,handleClose:function(){l({type:\"SET_EDIT_MODE\",editMode:!1})},alertSuccess:h})),r.createElement(u.a,{condition:E},r.createElement(m,{state:n,open:E,handleClose:function(){l({type:\"SET_DELETE_MODE\",deleteMode:!1})},alertSuccess:h})))}));t.default=le}}]);","extractedComments":[]}